<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Start:Bayes! - 8&nbsp; Vorhersage-Verteilung</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./0800-gauss.html" rel="next">
<link href="./0600-Post.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./0500-Globusversuch.html">Bayes</a></li><li class="breadcrumb-item"><a href="./0700-ppv.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Vorhersage-Verteilung</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Start:Bayes!</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Organisatorisches</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Hinweise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0100-Pruefung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Prüfung</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Wahrscheinlichkeit</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0200-Inferenz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Inferenz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0300-Wskt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Wahrscheinlichkeit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0400-Verteilungen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Verteilungen</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Bayes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0500-Globusversuch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Globusversuch</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0600-Post.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Die Post befragen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0700-ppv.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Vorhersage-Verteilung</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Lineare Modelle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0800-gauss.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Gauss-Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0900-lineare-modelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Lineare Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1000-metrische-AV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Forschungsfragen mit metrischer AV</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Kausalität</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1100-kausal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Kausalinferenz</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Abschluss</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1200-abschluss.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Abschluss</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
<li>
<a href="#lernsteuerung" id="toc-lernsteuerung" class="nav-link active" data-scroll-target="#lernsteuerung"><span class="header-section-number">8.1</span> Lernsteuerung</a>
  <ul class="collapse">
<li><a href="#lernziele" id="toc-lernziele" class="nav-link" data-scroll-target="#lernziele"><span class="header-section-number">8.1.1</span> Lernziele</a></li>
  <li><a href="#vorbereitung-im-eigenstudium" id="toc-vorbereitung-im-eigenstudium" class="nav-link" data-scroll-target="#vorbereitung-im-eigenstudium"><span class="header-section-number">8.1.2</span> Vorbereitung im Eigenstudium</a></li>
  <li><a href="#ben%C3%B6tigte-r-pakete" id="toc-benötigte-r-pakete" class="nav-link" data-scroll-target="#ben%C3%B6tigte-r-pakete"><span class="header-section-number">8.1.3</span> Benötigte R-Pakete</a></li>
  </ul>
</li>
  <li><a href="#der-zwielichte-dozent-stichproben-vert.-vs.-post-vert." id="toc-der-zwielichte-dozent-stichproben-vert.-vs.-post-vert." class="nav-link" data-scroll-target="#der-zwielichte-dozent-stichproben-vert.-vs.-post-vert."><span class="header-section-number">8.2</span> Der zwielichte Dozent: Stichproben-Vert. vs.&nbsp;Post-Vert.</a></li>
  <li>
<a href="#mit-stichproben-neue-beobachtungen-simulieren" id="toc-mit-stichproben-neue-beobachtungen-simulieren" class="nav-link" data-scroll-target="#mit-stichproben-neue-beobachtungen-simulieren"><span class="header-section-number">8.3</span> Mit Stichproben neue Beobachtungen simulieren</a>
  <ul class="collapse">
<li><a href="#sec-rbinom" id="toc-sec-rbinom" class="nav-link" data-scroll-target="#sec-rbinom"><span class="header-section-number">8.3.1</span> Wir simulieren die Wasserzahl bei Globuswürfen</a></li>
  <li><a href="#traue-niemals-einem-golem-einem-modell" id="toc-traue-niemals-einem-golem-einem-modell" class="nav-link" data-scroll-target="#traue-niemals-einem-golem-einem-modell"><span class="header-section-number">8.3.2</span> Traue niemals einem Golem (einem Modell)</a></li>
  </ul>
</li>
  <li><a href="#mit-guten-simulationen-kommt-man-den-wahren-werten-nahe" id="toc-mit-guten-simulationen-kommt-man-den-wahren-werten-nahe" class="nav-link" data-scroll-target="#mit-guten-simulationen-kommt-man-den-wahren-werten-nahe"><span class="header-section-number">8.4</span> Mit guten Simulationen kommt man den wahren Werten nahe</a></li>
  <li><a href="#stichprobenverteilung" id="toc-stichprobenverteilung" class="nav-link" data-scroll-target="#stichprobenverteilung"><span class="header-section-number">8.5</span> Stichprobenverteilung</a></li>
  <li>
<a href="#die-posterior-pr%C3%A4diktiv-verteilung-ppv" id="toc-die-posterior-prädiktiv-verteilung-ppv" class="nav-link" data-scroll-target="#die-posterior-pr%C3%A4diktiv-verteilung-ppv"><span class="header-section-number">8.6</span> Die Posterior-Prädiktiv-Verteilung (PPV)</a>
  <ul class="collapse">
<li><a href="#was-ist-die-ppv-und-wozu-ist-sie-gut" id="toc-was-ist-die-ppv-und-wozu-ist-sie-gut" class="nav-link" data-scroll-target="#was-ist-die-ppv-und-wozu-ist-sie-gut"><span class="header-section-number">8.6.1</span> Was ist die PPV und wozu ist sie gut?</a></li>
  <li><a href="#visualisierung-der-ppv" id="toc-visualisierung-der-ppv" class="nav-link" data-scroll-target="#visualisierung-der-ppv"><span class="header-section-number">8.6.2</span> Visualisierung der PPV</a></li>
  <li><a href="#ppv-berechnen" id="toc-ppv-berechnen" class="nav-link" data-scroll-target="#ppv-berechnen"><span class="header-section-number">8.6.3</span> PPV berechnen</a></li>
  </ul>
</li>
  <li>
<a href="#fazit" id="toc-fazit" class="nav-link" data-scroll-target="#fazit"><span class="header-section-number">8.7</span> Fazit</a>
  <ul class="collapse">
<li><a href="#vorhersagen-sind-schwierig" id="toc-vorhersagen-sind-schwierig" class="nav-link" data-scroll-target="#vorhersagen-sind-schwierig"><span class="header-section-number">8.7.1</span> Vorhersagen sind schwierig</a></li>
  <li><a href="#zwei-arten-von-ungewissheit-in-vorhersagen-von-modellen" id="toc-zwei-arten-von-ungewissheit-in-vorhersagen-von-modellen" class="nav-link" data-scroll-target="#zwei-arten-von-ungewissheit-in-vorhersagen-von-modellen"><span class="header-section-number">8.7.2</span> Zwei Arten von Ungewissheit in Vorhersagen von Modellen</a></li>
  <li><a href="#vergleich-der-verteilungen" id="toc-vergleich-der-verteilungen" class="nav-link" data-scroll-target="#vergleich-der-verteilungen"><span class="header-section-number">8.7.3</span> Vergleich der Verteilungen</a></li>
  <li><a href="#so-viele-verteilungen" id="toc-so-viele-verteilungen" class="nav-link" data-scroll-target="#so-viele-verteilungen"><span class="header-section-number">8.7.4</span> So viele Verteilungen…</a></li>
  </ul>
</li>
  <li><a href="#aufgaben" id="toc-aufgaben" class="nav-link" data-scroll-target="#aufgaben"><span class="header-section-number">8.8</span> Aufgaben</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><span class="header-section-number">8.9</span> —</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Vorhersage-Verteilung</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/Golem_hex.png" class="img-fluid figure-img" style="width:5.0%"></p>
<figcaption class="figure-caption">Bayes:Start!</figcaption></figure>
</div>
<section id="lernsteuerung" class="level2" data-number="8.1"><h2 data-number="8.1" class="anchored" data-anchor-id="lernsteuerung">
<span class="header-section-number">8.1</span> Lernsteuerung</h2>
<section id="lernziele" class="level3" data-number="8.1.1"><h3 data-number="8.1.1" class="anchored" data-anchor-id="lernziele">
<span class="header-section-number">8.1.1</span> Lernziele</h3>
<p>Nach Absolvieren des jeweiligen Kapitels sollen folgende Lernziele erreicht sein.</p>
<p>Sie können …</p>
<ul>
<li>erläutern, was eine Posteriori-Prädiktiv-Verteilung (PPV) ist, und inwiefern Sie vor Übergewissheit schützt</li>
<li>eine informelle Modellprüfung für das Beispiel aus dem Unterricht anhand der Posteriori-Prädiktiv-Verteilung durchführen</li>
</ul></section><section id="vorbereitung-im-eigenstudium" class="level3" data-number="8.1.2"><h3 data-number="8.1.2" class="anchored" data-anchor-id="vorbereitung-im-eigenstudium">
<span class="header-section-number">8.1.2</span> Vorbereitung im Eigenstudium</h3>
<ul>
<li><a href="https://statistik1.netlify.app/040-verbildlichen#vertiefung">Statistik1, Kap. “Daten verbildlichen”</a></li>
</ul></section><section id="benötigte-r-pakete" class="level3" data-number="8.1.3"><h3 data-number="8.1.3" class="anchored" data-anchor-id="benötigte-r-pakete">
<span class="header-section-number">8.1.3</span> Benötigte R-Pakete</h3>
<div class="cell" data-hash="0700-ppv_cache/html/unnamed-chunk-2_933450c8f708de6083a3bab9b545641b">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a></span><span class="op">)</span>  <span class="co"># dataviz</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="der-zwielichte-dozent-stichproben-vert.-vs.-post-vert." class="level2" data-number="8.2"><h2 data-number="8.2" class="anchored" data-anchor-id="der-zwielichte-dozent-stichproben-vert.-vs.-post-vert.">
<span class="header-section-number">8.2</span> Der zwielichte Dozent: Stichproben-Vert. vs.&nbsp;Post-Vert.</h2>
<p>In einer dunklen Gasse fordert Sie ein Statistik-Dozent zu einem Glücksspiel heraus<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Münzwurf; wenn er gewinnt, müssen Sie 10 Euro zahlen. Gewinnen Sie, bekommen Sie 11 Euro. Klingt nach einer guten Partie, nicht war? Natürlich nehmen Sie sofort an.</p>
<p>Sie spielen also Münzwurf; der Dozent setzt auf Zahl. Sie spielen 10 Runden. Leider gewinnt der Dozent 9 von 10 Mal<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p><em>Ist die Münze fair oder zieht der mich über den Tisch?</em>, das ist die Frage, die Ihnen brennend durch den Kopf zieht.</p>
<p>“Sind 9 von 10 Treffern noch realistisch erwartbar, wenn es mit rechten Dingen zugeht, oder beweist das Ergebnis, dass die Münze gezinkt ist?”</p>
<p>Wütend (und mit leeren Taschen) ziehen Sie von dannen.</p>
<p>Zusammengefasst: Daten: 9 von 10 Treffern beim Münzwurf. Forschungsfrage: Ist die Münze fair?</p>
<p>Schauen wir uns zunächst einmal an, wie wahrscheinlich 9 von 10 Treffern sind, <em>wenn</em> die Münze fair ist, s. <a href="#fig-stiprovert">Abbildung&nbsp;<span>8.1</span></a>.</p>
<div class="cell" data-hash="0700-ppv_cache/html/fig-stiprovert_8251964c5d2d34cb2e84c4a79fd3c0ec">
<div class="cell-output-display">
<div id="fig-stiprovert" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="0700-ppv_files/figure-html/fig-stiprovert-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.1: Stichprobenverteilung einer fairen Münze</figcaption></figure>
</div>
</div>
</div>
<p>Die <em>Stichprobenverteilung</em> zeigt, wie wahrscheinlich die empirischen Daten <span class="math inline">\(D\)</span> (z.B. 9 von 10 Treffer) sind, <em>gegeben</em> eines Parameterwerts <span class="math inline">\(\pi\)</span> (z.B. <span class="math inline">\(p=0.5\)</span>): <span class="math inline">\(Pr(D|\pi)\)</span><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>Anders gesagt, die Stichprobenverteilung zeigt die Verteilung der Likelihoods eines bestimmten Parameterwerts.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Der p-Wert</em></p>
<p>Der p-Wert ist die zentrale Statistik der Inferenzstatistik. Er wird genutzt, um über die Ablehnung einer Hypothese zu entscheiden. In diesem Fall entspricht der p-Wert dem türkis markierten Flächenanteil in <a href="#fig-stiprovert">Abbildung&nbsp;<span>8.1</span></a>. Ist dieser Anteil kleiner als 5% (der Gesamtfläche im Balkendiagramm), so wird die Hypothese (hier: faire Münze) verworfen. Allgemeiner gesprochne berechnet sich der p-Wert als Summe der Likelihoods, die mindestens so extrem sind wie das beobachtete empirische Ergebnis.</p>
</div>
</div>
<p>In der Bayes-Statistik ist die Post-Verteilung Dreh- und Angelpunkt der Entscheidung über eine Hypothese. In <a href="#fig-post-zwielicht">Abbildung&nbsp;<span>8.2</span></a> ist die Posteriori-Verteilung für die Daten zum zwielichten Dozent dargestellt.</p>
<div class="cell" data-hash="0700-ppv_cache/html/zwielicht-daten_1be0f73c4a6b197beb6287905af12e55">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Post-Verteilung:</span></span>
<span><span class="va">d_zwielicht</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>    p_grid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span> from<span class="op">=</span><span class="fl">0</span> , to<span class="op">=</span><span class="fl">1</span> , length.out<span class="op">=</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>    prior <span class="op">=</span> <span class="fl">1</span>,  <span class="co"># Priori-Gewichte</span></span>
<span>    likelihood <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">dbinom</a></span><span class="op">(</span><span class="fl">8</span>, size <span class="op">=</span> <span class="fl">10</span>, prob<span class="op">=</span><span class="va">p_grid</span><span class="op">)</span> ,</span>
<span>    unstandardisierte_posterior <span class="op">=</span> <span class="va">likelihood</span> <span class="op">*</span> <span class="va">prior</span> ,</span>
<span>    posterior <span class="op">=</span> <span class="va">unstandardisierte_posterior</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">unstandardisierte_posterior</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Stichproben ziehen aus der Posteriori-Verteilung:</span></span>
<span><span class="va">samples_zwielicht</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>    gewinnchance_muenze <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span></span>
<span>      <span class="va">d_zwielicht</span><span class="op">$</span><span class="va">p_grid</span> , </span>
<span>      prob<span class="op">=</span><span class="va">d_zwielicht</span><span class="op">$</span><span class="va">posterior</span>, </span>
<span>      size<span class="op">=</span><span class="fl">1e4</span>, </span>
<span>      replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="0700-ppv_cache/html/fig-post-zwielicht_a3e23af59e7f9ffa10faefabb18a5a33">
<div class="cell-output-display">
<div id="fig-post-zwielicht" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="0700-ppv_files/figure-html/fig-post-zwielicht-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.2: Post-Verteilung für den Parameter p zu den Daten des zwielichten Dozenten (9 von 10 Treffern im wiederholten Münzwurf)</figcaption></figure>
</div>
</div>
</div>
<div class="cell" data-hash="0700-ppv_cache/html/unnamed-chunk-3_7d1a2e03ed6347e28b7b65e1de85357b">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/gghistogram.html">gghistogram</a></span><span class="op">(</span><span class="va">samples_zwielicht</span>,</span>
<span>            x <span class="op">=</span> <span class="st">"gewinnchance_muenze"</span>,</span>
<span>            title <span class="op">=</span> <span class="st">"Posteriori-Verteilung für p"</span>,</span>
<span>            subtitle <span class="op">=</span> <span class="st">"Priori: Gleichverteilung; Daten: 9 von 10 Treffern, binomialverteilt"</span>,</span>
<span>            xlab <span class="op">=</span> <span class="st">"p (Gewinchance der Münze)"</span>,</span>
<span>            fill <span class="op">=</span> <span class="st">"grey60"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hilfe für die Funktion <code><a href="https://rpkgs.datanovia.com/ggpubr/reference/gghistogram.html">gghistogram()</a></code> finden Sie auf der <a href="https://rpkgs.datanovia.com/ggpubr/reference/gghistogram.html">Hilfeseite der Funktion</a>.</p>
<p>Die <em>Posteriori-Verteilung</em> gibt die Wahrscheinlichkeit jedes Parameterwerts <span class="math inline">\(p\)</span> wider, gegeben der empirischen Daten <span class="math inline">\(D\)</span>: <span class="math inline">\(Pr(p|D)\)</span>.</p>
<p>Die meisten Forschungsfragen lassen sich mit der Post-Verteilung beantworten, nicht mit der Stichprobenverteilung.</p>
<p>Jetzt können wir wieder die Post-Verteilung auslesen, um die Hypothese zu beantworten. Schauen wir uns einige Beispiel dazu an.</p>
<div id="exm-zwielicht1" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.1 (Einigermaßen fair?) </strong></span>Wie wahrscheinlich ist es, dass die Münze “einigermaßen” fair ist, sagen wir, eine Trefferwahrscheinlichkeit <span class="math inline">\(0.45 &lt; \pi &lt; 0.55\)</span><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> aufweist?</p>
<div class="cell" data-hash="0700-ppv_cache/html/unnamed-chunk-4_2aa5f8a580c7a68c9ce591a4267f055a">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">samples_zwielicht</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">gewinnchance_muenze</span> <span class="op">&gt;</span> <span class="fl">0.45</span> <span class="op">&amp;</span> <span class="va">gewinnchance_muenze</span> <span class="op">&lt;</span> <span class="fl">0.55</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["gewinnchance_muenze > 0.45 & gewinnchance_muenze < 0.55"],"name":[1],"type":["lgl"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]},{"label":["prop"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"FALSE","2":"9485","3":"0.9485"},{"1":"TRUE","2":"515","3":"0.0515"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Die Wahrscheinlichkeit für eine “einigermaßen faire” Münze ist klein, etwa 5%!</p>
</div>
<div id="exm-zwielicht2" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.2 (Münze gezinkt?) </strong></span>Schauen wir uns an, wie wahrscheinlich es ist - gegeben der Daten und unserem Modell - dass die Münze massiv gezinkt ist. “Massiv” definieren wir dabei mit “mindestens 70% Trefferwahrscheinlichkeit”<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>, also <span class="math inline">\(\pi &gt;= .7\)</span><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>.</p>
<div class="cell" data-hash="0700-ppv_cache/html/unnamed-chunk-5_142198ac41b5c695202b0cf75a648a51">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">samples_zwielicht</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">gewinnchance_muenze</span> <span class="op">&gt;</span> <span class="fl">.7</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["gewinnchance_muenze > 0.7"],"name":[1],"type":["lgl"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]},{"label":["prop"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"FALSE","2":"3211","3":"0.3211"},{"1":"TRUE","2":"6789","3":"0.6789"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Wir finden eine recht hohe Wahrscheinlichkeit für eine “massive” Manipulation der Münze.</p>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ist es nicht einfach und schön, wie wir mit Hilfe des Stichprobenziehens allerlei Forschungsfragen beantworten können? Eine Post-Verteilung aus Stichproben erlaubt uns, viele Fragen mit einfachen Methoden, nämlich schlichtes Zählen, zu beantworten.</p>
</div>
</div>
<p>Natürlich könnte (und sollte?) man unser Modell kritisieren. Ist es wirklich sinnvoll, die Trefferwahrscheinlichkeit apriori als gleichverteilt anzunehmen? Das heißt ja, wir glauben, dass eine Trefferwahrscheinlichkeit von 99,99999% genauso wahrscheinlich ist wie 50,55555%. Auf der anderen Seite: Der Charme einer Gleichverteilung ist, dass sie objektiv ist, in dem Sinne, dass wir keinerlei Information einfließen lassen. Wir sind indifferent gegenüber dem Parameter <span class="math inline">\(\pi\)</span>, der Trefferwahrscheinlichkeit.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>In einem zweiten Versuch könnten wir jetzt unsere Post-Verteilung als Priori-Verteilung nutzen. Das Ergebnis des ersten Versuchs wird dann hergenommen als Ausgangspunkt für einen zweiten Versuch. Damit wird das Wissen der Wissenschaft weitergegeben<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, so wie es sein sollte.</p>
</div>
</div>
</section><section id="mit-stichproben-neue-beobachtungen-simulieren" class="level2" data-number="8.3"><h2 data-number="8.3" class="anchored" data-anchor-id="mit-stichproben-neue-beobachtungen-simulieren">
<span class="header-section-number">8.3</span> Mit Stichproben neue Beobachtungen simulieren</h2>
<p>Zur Erinnerung: Der Likelihood (L) zeigt die Wahrscheinlichkeit eine Trefferzahl gegeben eines bestimmten Parameterwerts. In unseren Beispiel könnten wir z.B. die drei Likelihoods für <span class="math inline">\(w=0,1,2\)</span> ausrechnen, gegeben <span class="math inline">\(N=2\)</span> und <span class="math inline">\(p = 0.5\)</span>:</p>
<div class="cell" data-hash="0700-ppv_cache/html/QM2-Thema3-Post-befragen-23_cbf535805485a61e42a215d6712d6ea0">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">L</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">dbinom</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, size <span class="op">=</span> <span class="fl">2</span>, prob <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">L</span></span>
<span><span class="co">## [1] 0.25 0.50 0.25</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ah, die Wahrscheinlichkeit für 0 oder 2 Treffer beträgt 50%, wenn <span class="math inline">\(pi=1/2\)</span>; für 1 Treffer beträgt sie entsprechend 50%<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>.</p>
<section id="sec-rbinom" class="level3" data-number="8.3.1"><h3 data-number="8.3.1" class="anchored" data-anchor-id="sec-rbinom">
<span class="header-section-number">8.3.1</span> Wir simulieren die Wasserzahl bei Globuswürfen</h3>
<p>Zurück zu unserem Globusversuch!</p>
<p>Wir könnten uns jetzt Globusbälle basteln mit verschiedenen Wasseranteilen, und diese oft hochwerfen. Damit könnten wir herausfinden, welche Trefferzahlen sich bei verschiedenen Wasseranteilen finden lassen würden.</p>
<p>Wer gerne bastelt, freut sich darauf. Kritischere Geister<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> würden den Aufwand bemängeln und die Frage nach dem Zweck der Übung stellen<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wenn wir wissen, welche Trefferzahlen laut einem Modell zu erwarten sind, können wir die <em>echten</em> (beobachteten) Trefferzahlen mit den laut Modell zu erwartenden vergleichen. Damit haben wir eine Methode, mit dem wir ein Modell auf Herz und Nieren prüfen können. Ein schlechtes Modell wird mit seinen Vorhersagen an der Realität scheitern: Erwartung des Modells und beobachtete Daten passen nicht zusammen. Sagt ein Modell etwa <span class="math inline">\(W=9\)</span> vorher bei <span class="math inline">\(N=9\)</span>, aber wir finden <span class="math inline">\(W=0\)</span>, so wird unser Vertrauen in das Modell erschüttert sein. Simulation von Trefferzahlen sind also ein Modell, um die Glaubwürdigkeit unseres Golems zu prüfen. (Nicht nur) bei Golems gilt: Vertrauen ist gut, Kontrolle ist besser.</p>
</div>
</div>
<p>Los geht’s: Wir simulieren <span class="math inline">\(n=1\)</span> neuen Globusversuch mit <span class="math inline">\(N=2, p=0.7\)</span> und zählen die (Wasser-)Treffer:</p>
<div class="cell" data-hash="0700-ppv_cache/html/QM2-Thema3-Post-befragen-25_6d3eca9b0fd7ebb8ba26424835edfb4c">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>  <span class="co"># Zufallszahlen festlegen</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">2</span>, prob <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>  <span class="co"># 0 Treffer (Wasser)</span></span>
<span><span class="co">## [1] 0</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Das geht wie man sieht mit <code>rbinom</code>: <em>r</em> wie <em>random</em> (zufällig) und <em>binom</em> wie binomial verteilt, die Münzwurfverteilung.</p>
<p>Hier sind die Argumente der Funktion <code>rbinom</code> noch etwas näher erklärt:</p>
<div class="cell" data-hash="0700-ppv_cache/html/unnamed-chunk-6_ec04beb7de20daba6c435d929f3b067c">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbinom</span>(<span class="at">n =</span> Wie oft soll der Versuch wiederholt werden?,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">size =</span> Wie viele Globuswürfe pro <span class="fu">Versuch</span> (Stichprobengröße),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">prob =</span> Wie hoch ist die Wahrscheinlichkeit für <span class="fu">Wasser</span> (bzw. für einen Treffer))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Weiter: Warum nicht <span class="math inline">\(n=10\)</span> neue Globusversuche simulieren?</p>
<div class="cell" data-hash="0700-ppv_cache/html/QM2-Thema3-Post-befragen-27_66c25dfa8b8b5789b687f019b3f8cb8b">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, size <span class="op">=</span> <span class="fl">2</span>, prob <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span><span class="co">##  [1] 0 2 1 1 1 1 2 1 1 2</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>“Simulieren” heißt hier, wir lassen den Computer den Globus werfen, ganz anschaulich gesprochen. Natürlich wirft der Computer nicht in Wirklichkeit einen Globus oder eine Münze, sondern er zieht aus der Menge <code>{0,1}</code> eine Zahl, und wir geben die Wahrscheinlichkeit für jedes der beiden Elemente vor, z.B. jeweils 50%.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Simulationsdaten geben Aufschluss, welche Daten (wie oft Wasser) man bei einem bestimmten Modell, <span class="math inline">\(p,N\)</span>, erwarten kann. Münzwürfe - und analoge Versuche, wie Globuswürfe - kann man in R mit <code>rbinom</code> erstellen (simulieren).</p>
</div>
</div>
</section><section id="traue-niemals-einem-golem-einem-modell" class="level3" data-number="8.3.2"><h3 data-number="8.3.2" class="anchored" data-anchor-id="traue-niemals-einem-golem-einem-modell">
<span class="header-section-number">8.3.2</span> Traue niemals einem Golem (einem Modell)</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/5qmhmo.jpg" class="img-fluid figure-img" style="width:25.0%"></p>
<figcaption class="figure-caption">Never trust a Golem</figcaption></figure>
</div>
<p>Quelle: https://imgflip.com/i/5qmhmo</p>
<p>Immer prüfen und wachsam bleiben:</p>
<ul>
<li>(Inwieweit) decken sich die simulierten Daten mit den tatsächlichen Beobachtungen?</li>
<li>Wie realistisch sind die Modellannahmen?</li>
<li>Kann man das Modell aus verschiedenen Perspektiven prüfen?</li>
</ul></section></section><section id="mit-guten-simulationen-kommt-man-den-wahren-werten-nahe" class="level2" data-number="8.4"><h2 data-number="8.4" class="anchored" data-anchor-id="mit-guten-simulationen-kommt-man-den-wahren-werten-nahe">
<span class="header-section-number">8.4</span> Mit guten Simulationen kommt man den wahren Werten nahe</h2>
<p>Warum nicht <span class="math inline">\(n=10^6\)</span> neue Globusversuche simulieren<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>:</p>
<div class="cell" data-hash="0700-ppv_cache/html/QM2-Thema3-Post-befragen-28_0ea7d275f85783e3fa12ab5880a4dff1">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">draws</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>    draws <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="fl">1e6</span>, size <span class="op">=</span> <span class="fl">2</span>, prob <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">draws</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">draws</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">draws</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">prop</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">89770</td>
<td style="text-align: right;">0.089770</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">420629</td>
<td style="text-align: right;">0.420629</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">489601</td>
<td style="text-align: right;">0.489601</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Diese simulierten Häufigkeiten sind sehr ähnlich zu den theoretisch bestimmten Häufigkeiten mit <code>dbinom</code>: Unser Modell liefert plausible Vorhersagen<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>.</p>
<div class="cell" data-hash="0700-ppv_cache/html/QM2-Thema3-Post-befragen-29_5698dc060d8a54d3c30deec0ba063334">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">dbinom</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, size <span class="op">=</span> <span class="fl">2</span>, prob <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span></span>
<span><span class="co">## [1] 0.09 0.42 0.49</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="stichprobenverteilung" class="level2" data-number="8.5"><h2 data-number="8.5" class="anchored" data-anchor-id="stichprobenverteilung">
<span class="header-section-number">8.5</span> Stichprobenverteilung</h2>
<p>Wir ziehen viele (<span class="math inline">\(n=10^6\)</span>) Stichproben für unseren typischen Globusversuch: <span class="math inline">\(N=9\)</span> Globuswürfe mit <span class="math inline">\(p=0.7\)</span>.</p>
<p>Wie viele Wasser (W) erhalten wir wohl typischerweise in diesem Versuch? Die Verteilung der zu erwartenden Treffer ist in <a href="#fig-globus-striprovert">Abbildung&nbsp;<span>8.3</span></a> dargestellt.</p>
<div class="cell" data-hash="0700-ppv_cache/html/QM2-Thema3-Post-befragen-30_b24915ef2a91539a6b3d3ff7a69783c4">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">n_draws</span> <span class="op">&lt;-</span> <span class="fl">1e6</span></span>
<span></span>
<span><span class="va">draws</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>draws <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="va">n_draws</span>, size <span class="op">=</span> <span class="fl">9</span>, prob <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">draws</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">draws</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="0700-ppv_cache/html/fig-globus-striprovert_d2e97ac700f9c4acaa8837a264f4d991">
<div class="cell-output-display">
<div id="fig-globus-striprovert" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="0700-ppv_files/figure-html/fig-globus-striprovert-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.3: Anteile (Wahrscheinlichkeit), die man für jede Wasserzahl in unserem Globusversuch erwarten kann</figcaption></figure>
</div>
</div>
</div>
<p>Die <em>Stichprobenverteilung</em> zeigt, welche Stichprobendaten laut unserem Modell (einem bestimmten Parameterwert) zu erwarten sind. Wir können jetzt prüfen, ob die echten Daten zu den Vorhersagen des Modells passen.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Stichprobenverteilung ist keine empirische Verteilung: Wir führen diese vielen Versuche nicht wirklich durch<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>, wir simulieren sie nur am Computer.</p>
</div>
</div>
</section><section id="die-posterior-prädiktiv-verteilung-ppv" class="level2" data-number="8.6"><h2 data-number="8.6" class="anchored" data-anchor-id="die-posterior-prädiktiv-verteilung-ppv">
<span class="header-section-number">8.6</span> Die Posterior-Prädiktiv-Verteilung (PPV)</h2>
<section id="was-ist-die-ppv-und-wozu-ist-sie-gut" class="level3" data-number="8.6.1"><h3 data-number="8.6.1" class="anchored" data-anchor-id="was-ist-die-ppv-und-wozu-ist-sie-gut">
<span class="header-section-number">8.6.1</span> Was ist die PPV und wozu ist sie gut?</h3>
<p>Unsere Stichprobenverteilung zeigt, welche Trefferzahlen bei einem bestimmten Parameterwert, z.B. <span class="math inline">\(\pi=.7\)</span> in welchen Anteilen zu erwarten sind. Allerdings sind wir uns ja nicht sicher, dass der Wasseranteil genau 70% beträgt. Unser (Un-)Wissen über den Wasseranteil wird ja gerade in der Post-Verteilung gespeichert.</p>
<p>Um eine ehrliche(re) Antwort auf die Frage zu erhalten, wie viele Treffer<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> zu erhalten ist, müssen wir die Post-Verteilung berücksichtigen.</p>
<p>Wir brauche ein Stichprobenverteilung für <em>jeden</em> Wert der Post-Verteilung. Wenn wir dann die resultierenden Strichprobenverteilungen mitteln, haben wir einen ehrlichen Überblick über die zu erwartenden Trefferzahlen. Dabei sollten wir natürlich wahrscheinliche Parameterwerte höher gewichten als unwahrscheinliche. So sollte etwa der (hoch wahrscheinliche) Wasseranteil von 70% ein hohes Gewicht beim Mitteln der Stichprobenverteilung erhalten; der sehr unwahrscheinliche Wasseranteil<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a> von 1% Wasser, sollte entsprechend weniger gewichtet werden, beim Zusammenfassen (d.h. Mittelwert bilden) der Stichprobenverteilungen.</p>
<p>Die resultierende Verteilung - gemittelte Stichprobenverteilungen über alle Werte der Post-Verteilungen - nennt man <em>Posterior-Prädiktiv-Verteilung</em> (PPV).</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die PPV entsteht als gewichteter Mittelwert der Stichprobenverteilungen. Die Gewichte sind die Wahrscheinlichkeiten (bzw. Wahrscheinlichkeitsdichten) der Post-Verteilung.</p>
</div>
</div>
<div id="exm-wozu-ppv" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.3 (Magnus Lagrande braucht die PPV) </strong></span>Im Jahre <span class="math inline">\(10^{99}\)</span> wird das Universum von Magnus Lagrande regiert. Die Weltraumbehörde, für die Sie arbeiten, ist ihm unterstellt. Der Regent findet Ihre Untersuchungen zwar ganz nett, aber leider versteht er keine Wahrscheinlichkeit. Ist ihm zu abstrakt, sagt er. “Oder können Sie mir mal so eine Wahrscheinlichkeit in die Hand geben? Können Sie sagen, Achtung, da hinten rennt eine Wahrscheinlichkeit, fang sie!” Magnus ist also ein Freund für des Konkreten. Einige einflussreiche Gruppen an Statistikis <a href="https://www.routledge.com/Predictive-Inference/Geisser/p/book/9780367449919">unterstützen diese Haltung</a></p>
<p>Jedenfalls hätte Magnus gerne eine Aussage wie “Vermutlich sehen wir beim nächsten Versuch irgendwas zwischen 4 und 7 Treffern”.</p>
<p>Natürlich haben Sie den Anspruch, eine wissenschaftlich belastbare Aussage zu tätigen.</p>
<p>Was nun? Sie müssen sozusagen die Post-Verteilung in eine Post-Verteilung der Beobachtungen, also der konkreten Werte - in diesem Fall die Anzahl der Wassertreffer - übersetzen. Genau das macht die PPV für Sie!</p>
</div>
</section><section id="visualisierung-der-ppv" class="level3" data-number="8.6.2"><h3 data-number="8.6.2" class="anchored" data-anchor-id="visualisierung-der-ppv">
<span class="header-section-number">8.6.2</span> Visualisierung der PPV</h3>
<p>Der Prozess des gewichteten Zusammenfassens der Stichprobenverteilungen ist in <a href="#fig-ppv">Abbildung&nbsp;<span>8.4</span></a> dargestellt.</p>
<div id="fig-ppv" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/ppv.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.4: PPV als gewichtetes Kombinieren der Stichprobenverteilungen</figcaption></figure>
</div>
<p>Quelle: <span class="citation" data-cites="mcelreath_statistical_2020">(<a href="references.html#ref-mcelreath_statistical_2020" role="doc-biblioref"><strong>mcelreath_statistical_2020?</strong></a>)</span></p>
</section><section id="ppv-berechnen" class="level3" data-number="8.6.3"><h3 data-number="8.6.3" class="anchored" data-anchor-id="ppv-berechnen">
<span class="header-section-number">8.6.3</span> PPV berechnen</h3>
<!-- Hier fehlt `posterior_predict` aus rstanarm oder `estimate_prediction` aus modelbased: https://easystats.github.io/modelbased/reference/estimate_expectation.html -->
<p>Die PPV für unseren Standard-Globusversuch (<span class="math inline">\(N=9\)</span>) berechnen wir so:</p>
<p>Wir berechnen viele (z.B. <span class="math inline">\(10^4\)</span>) Stichprobenverteilungen. Dabei müssen wir jedes Mal fragen, wie groß die Wahrscheinlichkeit <span class="math inline">\(\pi\)</span> für Wasser<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a> ist. Wasseranteile <span class="math inline">\(\pi\)</span>, die laut Post-Verteilung <em>wahrscheinlich</em> sind, müssen wir entsprechend <em>oft</em> als Parameterwert (<span class="math inline">\(\pi\)</span>) der Stichprobenverteilung verwenden; umgekehrt dürfen wir nur wenige Stichprobenverteilungen für unwahrscheinliche Parameterwerte erstellen.</p>
<p>Beispielsweise würden wir <em>viele</em> Stichprobenverteilungen für <span class="math inline">\(\pi=.7\)</span> erstellen; für <span class="math inline">\(\pi=0.01\)</span> würden wir <em>wenige</em> Stichprobenverteilungen erstellen, s. <a href="#fig-ppv">Abbildung&nbsp;<span>8.4</span></a>.</p>
<p>Glücklicherweise spiegelt unsere Stichproben-Postverteilung <code>samples</code> wahrscheinlichere Parameterwerte wieder, indem wahrscheinlichere Parameterwerte häufiger vorkommen.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wahrscheinliche Parameterwerte kommen in der Stichproben-Postverteilung <code>samples</code> häufiger vor. Die Häufigkeit der Parameterwerte spiegelt die Wahrscheinlichkeit der jeweiligen Parameterwerte in der (theoretischen) Postverteilung wider.</p>
</div>
</div>
<p>Schauen Sie sich vielleicht zur Erinnerung noch einmal die Definition von <code>samples</code> an, s. <a href="0600-Post.html#lst-post-sample">Listing&nbsp;<span>7.1</span></a>. Tabelle <code>samples</code>, die aus Stichproben aus der Post-Verteilung besteht, ist (in Auszügen) in <a href="0600-Post.html#tbl-postsample1">Tabelle&nbsp;<span>7.2</span></a> dargestellt. Wie die Post-Verteilung auf Basis von Stichproben dann aussieht sieht man in <a href="0600-Post.html#fig-samples1">Abbildung&nbsp;<span>7.2</span></a>. Globusversuche kann man mit <code>rbinom</code> simulieren, s. <a href="#sec-rbinom"><span>Kapitel&nbsp;8.3.1</span></a>.</p>
<p>Wir simulieren also viele (z.B <span class="math inline">\(10^4\)</span>) Globusversuche, jeweils mit <span class="math inline">\(N=9\)</span> Würfen. Wahrscheinliche Parameterwerte, etwa <span class="math inline">\(\pi=7\)</span>, sollen häufiger verwendet werden (bei unseren vielen Globusversuchen) als unwahrscheinliche.</p>
<p>Praktischerweise sind die Werte in der Spalte <code>p_grid</code> in <code>samples</code> so häufig vertreten, wie ihre Wahrscheinlichkeit es erwarten lässt. Hier ist ein Auszug aus <code>samples</code>:</p>
<div class="cell" data-hash="0700-ppv_cache/html/unnamed-chunk-7_464f1d6c67e81c1afbb186ca43dc0b92">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">samples</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">p_grid</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["p_grid"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"0.7777778"},{"1":"0.5555556"},{"1":"0.5555556"},{"1":"0.7777778"},{"1":"0.4444444"},{"1":"0.6666667"},{"1":"0.6666667"},{"1":"0.4444444"},{"1":"0.5555556"},{"1":"0.6666667"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Wie man sieht, sind wahrscheinliche Parameterwerte häufiger vertreten.<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a></p>
<p><code>p_grid</code> ist also eine Liste<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a> von Parameterwerten, deren Häufigkeit die Wahrscheinlichkeit der Parameterwerte gewichtet.</p>
<p>Auf dieser Basis können wir die PPV erstellen:</p>
<div class="cell" data-hash="0700-ppv_cache/html/ppv1_939fef46eb6ff966972bfac6e2fc36b1">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ppv</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="fl">1e4</span>, </span>
<span>         size <span class="op">=</span> <span class="fl">9</span>, </span>
<span>         prob <span class="op">=</span> <span class="va">samples</span><span class="op">$</span><span class="va">p_grid</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ppv</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Schauen wir uns ein Histogramm aller Trefferzahlen an, s. <a href="#fig-ppv2">Abbildung&nbsp;<span>8.5</span></a>.<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a></p>
<div class="cell" data-hash="0700-ppv_cache/html/fig-ppv2_a8510ec8510915e38daa614a9de14a60">
<div class="cell-output-display">
<div id="fig-ppv2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="0700-ppv_files/figure-html/fig-ppv2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.5: Die PPV für unseren Standard-Globusversuch (N=9)</figcaption></figure>
</div>
</div>
</div>
<p>Die PPV unseres Modells zeigt uns (<a href="#fig-ppv2">Abbildung&nbsp;<span>8.5</span></a>), dass wir in künftigen Versuchen zumeist 6 Treffer zu erwarten haben. Aber ein relativer breiter Bereich an Treffern ist ebenfalls gut laut unserer PPV erwartbar.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die PPV zeigt, welche Beobachtungen laut unserem Modell häufig und welche selten sind. Die PPV zeigt keine Parameterwerte, sondern welche Daten (Beobachtungen, Wasserzahlen) wir in künftigen Versuchen wie häufig erwarten können.</p>
</div>
</div>
<div id="exm-ppv1" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 8.4 (Der nächste Planet) </strong></span>Nur zum Spaß spulen wir kurz die Zeit im Universum vor, sagen wir so <span class="math inline">\(10^{99}\)</span> Jahre. Sie arbeiten bei einer Raumfahrtbehörde, die nach neuen Planeten sucht. Nun wurde ein aussichtsreicher Planet gesichtet. Ihre Behörde hat eine Studie gestartet, im Rahmen derer 9 Sonden zu diesem (weit entfernten) Planeten geschossen sind. Von den 9 Sonden sind 6 im Wasser gelandet, was aus Gründen intergalaktischer Wasserknappheit eine gute Nachricht ist.</p>
<blockquote class="blockquote">
<p>“Der nächste Planet wird sicher 6 von 9 Wassertreffer erzielen!”</p>
</blockquote>
<p>– Presse-Chefi der intergalaktischer SpaceY Raumfahrtsbehörde</p>
<p>Jetzt plant Ihre Behörde den Versuch zu wiederholen: Wieder sollen 9 Sonden zu diesem Planeten geschossen werden. Dis Presse-Chefi<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a> tönt vollmundig: “Ich bin sicher, dass wir wieder 6 von 9 Treffer, also 6 von 9 Mal Wasser, haben werden!”.</p>
<p>Kann man diese Aussage mit (hoher) Sicherheit leisten? Perfekte Sicherheit gibt es bekanntlich nur, was Tod und Steuern betrifft, aber kann diese Aussage mit zumindest hoher Sicherheit geleistet werden?</p>
<p>Nein, die PPV (<a href="#fig-ppv2">Abbildung&nbsp;<span>8.5</span></a>) zeigt deutlich, dass unser Wissen nicht ausreicht, um präzise Vorhersagen über künftige Ausgänge des Versuchs zu leisten. So sind auch 5 oder 7 Treffer gut möglich. Auch 4 oder 8 Treffer sind nicht so selten. Sogar 9 Treffer sind nicht super selten.</p>
<p>Dis Presse-Chefi Ihrer Behörde sollte also den Mund nicht so voll nehmen.</p>
</div>
</section></section><section id="fazit" class="level2" data-number="8.7"><h2 data-number="8.7" class="anchored" data-anchor-id="fazit">
<span class="header-section-number">8.7</span> Fazit</h2>
<section id="vorhersagen-sind-schwierig" class="level3" data-number="8.7.1"><h3 data-number="8.7.1" class="anchored" data-anchor-id="vorhersagen-sind-schwierig">
<span class="header-section-number">8.7.1</span> Vorhersagen sind schwierig</h3>
<p>… gerade wenn sie die Zukunft betreffen, so ein Sprichwort.</p>
<p>Das zeigt uns die PPV: Der PPV unseres Modells gelingt es zwar, der theoretisch wahrscheinlichste Parameterwert ist auch der häufigste in unseren Stichproben, aber die Vorhersagen haben eine große Streuung, bergen also recht hohe Ungewissheit. Die PPV zeigt also, welche Beobachtungen laut unserem Modell künftig zu erwarten sind, s. <a href="#fig-ppv2">Abbildung&nbsp;<span>8.5</span></a>.</p>
<p>Würde man die Vorhersagen nur anhand eines bestimmten Parameterwertes (z.B <span class="math inline">\(p=0.6\)</span>) vornehmen, hätten die Vorhersagen <em>zu wenig Streuung</em> in den Vorhersagen, würden also die Ungewissheit nicht ausreichend abbilden. Es würde <em>Übergewissheit</em> (Overconfidence, Overfitting) resultieren.</p>
<p><a href="https://imgflip.com/i/6zm1hh">Wir brauchen die PPV</a>. Ohne die PPV können wir nicht seriös abschätzen, wie viel Ungewissheit in unseren Vorhersagen steckt.</p>
</section><section id="zwei-arten-von-ungewissheit-in-vorhersagen-von-modellen" class="level3" data-number="8.7.2"><h3 data-number="8.7.2" class="anchored" data-anchor-id="zwei-arten-von-ungewissheit-in-vorhersagen-von-modellen">
<span class="header-section-number">8.7.2</span> Zwei Arten von Ungewissheit in Vorhersagen von Modellen</h3>
<ol type="1">
<li><p><em>Ungewissheit innerhalb des Modells</em> (“intrinsische” Ungewissheit): Auch wenn der (oder die) Modellparameter eines Modells mit Sicherheit bekannt sind, so bleibt Unsicherheit, welche Beobachtung eintreten wird: Auch wenn man sicher weiß, dass <span class="math inline">\(p=1/4\)</span> Murmeln blau sind, so kann man nicht sicher sagen, welche Farbe die nächste Murmel haben wird (Ausnahme: <span class="math inline">\(p=1\)</span> oder <span class="math inline">\(p=0\)</span>).</p></li>
<li><p><em>Ungewissheit in den Modellparametern</em>: Wir sind uns nicht sicher, welchen Wert <span class="math inline">\(p\)</span> (bzw. die Modellparameter) haben. Diese Unsicherheit ist in der Post-Verteilung dargestellt.</p></li>
</ol>
<p>Um zu realistischen Vorhersagen zu kommen, möchte man beide Arten von Ungewissheit berücksichtigen: Das macht die <em>Posteriori-Prädiktiv-Verteilung (PPV)</em>.</p>
<p>Die PPV zeigt, welche Daten das Modell vorhersagt (prädiktiv) und mit welcher Häufigkeit, basierend auf der Post-Verteilung.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Der Unterschied zwischen der Post-Verteilung und der PPV ist erstmal, dass die PPV <em>Ausprägungen</em> in ihrer Wahrscheinlichkeit bemisst, also z.B. wie wahrscheinlich 4 von 9 Wassertreffern sind. Die Post-Verteilung bemisst die Wahrscheinlichkeit von Parameterwerten, also z.B. des Wasseranteils.</p>
<p>Etwas tiefer betrachtet zeigt die PPV zwei Arten von Ungewissheit, die Post-Verteilung nur eine. Die PPV zeigt erstens die Ungewissheit zur Verteilung des Parameters (wie die Post-Verteilung), aber auch noch die intrinsische Ungewissheit. Denn auch wenn wir keine Ungewissheit zum Parameter hätten, bliebe Ungewissheit, welche Beobachtungen sich manifestieren. Insofern ist die PVV “ehrlicher”, sie spiegelt die Ungewissheit zu den Beobachtungen wider.</p>
</div>
</div>
</section><section id="vergleich-der-verteilungen" class="level3" data-number="8.7.3"><h3 data-number="8.7.3" class="anchored" data-anchor-id="vergleich-der-verteilungen">
<span class="header-section-number">8.7.3</span> Vergleich der Verteilungen</h3>
<p><a href="#fig-post-pred-ppv-anim">Abbildung&nbsp;<span>8.6</span></a> stellt die in diesem Kapitel diskutierten Verteilungen gegenüber:</p>
<ul>
<li>Links - <em>Posterior-Verteilung</em>: Wahrscheinlichkeiten der Parameterwerte</li>
<li>Mitte - <em>Stichprobenverteilung</em>: Wahrscheinlichkeiten der Beobachtungen gegeben eines bestimmten Parameterwertes</li>
<li>Rechts - <em>Posterior-Prädiktiv-Verteilung</em>: Wahrscheinlichkeiten der Beobachtungen unter Berücksichtigung der Unsicherheit der Posteriori-Verteilung</li>
</ul>
<div class="cell" data-hash="0700-ppv_cache/html/fig-post-pred-ppv-anim_c13018b3f5b1d314ec029d453f95a86a">
<div class="cell-output-display">
<div id="fig-post-pred-ppv-anim" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="img/post-pred-ppv-anim.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Abbildung&nbsp;8.6: Post- vs.&nbsp;Stichproben- vs.&nbsp;PP-Verteilungen</figcaption></figure>
</div>
</div>
</div>
<p><a href="https://twitter.com/rlmcelreath/status/1448978045247893505">Quelle: R. McElreath</a></p>
</section><section id="so-viele-verteilungen" class="level3" data-number="8.7.4"><h3 data-number="8.7.4" class="anchored" data-anchor-id="so-viele-verteilungen">
<span class="header-section-number">8.7.4</span> So viele Verteilungen…</h3>
<ul>
<li>Die <em>Posteriori-Verteilung</em> gibt Aufschluss zur Häufigkeit (Wahrscheinlichkeit) von Parameterwerten:
<ul>
<li>Wie wahrscheinlich ist es, dass “in Wirklichkeit” der Wasseranteil 70% beträgt, also <span class="math inline">\(\pi=.7\)</span>
</li>
<li>In der Wissenschaft ist man meist an den Parametern interessiert.</li>
</ul>
</li>
<li>Die <em>PPV</em> gibt Aufschluss zur Häufigkeit von neuen Beobachtungen:
<ul>
<li>Welche Beobachtungen (wie viele Wasser/Treffer) sind in Zukunft, bei erneuter Durchführung, zu erwarten.</li>
<li>Für die Praxis kann das eine interessante Frage sein.</li>
</ul>
</li>
<li>Der <em>Likelihood</em> gibt Aufschluss, wie gut eine bestimmte Hypothese die Datenlage erklärt.
<ul>
<li>Wie gut passt die Hypothese <span class="math inline">\(\pi=0.7\)</span> auf die Datenlage 6 von 9 Treffern beim Globusversuch?</li>
<li>Der Likelihood kann aus der Stichprobenverteilung herausgelesen werden.</li>
</ul>
</li>
</ul></section></section><section id="aufgaben" class="level2" data-number="8.8"><h2 data-number="8.8" class="anchored" data-anchor-id="aufgaben">
<span class="header-section-number">8.8</span> Aufgaben</h2>
<ol type="1">
<li><a href="https://datenwerk.netlify.app/posts/zwielichter-dozent-bayes/zwielichter-dozent-bayes">Zwielichter Dozent-Bayes</a></li>
<li><a href="https://datenwerk.netlify.app/posts/warum-bayes/warum-bayes">Warum Bayes?</a></li>
<li><a href="https://datenwerk.netlify.app/posts/subjektiv-bayes/subjektiv-bayes">subjektiv-Bayes</a></li>
<li><a href="https://datenwerk.netlify.app/posts/likelihood2/likelihood2">Likelihood2</a></li>
<li><a href="https://datenwerk.netlify.app/posts/anteil-apple/anteil-apple">Anteil-Apple</a></li>
<li><a href="https://datenwerk.netlify.app/posts/rethink3m1/rethink3m1">ReThink3m1</a></li>
<li><a href="https://datenwerk.netlify.app/posts/rethink3m2/rethink3m2">ReThink3m2</a></li>
<li><a href="https://datenwerk.netlify.app/posts/rethink3m3/rethink3m3">ReThink3m3</a></li>
<li><a href="https://datenwerk.netlify.app/posts/rethink3m4/rethink3m4">ReThink3m4</a></li>
<li><a href="https://datenwerk.netlify.app/posts/rethink3m5/rethink3m5">ReThink3m5</a></li>
<li><a href="https://datenwerk.netlify.app/#category=Verteilungen-Quiz">Quiz zu Verteilungen</a></li>
</ol></section><section id="section" class="level2" data-number="8.9"><h2 data-number="8.9" class="anchored" data-anchor-id="section">
<span class="header-section-number">8.9</span> —</h2>
<p><img src="img/outro-07.jpg" class="img-fluid" style="width:100.0%"></p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Hier bräuchte es ein passendes Meme; Vorschläge bitte an mich.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>was er mit lautem Gelächter quittiert<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Das griechische kleine p wird “pi” genannt und <span class="math inline">\(\pi\)</span> geschrieben. Zur Erinnerung: Parameter- oder Populationskennwerte werden in der Statistik häufig mit griechischen Buchstaben benannt, um sie von Stichprobenkennwerten abzugrenzen.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>zwischen 45% und 55% mit anderen Worten<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>ja, das ist subjektiv<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Führende Nullen bei Anteilen werden oft weggelassen, man schreibt also oft .7 wenn man 0.7 bzw. 70% meint. Das ist nicht nur kürzer, sondern man weiß auch direkt dass es sich um einen Anteil handelt. Behält man die führende Null bei, etwa 0.77, so würde das signalisieren, dass die Zahl auch größer als Null sein könnte.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>übrigens auf mathematisch gesehen ideale Art und Weise.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>das sollte uns bekannt vorkommen<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>oder weniger bastelfreundliche<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>bravo!<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>Übrigens können Computer nicht echten Zufall erzeugen (das kann vermutlich niemand), aber durch gewisse verzwickte Rechnungen sind die Zahlen, die der Computer uns präsentiert, nicht oder kaum vom “Zufall” zu unterscheiden, also z.B. gleichverteilt ohne besondere Muster.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Wer R nicht mag, ist eingeladen, diesen Versuch von Hand mit selbstgebastelten Globusbällen zu wiederholen.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>Braver Golem!<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>Nur die extremen Bastelfreunde machen das<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Im Globusversuch ist Wasser der “Treffer”; in einem Münzwurf-Versuch könnte “Kopf” der Treffer und die Anzahl der geworfenen Köpfe die Trefferzahl sein<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>zumindest laut unserer Post-Verteilung<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>d.h. einen Treffer<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>An dieser Stelle sollten Sie sichd die ganze Spalte <code>p_grid</code> anschauen, um sich von dieser Behauptung mit eigenen Augen zu überzeugen.<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p>technisch in R ein <em>Vektor</em><a href="#fnref19" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn20"><p>Es kann auch dem Verständnis helfen, dass Sie sich alle Werte der Tabelle <code>ppv</code> selber in Ruhe anschauen, um sich zu überzeugen, welche Wasserzahlen (Trefferzahlen) häufiger und welche seltener vorkommen.<a href="#fnref20" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn21"><p>In der Zeit dieses Beispiels ist es üblich, kein fixes Geschlecht zu haben<a href="#fnref21" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./0600-Post.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Die Post befragen</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./0800-gauss.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Gauss-Modelle</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>2&nbsp; Inferenz – Start:Bayes!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./0300-Wskt.html" rel="next">
<link href="./index.html" rel="prev">
<link href="./img/Golem_hex.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ef56b68f8fa1e9d2ba328e99e439f80.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0c3ef1a7a266e32c8f1c7e546cf8cabb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-2f7cced78de7748216b8364af62012d1.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-0c3ef1a7a266e32c8f1c7e546cf8cabb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta name="mermaid-theme" content="neutral">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script><script src="site_libs/quarto-diagram/mermaid-init.js"></script><link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./0200-Inferenz.html">Grundlagen</a></li><li class="breadcrumb-item"><a href="./0200-Inferenz.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Inferenz</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Start:Bayes!</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/sebastiansauer/start-bayes" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Organisatorisches</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0200-Inferenz.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Inferenz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0300-Wskt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Hallo, Wahrscheinlichkeit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0350-wskt2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Rechnen mit Wahrscheinlichkeit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0400-Verteilungen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Verteilungen</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Bayes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0500-Globusversuch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Bayes-Versuch</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0600-Post.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Die Post befragen</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Lineare Modelle</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0800-gauss.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gauss-Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0900-lineare-modelle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Einfache lineare Modelle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1050-Schaetzen-Testen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Schätzen vs.&nbsp;Testen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1000-metrische-AV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Fallbeispiele</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Kausalität</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1150-konfundierung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Konfundierung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1180-kausalatome.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Die Atome des Kausalität</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Anhang</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1200-abschluss.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Abschluss</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./definitions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Definitionen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./theorems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Theoreme</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literaturverzeichnis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./imprint.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Impressum</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-privacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Datenschutzhinweise</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
<li>
<a href="#lernsteuerung" id="toc-lernsteuerung" class="nav-link active" data-scroll-target="#lernsteuerung"><span class="header-section-number">2.1</span> Lernsteuerung</a>
  <ul>
<li><a href="#position-im-modulverlauf" id="toc-position-im-modulverlauf" class="nav-link" data-scroll-target="#position-im-modulverlauf"><span class="header-section-number">2.1.1</span> Position im Modulverlauf</a></li>
  <li><a href="#lernziele" id="toc-lernziele" class="nav-link" data-scroll-target="#lernziele"><span class="header-section-number">2.1.2</span> Lernziele</a></li>
  <li><a href="#begleitliteratur" id="toc-begleitliteratur" class="nav-link" data-scroll-target="#begleitliteratur"><span class="header-section-number">2.1.3</span> Begleitliteratur</a></li>
  <li><a href="#vorbereitung-im-eigenstudium" id="toc-vorbereitung-im-eigenstudium" class="nav-link" data-scroll-target="#vorbereitung-im-eigenstudium"><span class="header-section-number">2.1.4</span> Vorbereitung im Eigenstudium</a></li>
  <li><a href="#begleitvideos" id="toc-begleitvideos" class="nav-link" data-scroll-target="#begleitvideos"><span class="header-section-number">2.1.5</span> Begleitvideos</a></li>
  <li><a href="#wozu-ist-statistik-%C3%BCberhaupt-da" id="toc-wozu-ist-statistik-überhaupt-da" class="nav-link" data-scroll-target="#wozu-ist-statistik-%C3%BCberhaupt-da"><span class="header-section-number">2.1.6</span> Wozu ist Statistik überhaupt da?</a></li>
  </ul>
</li>
  <li><a href="#was-ist-inferenz" id="toc-was-ist-inferenz" class="nav-link" data-scroll-target="#was-ist-inferenz"><span class="header-section-number">2.2</span> Was ist Inferenz?</a></li>
  <li>
<a href="#stichprobe-vs.-population" id="toc-stichprobe-vs.-population" class="nav-link" data-scroll-target="#stichprobe-vs.-population"><span class="header-section-number">2.3</span> Stichprobe vs.&nbsp;Population</a>
  <ul>
<li><a href="#deskriptiv--vs.-inferenzstatistik" id="toc-deskriptiv--vs.-inferenzstatistik" class="nav-link" data-scroll-target="#deskriptiv--vs.-inferenzstatistik"><span class="header-section-number">2.3.1</span> Deskriptiv- vs.&nbsp;Inferenzstatistik</a></li>
  <li><a href="#deskriptiv--und-inferenzstatistik-gehen-hand-in-hand" id="toc-deskriptiv--und-inferenzstatistik-gehen-hand-in-hand" class="nav-link" data-scroll-target="#deskriptiv--und-inferenzstatistik-gehen-hand-in-hand"><span class="header-section-number">2.3.2</span> Deskriptiv- und Inferenzstatistik gehen Hand in Hand</a></li>
  <li><a href="#sch%C3%A4tzen-von-parametern-einer-grundgesamtheit" id="toc-schätzen-von-parametern-einer-grundgesamtheit" class="nav-link" data-scroll-target="#sch%C3%A4tzen-von-parametern-einer-grundgesamtheit"><span class="header-section-number">2.3.3</span> Schätzen von Parametern einer Grundgesamtheit</a></li>
  </ul>
</li>
  <li>
<a href="#modellieren" id="toc-modellieren" class="nav-link" data-scroll-target="#modellieren"><span class="header-section-number">2.4</span> Modellieren</a>
  <ul>
<li><a href="#modellieren-als-grundraster-des-erkennens" id="toc-modellieren-als-grundraster-des-erkennens" class="nav-link" data-scroll-target="#modellieren-als-grundraster-des-erkennens"><span class="header-section-number">2.4.1</span> Modellieren als Grundraster des Erkennens</a></li>
  <li><a href="#vertiefung" id="toc-vertiefung" class="nav-link" data-scroll-target="#vertiefung"><span class="header-section-number">2.4.2</span> Vertiefung</a></li>
  </ul>
</li>
  <li>
<a href="#regression" id="toc-regression" class="nav-link" data-scroll-target="#regression"><span class="header-section-number">2.5</span> Regression</a>
  <ul>
<li><a href="#regression-zum-modellieren" id="toc-regression-zum-modellieren" class="nav-link" data-scroll-target="#regression-zum-modellieren"><span class="header-section-number">2.5.1</span> Regression zum Modellieren</a></li>
  <li><a href="#in-voller-pracht" id="toc-in-voller-pracht" class="nav-link" data-scroll-target="#in-voller-pracht"><span class="header-section-number">2.5.2</span> In voller Pracht</a></li>
  </ul>
</li>
  <li>
<a href="#unsicherheit" id="toc-unsicherheit" class="nav-link" data-scroll-target="#unsicherheit"><span class="header-section-number">2.6</span> Unsicherheit</a>
  <ul>
<li><a href="#inferenz-beinhaltet-ungewissheit" id="toc-inferenz-beinhaltet-ungewissheit" class="nav-link" data-scroll-target="#inferenz-beinhaltet-ungewissheit"><span class="header-section-number">2.6.1</span> Inferenz beinhaltet Ungewissheit</a></li>
  <li><a href="#zwei-arten-von-ungewissheit" id="toc-zwei-arten-von-ungewissheit" class="nav-link" data-scroll-target="#zwei-arten-von-ungewissheit"><span class="header-section-number">2.6.2</span> Zwei Arten von Ungewissheit</a></li>
  <li>
<a href="#ungewissheit-der-modellkoeffizienten" id="toc-ungewissheit-der-modellkoeffizienten" class="nav-link" data-scroll-target="#ungewissheit-der-modellkoeffizienten"><span class="header-section-number">2.6.3</span> Ungewissheit der Modellkoeffizienten</a>
  <ul class="collapse">
<li><a href="#ungewissheit-zur-korrektheit-des-modells" id="toc-ungewissheit-zur-korrektheit-des-modells" class="nav-link" data-scroll-target="#ungewissheit-zur-korrektheit-des-modells"><span class="header-section-number">2.6.3.1</span> Ungewissheit zur Korrektheit des Modells</a></li>
  </ul>
</li>
  <li><a href="#ich-wei%C3%9F-was-ich-nicht-wei%C3%9F-ungewissheit-angeben" id="toc-ich-weiß-was-ich-nicht-weiß-ungewissheit-angeben" class="nav-link" data-scroll-target="#ich-wei%C3%9F-was-ich-nicht-wei%C3%9F-ungewissheit-angeben"><span class="header-section-number">2.6.4</span> Ich weiß, was ich nicht weiß: Ungewissheit angeben</a></li>
  <li><a href="#visualisierung-von-ungewissheit" id="toc-visualisierung-von-ungewissheit" class="nav-link" data-scroll-target="#visualisierung-von-ungewissheit"><span class="header-section-number">2.6.5</span> Visualisierung von Ungewissheit</a></li>
  <li><a href="#konfidenzintervall" id="toc-konfidenzintervall" class="nav-link" data-scroll-target="#konfidenzintervall"><span class="header-section-number">2.6.6</span> Konfidenzintervall</a></li>
  <li><a href="#hypothesen-testen" id="toc-hypothesen-testen" class="nav-link" data-scroll-target="#hypothesen-testen"><span class="header-section-number">2.6.7</span> Hypothesen testen</a></li>
  </ul>
</li>
  <li>
<a href="#wahrscheinlichkeit" id="toc-wahrscheinlichkeit" class="nav-link" data-scroll-target="#wahrscheinlichkeit"><span class="header-section-number">2.7</span> Wahrscheinlichkeit</a>
  <ul>
<li><a href="#wahrscheinlichkeit-als-logik-der-forschung" id="toc-wahrscheinlichkeit-als-logik-der-forschung" class="nav-link" data-scroll-target="#wahrscheinlichkeit-als-logik-der-forschung"><span class="header-section-number">2.7.1</span> Wahrscheinlichkeit als Logik der Forschung</a></li>
  <li><a href="#wahrscheinlichkeit-ist-ungewissheit" id="toc-wahrscheinlichkeit-ist-ungewissheit" class="nav-link" data-scroll-target="#wahrscheinlichkeit-ist-ungewissheit"><span class="header-section-number">2.7.2</span> Wahrscheinlichkeit ist Ungewissheit</a></li>
  <li><a href="#ist-der-locurator-im-zustand-alpha" id="toc-ist-der-locurator-im-zustand-alpha" class="nav-link" data-scroll-target="#ist-der-locurator-im-zustand-alpha"><span class="header-section-number">2.7.3</span> Ist der Locurator im Zustand alpha?</a></li>
  <li><a href="#ich-werfe-zahl-beim-n%C3%A4chsten-m%C3%BCnzwurf" id="toc-ich-werfe-zahl-beim-nächsten-münzwurf" class="nav-link" data-scroll-target="#ich-werfe-zahl-beim-n%C3%A4chsten-m%C3%BCnzwurf"><span class="header-section-number">2.7.4</span> Ich werfe Zahl beim nächsten Münzwurf</a></li>
  </ul>
</li>
  <li>
<a href="#frequentistische-inferenz-vs.-bayes-inferenz" id="toc-frequentistische-inferenz-vs.-bayes-inferenz" class="nav-link" data-scroll-target="#frequentistische-inferenz-vs.-bayes-inferenz"><span class="header-section-number">2.8</span> Frequentistische Inferenz vs.&nbsp;Bayes-Inferenz</a>
  <ul>
<li><a href="#bayes-inferenz" id="toc-bayes-inferenz" class="nav-link" data-scroll-target="#bayes-inferenz"><span class="header-section-number">2.8.0.1</span> Bayes-Inferenz</a></li>
  <li>
<a href="#frequentistische-inferenz" id="toc-frequentistische-inferenz" class="nav-link" data-scroll-target="#frequentistische-inferenz"><span class="header-section-number">2.8.1</span> Frequentistische Inferenz</a>
  <ul class="collapse">
<li><a href="#der-p-wert" id="toc-der-p-wert" class="nav-link" data-scroll-target="#der-p-wert"><span class="header-section-number">2.8.1.1</span> Der p-Wert</a></li>
  <li><a href="#konfidenzintervalle" id="toc-konfidenzintervalle" class="nav-link" data-scroll-target="#konfidenzintervalle"><span class="header-section-number">2.8.1.2</span> Konfidenzintervalle</a></li>
  </ul>
</li>
  <li><a href="#statistische-signifikanz" id="toc-statistische-signifikanz" class="nav-link" data-scroll-target="#statistische-signifikanz"><span class="header-section-number">2.8.2</span> Statistische Signifikanz</a></li>
  <li><a href="#praktisch-bedeutsame-signifikanz" id="toc-praktisch-bedeutsame-signifikanz" class="nav-link" data-scroll-target="#praktisch-bedeutsame-signifikanz"><span class="header-section-number">2.8.3</span> Praktisch bedeutsame Signifikanz</a></li>
  </ul>
</li>
  <li>
<a href="#aus-der-forschung-vertiefung" id="toc-aus-der-forschung-vertiefung" class="nav-link" data-scroll-target="#aus-der-forschung-vertiefung"><span class="header-section-number">2.9</span> Aus der Forschung (Vertiefung)</a>
  <ul>
<li><a href="#frequentist-und-bayesianer" id="toc-frequentist-und-bayesianer" class="nav-link" data-scroll-target="#frequentist-und-bayesianer"><span class="header-section-number">2.9.1</span> Frequentist und Bayesianer</a></li>
  <li><a href="#beispiel-zum-nutzen-von-apriori-wissen-1" id="toc-beispiel-zum-nutzen-von-apriori-wissen-1" class="nav-link" data-scroll-target="#beispiel-zum-nutzen-von-apriori-wissen-1"><span class="header-section-number">2.9.2</span> Beispiel zum Nutzen von Apriori-Wissen 1</a></li>
  <li><a href="#beispiel-zum-nutzen-von-apriori-wissen-2" id="toc-beispiel-zum-nutzen-von-apriori-wissen-2" class="nav-link" data-scroll-target="#beispiel-zum-nutzen-von-apriori-wissen-2"><span class="header-section-number">2.9.3</span> Beispiel zum Nutzen von Apriori-Wissen 2</a></li>
  </ul>
</li>
  <li><a href="#fazit" id="toc-fazit" class="nav-link" data-scroll-target="#fazit"><span class="header-section-number">2.10</span> Fazit</a></li>
  <li>
<a href="#aufgaben" id="toc-aufgaben" class="nav-link" data-scroll-target="#aufgaben"><span class="header-section-number">2.11</span> Aufgaben</a>
  <ul>
<li><a href="#paper-pencil-aufgaben" id="toc-paper-pencil-aufgaben" class="nav-link" data-scroll-target="#paper-pencil-aufgaben"><span class="header-section-number">2.11.1</span> Paper-Pencil-Aufgaben</a></li>
  <li><a href="#aufgaben-f%C3%BCr-die-man-einen-computer-braucht" id="toc-aufgaben-für-die-man-einen-computer-braucht" class="nav-link" data-scroll-target="#aufgaben-f%C3%BCr-die-man-einen-computer-braucht"><span class="header-section-number">2.11.2</span> Aufgaben, für die man einen Computer braucht</a></li>
  </ul>
</li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><span class="header-section-number">2.12</span> —</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/sebastiansauer/start-bayes/blob/main/0200-Inferenz.qmd" class="toc-action"><i class="bi bi-github"></i>Quellcode anzeigen</a></li><li><a href="https://github.com/sebastiansauer/start-bayes/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./0200-Inferenz.html">Grundlagen</a></li><li class="breadcrumb-item"><a href="./0200-Inferenz.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Inferenz</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Inferenz</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/Golem_hex.png" class="img-fluid figure-img" style="width:10.0%"></p>
<figcaption>Bayes:Start!</figcaption></figure>
</div>
<section id="lernsteuerung" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="lernsteuerung">
<span class="header-section-number">2.1</span> Lernsteuerung</h2>
<section id="position-im-modulverlauf" class="level3" data-number="2.1.1"><h3 data-number="2.1.1" class="anchored" data-anchor-id="position-im-modulverlauf">
<span class="header-section-number">2.1.1</span> Position im Modulverlauf</h3>
<p><a href="#fig-modulverlauf" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-modulverlauf</span></a> gibt einen Überblick zum aktuellen Standort im Modulverlauf.</p>
</section><section id="lernziele" class="level3" data-number="2.1.2"><h3 data-number="2.1.2" class="anchored" data-anchor-id="lernziele">
<span class="header-section-number">2.1.2</span> Lernziele</h3>
<p>Nach Absolvieren des jeweiligen Kapitels sollen folgende Lernziele erreicht sein.</p>
<p>Sie können …</p>
<ul>
<li>die Definition von Inferenzstatistik sowie Beispiele für inferenzstatistische Fragestellungen nennen</li>
<li>zentrale Begriffe der Inferenzstatistik nennen und in Grundzügen erklären</li>
<li>den Nutzen von Inferenzstatistik nennen</li>
<li>erläutern, in welchem Zusammenhang Ungewissheit zur Inferenzstatistik steht</li>
<li>anhand von Beispielen erklären, was ein statistisches Modell ist</li>
<li>die Grundkonzepte der Regression angeben</li>
<li>Unterschiede zwischen frequentistischer (“klassischer”) und Bayes-Inferenz benennen</li>
<li>Vor- und Nachteile der frequentistischen vs.&nbsp;Bayes-Inferenz diskutieren</li>
<li>Die grundlegende Herangehensweise zur Berechnung des p-Werts informell erklären</li>
</ul></section><section id="begleitliteratur" class="level3" data-number="2.1.3"><h3 data-number="2.1.3" class="anchored" data-anchor-id="begleitliteratur">
<span class="header-section-number">2.1.3</span> Begleitliteratur</h3>
<p>Bei <span class="citation" data-cites="gelman2021">Gelman et al. (<a href="#ref-gelman2021" role="doc-biblioref">2021</a>)</span>, Kap. 1 findet sich eine Darstellung ähnlich zu der in diesem Kapitel.</p>
</section><section id="vorbereitung-im-eigenstudium" class="level3" data-number="2.1.4"><h3 data-number="2.1.4" class="anchored" data-anchor-id="vorbereitung-im-eigenstudium">
<span class="header-section-number">2.1.4</span> Vorbereitung im Eigenstudium</h3>
<ul>
<li><a href="https://statistik1.netlify.app/010-rahmen">Statistik 1, Kap. “Rahmen”</a></li>
<li>
<a href="https://statistik1.netlify.app/">Statistik 1</a>, dort alle Inhalte zum Thema “Modellieren” und “Regression”</li>
<li><a href="">Statistik 1, Kap. zur Normalverteilung</a></li>
</ul></section><section id="begleitvideos" class="level3" data-number="2.1.5"><h3 data-number="2.1.5" class="anchored" data-anchor-id="begleitvideos">
<span class="header-section-number">2.1.5</span> Begleitvideos</h3>
<ul>
<li><a href="https://youtu.be/gcwWwBy0kPI">Video zur Inferenz, Teil 1</a></li>
<li><a href="https://https://youtu.be/QNMVi6IqQ90">Video zur Inferenz, Teil 2</a></li>
</ul></section><section id="wozu-ist-statistik-überhaupt-da" class="level3" data-number="2.1.6"><h3 data-number="2.1.6" class="anchored" data-anchor-id="wozu-ist-statistik-überhaupt-da">
<span class="header-section-number">2.1.6</span> Wozu ist Statistik überhaupt da?</h3>
<p>📺 <a href="https://www.youtube.com/watch?v=gcwWwBy0kPI&amp;list=PLRR4REmBgpIGgz2Oe2Z9FcoLYBDnaWatN&amp;index=2">Ja, wozu ist Statistik eigentlich da?</a></p>
<p>Ja, diese Frage haben Sie sich auch schon mal gestellt? Abb. <a href="#fig-goals" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-goals</span></a> gibt einen Überblick über die Zielarten der statistikbasierten wissenschaftlichen Forschung.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Nach dieser Einteilung lassen sich drei Arten von Zielen unterscheiden: <em>Beschreiben</em>, <em>Vorhersagen</em> und <em>Erklären</em> <span class="citation" data-cites="shmueli2010">(<a href="#ref-shmueli2010" role="doc-biblioref">Shmueli, 2010</a>)</span>.</p>
<p>📄 <em>Beschreiben</em> (deskriptiv)</p>
<ul>
<li>Wie stark ist der (lineare) Zusammenhang <span class="math inline">\(r\)</span> von Größe und Gewicht?</li>
<li>Wie stark ist der (lineare) Zusammenhang <span class="math inline">\(b\)</span> von Lernzeit und Note?</li>
<li>Bevorzugen unsere Kunden Webshop A oder B?</li>
</ul>
<p>🔮 <em>Vorhersagen</em> (prädiktiv, prognostisch)</p>
<ul>
<li>Wie schwer ist ein deutscher Mann der Größe 1,80m im Schnitt?</li>
<li>Welche Note kann man erwarten, wenn man nichts für die Klausur lernt?</li>
<li>Wie viel wird ein Kunde ausgeben, wenn er sich in dieser Variante des Webshops aufhält?</li>
</ul>
<p>🔗 Erklären (kausal)</p>
<ul>
<li>Ist Größe eine Ursache von Gewicht (bei deutschen Männern)?</li>
<li>Wenn ich 100 Stunden lerne, welche Note schreibe ich dann?</li>
<li>Hat die Art des Webshops einen Einfluss auf unseren Umsatz?</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Das Erkenntnisziel wissenschaftlicher Studien ist zumeist erklärend. Anhand der verwendeten statistischen Methode (z.B. Regressionsanalyse) kann man <em>nicht</em> feststellen, zu welchem Erkenntnisziel die Studie gehört.</p>
</div>
</div>
<div id="exm-ziele-stat" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.1 (Beispiele für die Zielarten statistischer Analysen)</strong></span> &nbsp;</p>
<ul>
<li>Beschreiben: “Wie groß ist der Gender-Paygap in der Branche X im Zeitraum Y?”</li>
<li>Vorhersagen: Wenn eine Person, Mr.&nbsp;X, 100 Stunden auf die Statistikklausur lernen, welche Note kann diese Person dann erwarten?</li>
<li>Erklären: Wie viel bringt (mir) das Lernen auf die Statistikklausur?<span class="math inline">\(\square\)</span>
</li>
</ul>
</div>
<p>Für die Wissenschaft ist <em>Erklären</em> das wichtigste Ziel. Bei wenig beackerten Wissenschaftsfeldern ist das <em>Beschreiben</em> ein sinnvoller erster Schritt, der allerdings nicht Stolperfallen ist, wie in <a href="#sec-kausal" class="quarto-xref"><span class="quarto-unresolved-ref">sec-kausal</span></a> erläutert. <em>Vorhersagen</em> ist mehr für die Praxis als für die Wissenschaft relevant.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-goals" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-goals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-goals">flowchart TD 
  A{Goals} --&gt; B(describe)
  A --&gt; C(predict)
  A --&gt; D(explain)
  B --&gt; E(distribution)
  B --&gt; F(assocation)
  B --&gt; G(extrapolation)
  C --&gt; H(point estimate)
  C --&gt; I(interval)
  D --&gt; J(causal inference)
  D --&gt; K(population)
  D --&gt; L(latent construct)

</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-goals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.1: Eine Einteilung der Ziele von statistischen Analysen
</figcaption></figure>
</div>
</div>
</div>
</section></section><section id="was-ist-inferenz" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="was-ist-inferenz">
<span class="header-section-number">2.2</span> Was ist Inferenz?</h2>
<!-- TODO: -->
<!-- Attentio Grabber zum Einstieg -->
<!-- An Vorwissen anknüpfen -->
<!-- -- gilt auch für übrige Kapitel und übrige Bücher -->
<!-- ### Inferenz als Generalisieren -->
<p>📺 <a href="https://www.youtube.com/watch?v=QNMVi6IqQ90&amp;list=PLRR4REmBgpIGgz2Oe2Z9FcoLYBDnaWatN">Was ist Inferenz?</a></p>
<p>Statistische Inferenz hat zum Ziel, vom Teil aufs Ganze zu schließen, bzw. vom Konkreten auf das Abstrakte. <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>Typischerweise untersuchen im Rahmen einer statistischen Analyse eine <em>Stichprobe</em>, wie z.B. Ihr Freundeskreis, der leichtsinnig genug war, auf Ihre WhatsApp-Nachricht “Tolle Studie zu dem Geheimnis des Glücks!!!” zu klicken. Ihr Freundeskreis ist ein <em>Teil</em> der Menschen (z.B. aus Deutschland), also eine Stichprobe. Schauen wir uns den Unterschied zwischen Stichprobe und Population näher an.</p>
</section><section id="stichprobe-vs.-population" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="stichprobe-vs.-population">
<span class="header-section-number">2.3</span> Stichprobe vs.&nbsp;Population</h2>
<p>Nehmen wir an, wir möchten herausfinden, wie groß der Anteil der R-Fans in der Population der Studierenden ist. Den Anteil der F-Fans bezeichnen wir der Einfachheit halber hier mit <code>A</code><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<p>Das <em>Grundproblem der Inferenzstatistik</em> ist, dass wir an Aussagen zur Grundgesamtheit interessiert sind, aber nur eine Stichprobe, also einen Ausschnitt oder eine Teilmenge der Grundgesamtheit (synonym: Population) vorliegen haben.</p>
<p>Wir müssen also den Anteil der R-Fans <em>in der Population</em> auf Basis des Anteils <em>in der Stichprobe</em> schließen: Wir verallgemeinern oder generalisieren von der Stichprobe auf die Grundgesamtheit, s. Abb. <a href="#fig-pop" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-pop</span></a> und <a href="#fig-sample" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-sample</span></a>.</p>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div id="population" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-pop" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-pop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/pvoll.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pop-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.2: Population
</figcaption></figure>
</div>
</div>
<div id="sample" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-sample" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/psti.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.3: Sample
</figcaption></figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p>Population vs.&nbsp;Sample. Autor: Karsten Lübke. OEM</p>
</div>
</div>
</div>
<!-- Quelle: LAYOUT in PDF: https://github.com/quarto-dev/quarto-cli/discussions/7497 -->
<!-- ![Population](img/pvoll.png){#fig-pop width="40%"} -->
<!-- ![Sample](img/psti.png){#fig-sample width="40%"} -->
<!-- Ohne Zwischenzeile funktioniert die REferenz nicht, aber es sähe besesr im PDF-Druck aus. -->
<p>Häufig ist das praktische Vorgehen recht simpel: Ah, in unserer Stichprobe sind 42% R-Fans!<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. Man schreibt gerne: <span class="math inline">\(p = 0.42\)</span> (<code>p</code> wie <code>proportion</code>). Die Stichprobe sei repräsentativ für die Grundgesamtheit aller Studierender. Messerscharf schließen wir: In der Grundgesamtheit ist der Anteil der R-Fans auch 42%, <span class="math inline">\(\pi=0.42\)</span>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wir verwenden lateinische Buchstaben (p), um Kennzahlen einer Stichprobe zu benennen, und griechische (<span class="math inline">\(\pi\)</span>) für Populationen.<span class="math inline">\(\square\)</span></p>
</div>
</div>
<section id="deskriptiv--vs.-inferenzstatistik" class="level3" data-number="2.3.1"><h3 data-number="2.3.1" class="anchored" data-anchor-id="deskriptiv--vs.-inferenzstatistik">
<span class="header-section-number">2.3.1</span> Deskriptiv- vs.&nbsp;Inferenzstatistik</h3>
<p>Statistik gibt es in zwei Geschmacksrichtungen, könnte man sagen: Deskriptiv- und Inferenzstatistik, s. Abb. <a href="#fig-inf1" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-inf1</span></a>.</p>
<p>Vereinfacht gesprochen fasst die Deskriptivstatistik Daten (einer Stichprobe) zu einer einzelnen Kennzahl zusammen.</p>
<div id="exm-desk" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.2</strong></span> In einem Hörsaal sitzen 100 Studis. Alle schreiben Ihre Körpergröße auf einen Zettel. Die Dozentin sammelt die Zettel ein und rechnet dann den Mittelwert der Körpergröße der anwesenden Studentis aus. Voilà: Deskriptive Statistik!<span class="math inline">\(\square\)</span></p>
</div>
<div id="fig-inf1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-inf1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/desk_vs_inf-crop.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.4: Deskriptiv- vs.&nbsp;Inferenzstatistik
</figcaption></figure>
</div>
<div id="exr-smple-pop" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.1</strong></span> 🏋 Schließen Sie die Augen und zeichnen Sie obiges Diagramm, <a href="#fig-inf1" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-inf1</span></a>!<span class="math inline">\(\square\)</span></p>
</div>
<div id="def-desk" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.1 (Deskriptivstatistik)</strong></span> <em>Deskriptivstastistik</em> fasst Stichprobenmerkmale zu Kennzahlen (Statistiken) zusammen.</p>
</div>
<div id="def-inf" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.2 (Inferenzstatistik)</strong></span> <em>Inferenzstatistik</em> ist ein Verfahren zum Schließen von Statistiken (eine Kennzahl einer Stichprobe) auf <em>Parameter</em> (eine Kennzahl einer Grundgesamtheit). Inferenz bedeutet Schließen bzw. Schlussfolgdern: auf Basis von vorliegenden Wissen wird neues Wissen generiert. Inferenzstatistik ist ein Verfahren, das mathematische Modelle (oft aus der Stochastik) verwendet, um ausgehend von einer bestimmten Datenlage, die eine Stichprobe einer Grundgesamtheit darstellt, allgemeine Schlüsse zu ziehen.</p>
</div>
<div id="exr-inf" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.2</strong></span> 🏋️️ Heute Nacht vor dem Schlafen wiederholen Sie die Definition. Üben Sie jetzt schon mal.<span class="math inline">\(\square\)</span></p>
</div>
</section><section id="deskriptiv--und-inferenzstatistik-gehen-hand-in-hand" class="level3" data-number="2.3.2"><h3 data-number="2.3.2" class="anchored" data-anchor-id="deskriptiv--und-inferenzstatistik-gehen-hand-in-hand">
<span class="header-section-number">2.3.2</span> Deskriptiv- und Inferenzstatistik gehen Hand in Hand</h3>
<p>Für jede beliebige Statistik (Kennzahl von Stichprobendaten) kann man die Methoden der Inferenzstatistik verwenden, um den zugehörigen Kennwert (Parameter) der Population zu bestimmen, s. Tabelle <a href="#tbl-kennwerte" class="quarto-xref">Tabelle&nbsp;<span class="quarto-unresolved-ref">tbl-kennwerte</span></a>. Da man die Parameter der Population so gut wie nie sicher kennt (schließlich hat man meist nur Auszüge, Teile der Population, also Stichproben), muss man sich mit <em>Schätzwerten</em> begnügen.</p>
<div class="cell" data-layout-align="center">
<div id="tbl-kennwerte" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-layout-align="center">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-kennwerte-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;2.1: Bezeichnungen für Kennwerte
</figcaption><div aria-describedby="tbl-kennwerte-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">Kennwert</th>
<th style="text-align: left;">Stichprobe</th>
<th style="text-align: left;">Grundgesamtheit (Aussprache)</th>
<th style="text-align: left;">Schätzwert</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mittelwert</td>
<td style="text-align: left;"><span class="math inline">\(\bar{X}\)</span></td>
<td style="text-align: left;">
<span class="math inline">\(\mu\)</span> (mü)</td>
<td style="text-align: left;"><span class="math inline">\(\hat{\mu}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Streuung</td>
<td style="text-align: left;"><span class="math inline">\(sd\)</span></td>
<td style="text-align: left;">
<span class="math inline">\(\sigma\)</span> (sigma)</td>
<td style="text-align: left;"><span class="math inline">\(\hat{\sigma}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Anteil</td>
<td style="text-align: left;"><span class="math inline">\(p\)</span></td>
<td style="text-align: left;">
<span class="math inline">\(\pi\)</span> (pi)</td>
<td style="text-align: left;"><span class="math inline">\(\hat{\pi}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Korrelation</td>
<td style="text-align: left;"><span class="math inline">\(r\)</span></td>
<td style="text-align: left;">
<span class="math inline">\(\rho\)</span> (rho)</td>
<td style="text-align: left;"><span class="math inline">\(\hat{\rho}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Regression</td>
<td style="text-align: left;"><span class="math inline">\(b\)</span></td>
<td style="text-align: left;">
<span class="math inline">\(\beta\)</span> (beta)</td>
<td style="text-align: left;"><span class="math inline">\(\hat{\beta}\)</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Für Statistiken (Daten einer Stichprobe) verwendet man <em>lateinische</em> Buchstaben; für Parameter (Population) verwendet man <em>griechische</em> Buchstaben.</p>
<div id="exr-greek" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.3</strong></span> 🏋️ Geben Sie die griechischen Buchstaben für typische Statistiken an. Ohne auf die Tabelle zu schauen.😜<span class="math inline">\(\square\)</span>!</p>
</div>
</section><section id="schätzen-von-parametern-einer-grundgesamtheit" class="level3" data-number="2.3.3"><h3 data-number="2.3.3" class="anchored" data-anchor-id="schätzen-von-parametern-einer-grundgesamtheit">
<span class="header-section-number">2.3.3</span> Schätzen von Parametern einer Grundgesamtheit</h3>
<p>Meist begnügt man sich beim Analysieren von Daten nicht mit Aussagen für eine Stichprobe, sondern will auf eine Grundgesamtheit verallgemeinern.</p>
<p>Leider sind die Parameter einer Grundgesamtheit zumeist unbekannt, daher muss man sich mit <em>Schätzungen</em> begnügen. Schätzwerte werden mit einem “Dach” über dem Kennwert gekennzeichnet, s. letzte Spalte in <a href="#tbl-kennwerte" class="quarto-xref">Tabelle&nbsp;<span class="quarto-unresolved-ref">tbl-kennwerte</span></a>.</p>
<p>In der angewandten Forschung interessieren häufig Fragen wie: “Welche Entscheidung ist (wahrscheinlich) besser?”. Da bekanntlich (fast) keine Aussagen sicher sind, spielt <em>Wahrscheinlichkeit</em> eine wichtige Rolle in den Forschungsfragen bzw. in deren Antworten.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wahrscheinlichkeit wird oft mit <em>Pr</em> oder <em>p</em> abgekürzt, für engl. <em>probability</em>.<span class="math inline">\(\square\)</span></p>
</div>
</div>
<div id="exm-inf" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.3</strong></span> Sie testen zwei Varianten Ihres Webshops (V1 und V2), die sich im Farbschema unterscheiden und ansonsten identisch sind: Hat das Farbschema einen Einfluss auf den Umsatz?</p>
<p>Dazu vergleichen Sie den mittleren Umsatz pro Tag von V1 vs.&nbsp;V2, <span class="math inline">\(\bar{X}_{V1}\)</span> und <span class="math inline">\(\bar{X}_{V2}\)</span>. Die Mittelwerte unterscheiden sich etwas, <span class="math inline">\(\bar{X}_{V1} &gt; \bar{X}_{V2}\)</span>. Sind diese Unterschiede “zufällig” oder “substanziell”? Gilt also <span class="math inline">\(\mu_{V1} &gt; \mu_{V2}\)</span> oder gilt <span class="math inline">\(\mu_{V1} \le \mu_{V2}\)</span>? Wie groß ist die Wahrscheinlichkeit <span class="math inline">\(Pr(\mu_{V1} &gt; \mu_{V2})\)</span>?</p>
</div>
<div id="exr-pred-maint" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.4</strong></span> 🏋️ VERTIEFUNG <em>Predictive Maintenance</em> ist ein Anwendungsfeld inferenzstatistischer Modellierung. Lesen Sie dazu S. 3 <a href="https://www.rolandberger.com/publications/publication_pdf/roland_berger_vdma_predictive_maintenance_d_1.pdf">dieses Berichts</a>!<span class="math inline">\(\square\)</span></p>
</div>
</section></section><section id="modellieren" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="modellieren">
<span class="header-section-number">2.4</span> Modellieren</h2>
<section id="modellieren-als-grundraster-des-erkennens" class="level3" data-number="2.4.1"><h3 data-number="2.4.1" class="anchored" data-anchor-id="modellieren-als-grundraster-des-erkennens">
<span class="header-section-number">2.4.1</span> Modellieren als Grundraster des Erkennens</h3>
<p>In In der Wissenschaft – wie auch oft in der Technik, Wirtschaft oder im Alltag – betrachtet man einen Teil der Welt näher, meist mit dem Ziel, eine Entscheidung zu treffen, was man tun wird oder mit dem Ziel, etwas zu lernen. Nun ist die Welt ein weites Feld. Jedes Detail zu berücksichtigen ist nicht möglich. Wir müssen die Sache vereinfachen: Alle Informationen ausblenden, die nicht zwingend nötig sind. Aber gleichzeitig die Strukturelemente der wirklichen Welt, die für unsere Fragestellung zentral ist, beibehalten.</p>
<p>Dieses Tun nennt man <em>Modellieren</em>: Man erstellt sich ein Modell.</p>
<div id="def-model" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.3 (Modell)</strong></span> Ein Modell ist ein vereinfachtes Abbild der Wirklichkeit.<span class="math inline">\(\square\)</span></p>
</div>
<p>Der Nutzen eines Modells ist, einen (übermäßig) komplexen Sachverhalt zu vereinfachen oder überhaupt erst handhabbar zu machen. Man versucht zu vereinfachen, ohne Wesentliches wegzulassen. Der Speck muss weg, sozusagen. Das Wesentliche bleibt.</p>
<p>Auf die Statistik bezogen heißt das, dass man einen Datensatz dabei so zusammenfasst, damit man das Wesentliche erkennt.</p>
<p>Was ist das “Wesentliche”? Oft interessiert man sich für die Ursachen eines Phänomens. Etwa: “Wie kommt es bloß, dass ich ohne zu lernen die Klausur so gut bestanden habe?”<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> Noch allgemeiner ist man dabei häufig am Zusammenhang von <code>X</code> und <code>Y</code> interessiert, s. <a href="#fig-xy" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-xy</span></a>, die ein Sinnbild von statistischen Modellen widergibt.</p>
<p>Was ist das “Wesentliche”? Oft interessiert man sich für die Ursachen eines Phänomens. Etwa: “Wie kommt es bloß, dass ich ohne zu lernen die Klausur so gut bestanden habe?”<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> Noch allgemeiner ist man dabei häufig am Zusammenhang von <code>X</code> und <code>Y</code> interessiert, s. <a href="#fig-xy" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-xy</span></a>, die ein Sinnbild von statistischen Modellen widergibt.</p>
<div id="fig-xy" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-xy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"></figure><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
X --&gt; Y


X1 --&gt; Y2
X2 --&gt; Y2
</pre>
</div>
<p></p>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-xy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.5: oben: Sinnbild eines statistischen Modells; unten: Sinnbild eines statistischen Modells, mit zwei Inputvariablen (Ursachen)
</figcaption></figure>
</div>
<p>Man kann <a href="#fig-xy" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-xy</span></a> als ein Sinnbild einer (mathematischen) Funktion lesen.</p>
<div id="def-fun" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.4 (Funktion)</strong></span> Eine Funktion <span class="math inline">\(f\)</span> setzt zwei Größen in Beziehung. <span class="math inline">\(\square\)</span></p>
</div>
<p>In Mathe-Sprech: <span class="math inline">\(f: X \rightarrow Y\)</span></p>
<p>oder: <span class="math inline">\(y = f(x)\)</span>, lies: “Y ist eine Funktion von X”.</p>
<p>Es hört sich zugespitzt an, aber eigentlich ist fast alles, was man tut, Modellieren: Wenn man den Anteil der R-Fans in einer Gruppe Studierender ausrechnet, macht man sich ein Modell: man vereinfacht diesen Ausschnitt der Wirklichkeit anhand einer statistischen Kennzahl, die das forschungsleitende Interesse zusammenfasst.</p>
<p>Die Statistik kann man verstehen als ein Verfahren, dass wissenschaftliche Modelle in statistische übersetzt und letztere dann einer empirischen Analyse unterzieht.</p>
<p>Alle statistischen Ergebnisse beruhen auf Modelle und sind nur insoweit gültig, wie das zugrundeliegende Modell gültig ist.</p>
</section><section id="vertiefung" class="level3" data-number="2.4.2"><h3 data-number="2.4.2" class="anchored" data-anchor-id="vertiefung">
<span class="header-section-number">2.4.2</span> Vertiefung</h3>
<p>Lesen Sie die Einführung zum Thema Modellieren bei <span class="citation" data-cites="poldrack2022">Poldrack (<a href="#ref-poldrack2022" role="doc-biblioref">2022</a>)</span> (Kap. 5.1).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nutzen Sie die Übersetzungsfunktion Ihres Browsers, wenn Sie einen englischen Text lieber auf Deutsch lesen wollen. Oder einen deutschen lieber auf Englisch.</p>
</div>
</div>
</section></section><section id="regression" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="regression">
<span class="header-section-number">2.5</span> Regression</h2>
<p>Einflussreiche Leute schwören auf die Regressionsanalyse (<a href="#fig-gandalf" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-gandalf</span></a>).</p>
<div id="fig-gandalf" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-gandalf-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/einring.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gandalf-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.6: One regression
</figcaption></figure>
</div>
<p><a href="#fig-linfun" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-linfun</span></a> zeigt ein interaktives Beispiel einer linearen Funktion. Sie können Punkte per Klick/Touch hinzufügen.</p>
<details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb1-0"><a href="#cb1-0" aria-hidden="true" tabindex="-1"></a>resetButton <span class="op">=</span> {</span>
<span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> resetButton <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Reset"</span>)<span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(resetButton)<span class="op">.</span><span class="fu">on</span>(<span class="st">"input"</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    regressionPlot<span class="op">.</span><span class="fu">reset</span>()<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> resetButton<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb2-0"><a href="#cb2-0" aria-hidden="true" tabindex="-1"></a>viewOptions <span class="op">=</span> {</span>
<span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> viewOptions <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"None"</span><span class="op">,</span> <span class="st">"Absolute Error"</span><span class="op">,</span> <span class="st">"Squared Error"</span>]<span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">label</span><span class="op">:</span> <span class="st">"View"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"Absolute Error"</span> }</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(viewOptions)<span class="op">.</span><span class="fu">on</span>(<span class="st">"input"</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    regressionPlot<span class="op">.</span><span class="fu">updateView</span>(viewOptions<span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> viewOptions<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb3" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb3-0"><a href="#cb3-0" aria-hidden="true" tabindex="-1"></a>rSquaredPlot <span class="op">=</span> <span class="fu">RSquaredPlot</span>({ <span class="dt">width</span><span class="op">:</span> width })</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb4" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb4-0"><a href="#cb4-0" aria-hidden="true" tabindex="-1"></a>regressionPlot <span class="op">=</span> {</span>
<span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> regressionPlot <span class="op">=</span> <span class="fu">RegressionPlot</span>(data<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">,</span> {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> width<span class="op">,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xDomain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">,</span> ([x]) <span class="kw">=&gt;</span> x) <span class="op">+</span> <span class="dv">5</span>]<span class="op">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yDomain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">,</span> ([_<span class="op">,</span> y]) <span class="kw">=&gt;</span> y) <span class="op">+</span> <span class="dv">5</span>]<span class="op">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">r</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">showGrid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Attach listener</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(regressionPlot)<span class="op">.</span><span class="fu">on</span>(<span class="st">"input"</span><span class="op">,</span> <span class="kw">function</span> () {</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    rSquaredPlot<span class="op">.</span><span class="fu">update</span>(<span class="kw">this</span><span class="op">.</span><span class="at">value</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">transition</span>)<span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  rSquaredPlot<span class="op">.</span><span class="fu">update</span>(regressionPlot<span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> regressionPlot<span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb5" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="dv">800</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> numPoints <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xScale <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xShift <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yScale <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yShift <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> d3<span class="op">.</span><span class="fu">range</span>(numPoints)<span class="op">.</span><span class="fu">map</span>((i) <span class="kw">=&gt;</span> {</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> xCoord <span class="op">=</span> xShift <span class="op">+</span> xScale <span class="op">*</span> d3<span class="op">.</span><span class="fu">randomUniform</span>()()<span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yCoord <span class="op">=</span> yShift <span class="op">+</span> xCoord <span class="op">+</span> yScale <span class="op">*</span> d3<span class="op">.</span><span class="fu">randomUniform</span>()()<span class="op">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [xCoord<span class="op">,</span> yCoord]<span class="op">;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb6" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb6-0"><a href="#cb6-0" aria-hidden="true" tabindex="-1"></a>animation <span class="op">=</span> {</span>
<span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Perform opening animation</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> totalTime <span class="op">=</span> <span class="dv">6_000</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> ease <span class="op">=</span> d3<span class="op">.</span><span class="at">easeQuadOut</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">1</span><span class="op">,</span> data<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">forEach</span>((i) <span class="kw">=&gt;</span> {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> [xCoord<span class="op">,</span> yCoord] <span class="op">=</span> data[i]<span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>      regressionPlot<span class="op">.</span><span class="fu">updateDatapoint</span>(xCoord<span class="op">,</span> yCoord)<span class="op">;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> totalTime <span class="op">*</span> <span class="fu">ease</span>(i <span class="op">/</span> data<span class="op">.</span><span class="at">length</span>))<span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb7" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb7-0"><a href="#cb7-0" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">RSquaredPlot</span>({</span>
<span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>  data<span class="op">,</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  marginTop <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> <span class="co">// top margin, in pixels</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  marginRight <span class="op">=</span> <span class="dv">30</span><span class="op">,</span> <span class="co">// right margin, in pixels</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  marginBottom <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> <span class="co">// bottom margin, in pixels</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  marginLeft <span class="op">=</span> <span class="dv">53</span><span class="op">,</span> <span class="co">// left margin, in pixels</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  width <span class="op">=</span> <span class="dv">640</span><span class="op">,</span> <span class="co">// outer width, in pixels</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  height <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> <span class="co">// outer height, in pixels</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  barHeight <span class="op">=</span> <span class="dv">25</span><span class="op">,</span> <span class="co">// height of bar, in pixels</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  titleSize <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> <span class="co">// fontsize of title text</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  labelSize <span class="op">=</span> <span class="dv">12</span> <span class="co">// fontsize of label text</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (data <span class="op">===</span> <span class="kw">undefined</span>) data <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xScale <span class="op">=</span> d3</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>])</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>([marginLeft<span class="op">,</span> width <span class="op">-</span> marginRight])<span class="op">;</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height])</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"style"</span><span class="op">,</span> <span class="st">"max-width: 100%; height: auto; height: intrinsic;"</span>)<span class="op">;</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw title.</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> titleGroup <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">// titleGroup</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .append("line")</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("stroke", "black")</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("x1", xScale(0))</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("x2", xScale(0))</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("y1", 0)</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("y2", height);</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  titleGroup</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"end"</span>)</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dominant-baseline"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"serif"</span>)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> titleSize)</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="fu">xScale</span>(<span class="dv">0</span>))</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dx"</span><span class="op">,</span> <span class="op">-</span><span class="dv">10</span>)</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> height <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">text</span>(<span class="st">"R²"</span>)<span class="op">;</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw whole bar.</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  svg</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"gainsboro"</span>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="fu">xScale</span>(<span class="dv">0</span>))</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> marginTop)</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width <span class="op">-</span> marginLeft <span class="op">-</span> marginRight)</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height <span class="op">-</span> marginTop <span class="op">-</span> marginBottom)<span class="op">;</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw bar.</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> bar <span class="op">=</span> <span class="fu">updateBar</span>(svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"rect"</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw label</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> labelFormat <span class="op">=</span> d3<span class="op">.</span><span class="fu">format</span>(<span class="st">".2f"</span>)<span class="op">;</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> label <span class="op">=</span> <span class="fu">updateLabel</span>(svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"text"</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Update according to data.</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update</span>(data)<span class="op">;</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateBar</span>(rect<span class="op">,</span> data<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> rect<span class="op">.</span><span class="fu">data</span>([data])<span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>      (enter) <span class="kw">=&gt;</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>        enter</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="fu">xScale</span>(<span class="dv">0</span>))</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> marginTop)</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height <span class="op">-</span> marginTop <span class="op">-</span> marginBottom)<span class="op">,</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>      (update) <span class="kw">=&gt;</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>        update<span class="op">.</span><span class="fu">call</span>((update) <span class="kw">=&gt;</span> {</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (transition) update <span class="op">=</span> update<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>          update<span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(<span class="pp">isNaN</span>(d) <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> d) <span class="op">-</span> <span class="fu">xScale</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateLabel</span>(text<span class="op">,</span> data<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> text<span class="op">.</span><span class="fu">data</span>([data])<span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>      (enter) <span class="kw">=&gt;</span></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>        enter</span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dominant-baseline"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"sans-serif"</span>)</span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> labelSize)</span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"start"</span>)</span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dx"</span><span class="op">,</span> <span class="dv">10</span>)</span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="fu">xScale</span>(<span class="dv">0</span>))</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> height <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="fu">labelFormat</span>(<span class="st">"0"</span>))<span class="op">,</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>      (update) <span class="kw">=&gt;</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>        update<span class="op">.</span><span class="fu">call</span>((update) <span class="kw">=&gt;</span> {</span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a>          <span class="co">// Check if bar is too short</span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> check <span class="op">=</span> (d) <span class="kw">=&gt;</span> d <span class="op">&lt;</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (transition) update <span class="op">=</span> update<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>          update</span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d))</span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">text</span>((d) <span class="kw">=&gt;</span> <span class="fu">labelFormat</span>(d))</span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> (<span class="fu">check</span>(d) <span class="op">?</span> <span class="st">"black"</span> <span class="op">:</span> <span class="st">"white"</span>))</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> (<span class="fu">check</span>(d) <span class="op">?</span> <span class="st">"start"</span> <span class="op">:</span> <span class="st">"end"</span>))</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dx"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> (<span class="fu">check</span>(d) <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="op">-</span><span class="dv">10</span>))<span class="op">;</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Main function for data updates.</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">update</span>(data<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateBar</span>(bar<span class="op">,</span> data<span class="op">,</span> transition)<span class="op">;</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateLabel</span>(label<span class="op">,</span> data<span class="op">,</span> transition)<span class="op">;</span></span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>(svg<span class="op">.</span><span class="fu">node</span>()<span class="op">,</span> { update })<span class="op">;</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb8" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb8-0"><a href="#cb8-0" aria-hidden="true" tabindex="-1"></a><span class="co">// to draw lines at the origin (to show intercept and stuff)</span></span>
<span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">// create voronoi overlay? for dragging points</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">// viz error / squared error</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">// make the error lines look like a weight</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">// show other metrics like R^2 etc.</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">RegressionPlot</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  data<span class="op">,</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> ([x]) <span class="kw">=&gt;</span> x<span class="op">,</span> <span class="co">// accessor function for x-coordinate</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> ([<span class="op">,</span> y]) <span class="kw">=&gt;</span> y<span class="op">,</span> <span class="co">// accessor function for y-coordinate</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> <span class="dv">6</span><span class="op">,</span> <span class="co">// radius of dots, in pixels</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    marginTop <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> <span class="co">// top margin, in pixels</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    marginRight <span class="op">=</span> <span class="dv">30</span><span class="op">,</span> <span class="co">// right margin, in pixels</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    marginBottom <span class="op">=</span> <span class="dv">30</span><span class="op">,</span> <span class="co">// bottom margin, in pixels</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    marginLeft <span class="op">=</span> <span class="dv">40</span><span class="op">,</span> <span class="co">// left margin, in pixels</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    inset <span class="op">=</span> r <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="co">// inset the default range, in pixels</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    insetTop <span class="op">=</span> inset<span class="op">,</span> <span class="co">// inset the default y-range</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    insetRight <span class="op">=</span> inset<span class="op">,</span> <span class="co">// inset the default x-range</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    insetBottom <span class="op">=</span> inset<span class="op">,</span> <span class="co">// inset the default y-range</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    insetLeft <span class="op">=</span> inset<span class="op">,</span> <span class="co">// inset the default x-range</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    width <span class="op">=</span> <span class="dv">640</span><span class="op">,</span> <span class="co">// outer width, in pixels</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    height <span class="op">=</span> <span class="dv">500</span><span class="op">,</span> <span class="co">// outer height, in pixels</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    xType <span class="op">=</span> d3<span class="op">.</span><span class="at">scaleLinear</span><span class="op">,</span> <span class="co">// type of x-scale</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    xDomain<span class="op">,</span> <span class="co">// [xmin, xmax]</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    xRange <span class="op">=</span> [marginLeft <span class="op">+</span> insetLeft<span class="op">,</span> width <span class="op">-</span> marginRight <span class="op">-</span> insetRight]<span class="op">,</span> <span class="co">// [left, right]</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    yType <span class="op">=</span> d3<span class="op">.</span><span class="at">scaleLinear</span><span class="op">,</span> <span class="co">// type of y-scale</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    yDomain<span class="op">,</span> <span class="co">// [ymin, ymax]</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    yRange <span class="op">=</span> [height <span class="op">-</span> marginBottom <span class="op">-</span> insetBottom<span class="op">,</span> marginTop <span class="op">+</span> insetTop]<span class="op">,</span> <span class="co">// [bottom, top]</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    showGrid <span class="op">=</span> <span class="kw">true</span> <span class="co">// whether to show grid lines</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> {}</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> errorColor <span class="op">=</span> d3<span class="op">.</span><span class="at">schemeSet3</span>[<span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> errorLinesOpacity <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> errorSquaresOpacity <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Init drag object.</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> drag <span class="op">=</span> d3</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">// .on("start", dragstarted)</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> dragged)<span class="op">;</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">// .on("end", dragended);</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">// To give each data point a unique id</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> idCounter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Compute data values.</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  data <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> ({</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xCoord</span><span class="op">:</span> <span class="fu">x</span>(d)<span class="op">,</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yCoord</span><span class="op">:</span> <span class="fu">y</span>(d)<span class="op">,</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">id</span><span class="op">:</span> idCounter<span class="op">++</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>  }))<span class="op">;</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Store copy of initial data object</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> initData <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> ({ <span class="op">...</span>d }))<span class="op">;</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Compute default domains.</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>  <span class="co">// if (xDomain === undefined) xDomain = d3.extent(data, (d) =&gt; d.xCoord);</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (xDomain <span class="op">===</span> <span class="kw">undefined</span>) xDomain <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">xCoord</span>)]<span class="op">;</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (yDomain <span class="op">===</span> <span class="kw">undefined</span>) yDomain <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">yCoord</span>)]<span class="op">;</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Init linear regressor.</span></span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> linearRegression <span class="op">=</span> d3</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">regressionLinear</span>()</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">x</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">xCoord</span>)</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">y</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">yCoord</span>)</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>(xDomain)<span class="op">;</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Construct scales and axes.</span></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xScale <span class="op">=</span> <span class="fu">xType</span>(xDomain<span class="op">,</span> xRange)<span class="op">;</span></span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yScale <span class="op">=</span> <span class="fu">yType</span>(yDomain<span class="op">,</span> yRange)<span class="op">;</span></span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xAxis <span class="op">=</span> d3<span class="op">.</span><span class="fu">axisBottom</span>(xScale)<span class="op">.</span><span class="fu">ticks</span>(width <span class="op">/</span> <span class="dv">80</span>)<span class="op">;</span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yAxis <span class="op">=</span> d3<span class="op">.</span><span class="fu">axisLeft</span>(yScale)<span class="op">.</span><span class="fu">ticks</span>(height <span class="op">/</span> <span class="dv">80</span>)<span class="op">;</span></span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw svg.</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height)</span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height])</span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"style"</span><span class="op">,</span> <span class="st">"max-width: 100%; height: auto; height: intrinsic;"</span>)<span class="op">;</span></span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw xAxis.</span></span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> axisOpacity <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb8-84"><a href="#cb8-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xGroup <span class="op">=</span> svg</span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(0,</span><span class="sc">${</span>height <span class="op">-</span> marginBottom<span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> axisOpacity)</span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(xAxis)</span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>((g) <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">select</span>(<span class="st">".domain"</span>)<span class="op">.</span><span class="fu">remove</span>())<span class="op">;</span></span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw grid lines</span></span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a>  xGroup</span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".tick line"</span>)</span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">clone</span>()</span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> marginTop <span class="op">+</span> marginBottom <span class="op">-</span> height)</span>
<span id="cb8-96"><a href="#cb8-96" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Draw line at origin</span></span>
<span id="cb8-97"><a href="#cb8-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-opacity"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb8-98"><a href="#cb8-98" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (d <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb8-99"><a href="#cb8-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> axisOpacity<span class="op">;</span></span>
<span id="cb8-100"><a href="#cb8-100" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb8-101"><a href="#cb8-101" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> showGrid <span class="op">?</span> <span class="fl">0.1</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-102"><a href="#cb8-102" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb8-103"><a href="#cb8-103" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-104"><a href="#cb8-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-105"><a href="#cb8-105" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw yAxis.</span></span>
<span id="cb8-106"><a href="#cb8-106" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yGroup <span class="op">=</span> svg</span>
<span id="cb8-107"><a href="#cb8-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb8-108"><a href="#cb8-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>marginLeft<span class="sc">}</span><span class="vs">,0)`</span>)</span>
<span id="cb8-109"><a href="#cb8-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> axisOpacity)</span>
<span id="cb8-110"><a href="#cb8-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(yAxis)</span>
<span id="cb8-111"><a href="#cb8-111" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>((g) <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">select</span>(<span class="st">".domain"</span>)<span class="op">.</span><span class="fu">remove</span>())<span class="op">;</span></span>
<span id="cb8-112"><a href="#cb8-112" aria-hidden="true" tabindex="-1"></a>  yGroup</span>
<span id="cb8-113"><a href="#cb8-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".tick line"</span>)</span>
<span id="cb8-114"><a href="#cb8-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">clone</span>()</span>
<span id="cb8-115"><a href="#cb8-115" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> width <span class="op">-</span> marginLeft <span class="op">-</span> marginRight)</span>
<span id="cb8-116"><a href="#cb8-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Draw line at origin</span></span>
<span id="cb8-117"><a href="#cb8-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-opacity"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb8-118"><a href="#cb8-118" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (d <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb8-119"><a href="#cb8-119" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> axisOpacity<span class="op">;</span></span>
<span id="cb8-120"><a href="#cb8-120" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb8-121"><a href="#cb8-121" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> showGrid <span class="op">?</span> <span class="fl">0.1</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-122"><a href="#cb8-122" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb8-123"><a href="#cb8-123" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-124"><a href="#cb8-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-125"><a href="#cb8-125" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw error squares.</span></span>
<span id="cb8-126"><a href="#cb8-126" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> errorSquares <span class="op">=</span> <span class="fu">updateErrorSquares</span>(</span>
<span id="cb8-127"><a href="#cb8-127" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"rect"</span>)<span class="op">,</span></span>
<span id="cb8-128"><a href="#cb8-128" aria-hidden="true" tabindex="-1"></a>    data</span>
<span id="cb8-129"><a href="#cb8-129" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-130"><a href="#cb8-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-131"><a href="#cb8-131" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw error lines.</span></span>
<span id="cb8-132"><a href="#cb8-132" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> errorLines <span class="op">=</span> <span class="fu">updateErrorLines</span>(svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)<span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb8-133"><a href="#cb8-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-134"><a href="#cb8-134" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw regression line.</span></span>
<span id="cb8-135"><a href="#cb8-135" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> regressionLineGroup <span class="op">=</span> svg</span>
<span id="cb8-136"><a href="#cb8-136" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb8-137"><a href="#cb8-137" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)</span>
<span id="cb8-138"><a href="#cb8-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb8-139"><a href="#cb8-139" aria-hidden="true" tabindex="-1"></a>  <span class="co">// .attr("stroke-dasharray", "20,20");</span></span>
<span id="cb8-140"><a href="#cb8-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-141"><a href="#cb8-141" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> regressionLine <span class="op">=</span> <span class="fu">updateRegressionLine</span>(</span>
<span id="cb8-142"><a href="#cb8-142" aria-hidden="true" tabindex="-1"></a>    regressionLineGroup<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"line"</span>)<span class="op">,</span></span>
<span id="cb8-143"><a href="#cb8-143" aria-hidden="true" tabindex="-1"></a>    data</span>
<span id="cb8-144"><a href="#cb8-144" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb8-145"><a href="#cb8-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-146"><a href="#cb8-146" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw space for plot interactions.</span></span>
<span id="cb8-147"><a href="#cb8-147" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> plotRect <span class="op">=</span> svg</span>
<span id="cb8-148"><a href="#cb8-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb8-149"><a href="#cb8-149" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb8-150"><a href="#cb8-150" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height)</span>
<span id="cb8-151"><a href="#cb8-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb8-152"><a href="#cb8-152" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> addDatapoint)<span class="op">;</span></span>
<span id="cb8-153"><a href="#cb8-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-154"><a href="#cb8-154" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw data points.</span></span>
<span id="cb8-155"><a href="#cb8-155" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> circlesGroup <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)<span class="op">;</span></span>
<span id="cb8-156"><a href="#cb8-156" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> circles <span class="op">=</span> <span class="fu">updateCircles</span>(circlesGroup<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"circle"</span>)<span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb8-157"><a href="#cb8-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-158"><a href="#cb8-158" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Drag interactions for circles.</span></span>
<span id="cb8-159"><a href="#cb8-159" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragstarted</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb8-160"><a href="#cb8-160" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">raise</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)<span class="op">;</span></span>
<span id="cb8-161"><a href="#cb8-161" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-162"><a href="#cb8-162" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragged</span>(<span class="bu">event</span><span class="op">,</span> d) {</span>
<span id="cb8-163"><a href="#cb8-163" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)</span>
<span id="cb8-164"><a href="#cb8-164" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Update data point, as well as its position on the plot</span></span>
<span id="cb8-165"><a href="#cb8-165" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb8-166"><a href="#cb8-166" aria-hidden="true" tabindex="-1"></a>        d<span class="op">.</span><span class="at">xCoord</span> <span class="op">=</span> xScale<span class="op">.</span><span class="fu">invert</span>(<span class="bu">event</span><span class="op">.</span><span class="at">x</span>)<span class="op">;</span></span>
<span id="cb8-167"><a href="#cb8-167" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">event</span><span class="op">.</span><span class="at">x</span><span class="op">;</span></span>
<span id="cb8-168"><a href="#cb8-168" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb8-169"><a href="#cb8-169" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb8-170"><a href="#cb8-170" aria-hidden="true" tabindex="-1"></a>        d<span class="op">.</span><span class="at">yCoord</span> <span class="op">=</span> yScale<span class="op">.</span><span class="fu">invert</span>(<span class="bu">event</span><span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb8-171"><a href="#cb8-171" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">event</span><span class="op">.</span><span class="at">y</span><span class="op">;</span></span>
<span id="cb8-172"><a href="#cb8-172" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb8-173"><a href="#cb8-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-174"><a href="#cb8-174" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateRegressionLine</span>(regressionLine<span class="op">,</span> data<span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb8-175"><a href="#cb8-175" aria-hidden="true" tabindex="-1"></a>    errorSquares <span class="op">=</span> <span class="fu">updateErrorSquares</span>(errorSquares<span class="op">,</span> data<span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb8-176"><a href="#cb8-176" aria-hidden="true" tabindex="-1"></a>    errorLines <span class="op">=</span> <span class="fu">updateErrorLines</span>(errorLines<span class="op">,</span> data<span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb8-177"><a href="#cb8-177" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-178"><a href="#cb8-178" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragended</span>(<span class="bu">event</span><span class="op">,</span> i) {</span>
<span id="cb8-179"><a href="#cb8-179" aria-hidden="true" tabindex="-1"></a>    d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb8-180"><a href="#cb8-180" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-181"><a href="#cb8-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-182"><a href="#cb8-182" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Click interaction for circles.</span></span>
<span id="cb8-183"><a href="#cb8-183" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">removeDatapoint</span>(<span class="bu">event</span><span class="op">,</span> dCurr) {</span>
<span id="cb8-184"><a href="#cb8-184" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">event</span><span class="op">.</span><span class="at">defaultPrevented</span>) <span class="cf">return</span><span class="op">;</span> <span class="co">// dragged</span></span>
<span id="cb8-185"><a href="#cb8-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-186"><a href="#cb8-186" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Remove data point; faster way to do this?</span></span>
<span id="cb8-187"><a href="#cb8-187" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">id</span> <span class="op">!==</span> dCurr<span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb8-188"><a href="#cb8-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-189"><a href="#cb8-189" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update</span>(data)<span class="op">;</span></span>
<span id="cb8-190"><a href="#cb8-190" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-191"><a href="#cb8-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-192"><a href="#cb8-192" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Click interaction for plot.</span></span>
<span id="cb8-193"><a href="#cb8-193" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">addDatapoint</span>(<span class="bu">event</span>) {</span>
<span id="cb8-194"><a href="#cb8-194" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> [xm<span class="op">,</span> ym] <span class="op">=</span> d3<span class="op">.</span><span class="fu">pointer</span>(<span class="bu">event</span>)<span class="op">;</span></span>
<span id="cb8-195"><a href="#cb8-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-196"><a href="#cb8-196" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateDatapoint</span>(xScale<span class="op">.</span><span class="fu">invert</span>(xm)<span class="op">,</span> yScale<span class="op">.</span><span class="fu">invert</span>(ym))<span class="op">;</span></span>
<span id="cb8-197"><a href="#cb8-197" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-198"><a href="#cb8-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-199"><a href="#cb8-199" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Helper function for regression line update.</span></span>
<span id="cb8-200"><a href="#cb8-200" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateRegressionLine</span>(line<span class="op">,</span> data<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb8-201"><a href="#cb8-201" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> regressionData <span class="op">=</span> <span class="fu">linearRegression</span>(data)<span class="op">;</span></span>
<span id="cb8-202"><a href="#cb8-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-203"><a href="#cb8-203" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dispatch event and R^2 value</span></span>
<span id="cb8-204"><a href="#cb8-204" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">node</span>()<span class="op">.</span><span class="at">value</span> <span class="op">=</span> regressionData<span class="op">.</span><span class="at">rSquared</span><span class="op">;</span></span>
<span id="cb8-205"><a href="#cb8-205" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">node</span>()<span class="op">.</span><span class="at">transition</span> <span class="op">=</span> transition<span class="op">;</span></span>
<span id="cb8-206"><a href="#cb8-206" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">dispatch</span>(<span class="st">"input"</span><span class="op">,</span> { <span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb8-207"><a href="#cb8-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-208"><a href="#cb8-208" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> line</span>
<span id="cb8-209"><a href="#cb8-209" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>([regressionData])</span>
<span id="cb8-210"><a href="#cb8-210" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(<span class="st">"line"</span>)</span>
<span id="cb8-211"><a href="#cb8-211" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">call</span>((line) <span class="kw">=&gt;</span> {</span>
<span id="cb8-212"><a href="#cb8-212" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (transition) line <span class="op">=</span> line<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb8-213"><a href="#cb8-213" aria-hidden="true" tabindex="-1"></a>        line</span>
<span id="cb8-214"><a href="#cb8-214" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d[<span class="dv">0</span>][<span class="dv">0</span>]))</span>
<span id="cb8-215"><a href="#cb8-215" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d[<span class="dv">1</span>][<span class="dv">0</span>]))</span>
<span id="cb8-216"><a href="#cb8-216" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d[<span class="dv">0</span>][<span class="dv">1</span>]))</span>
<span id="cb8-217"><a href="#cb8-217" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d[<span class="dv">1</span>][<span class="dv">1</span>]))<span class="op">;</span></span>
<span id="cb8-218"><a href="#cb8-218" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb8-219"><a href="#cb8-219" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-220"><a href="#cb8-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-221"><a href="#cb8-221" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Helper function to update circles based on new data.</span></span>
<span id="cb8-222"><a href="#cb8-222" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateCircles</span>(circles<span class="op">,</span> data) {</span>
<span id="cb8-223"><a href="#cb8-223" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> circles</span>
<span id="cb8-224"><a href="#cb8-224" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb8-225"><a href="#cb8-225" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb8-226"><a href="#cb8-226" aria-hidden="true" tabindex="-1"></a>        (enter) <span class="kw">=&gt;</span></span>
<span id="cb8-227"><a href="#cb8-227" aria-hidden="true" tabindex="-1"></a>          enter</span>
<span id="cb8-228"><a href="#cb8-228" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb8-229"><a href="#cb8-229" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-230"><a href="#cb8-230" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-231"><a href="#cb8-231" aria-hidden="true" tabindex="-1"></a>            <span class="co">// To transition from 0 radius</span></span>
<span id="cb8-232"><a href="#cb8-232" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb8-233"><a href="#cb8-233" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Attach interactions</span></span>
<span id="cb8-234"><a href="#cb8-234" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">call</span>(drag)</span>
<span id="cb8-235"><a href="#cb8-235" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> removeDatapoint)</span>
<span id="cb8-236"><a href="#cb8-236" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Add transition</span></span>
<span id="cb8-237"><a href="#cb8-237" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">call</span>((enter) <span class="kw">=&gt;</span></span>
<span id="cb8-238"><a href="#cb8-238" aria-hidden="true" tabindex="-1"></a>              enter</span>
<span id="cb8-239"><a href="#cb8-239" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb8-240"><a href="#cb8-240" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">ease</span>(d3<span class="op">.</span><span class="at">easeBackOut</span><span class="op">.</span><span class="fu">overshoot</span>(<span class="fl">1.7</span>))</span>
<span id="cb8-241"><a href="#cb8-241" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> r)</span>
<span id="cb8-242"><a href="#cb8-242" aria-hidden="true" tabindex="-1"></a>            )<span class="op">,</span></span>
<span id="cb8-243"><a href="#cb8-243" aria-hidden="true" tabindex="-1"></a>        (update) <span class="kw">=&gt;</span></span>
<span id="cb8-244"><a href="#cb8-244" aria-hidden="true" tabindex="-1"></a>          update</span>
<span id="cb8-245"><a href="#cb8-245" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb8-246"><a href="#cb8-246" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-247"><a href="#cb8-247" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))<span class="op">,</span></span>
<span id="cb8-248"><a href="#cb8-248" aria-hidden="true" tabindex="-1"></a>        (exit) <span class="kw">=&gt;</span></span>
<span id="cb8-249"><a href="#cb8-249" aria-hidden="true" tabindex="-1"></a>          exit</span>
<span id="cb8-250"><a href="#cb8-250" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb8-251"><a href="#cb8-251" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">ease</span>(d3<span class="op">.</span><span class="at">easeBackIn</span><span class="op">.</span><span class="fu">overshoot</span>(<span class="fl">1.7</span>))</span>
<span id="cb8-252"><a href="#cb8-252" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb8-253"><a href="#cb8-253" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">remove</span>()</span>
<span id="cb8-254"><a href="#cb8-254" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb8-255"><a href="#cb8-255" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-256"><a href="#cb8-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-257"><a href="#cb8-257" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Helper function to update error lines based on new data.</span></span>
<span id="cb8-258"><a href="#cb8-258" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateErrorLines</span>(lines<span class="op">,</span> data<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb8-259"><a href="#cb8-259" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> regressionData <span class="op">=</span> <span class="fu">linearRegression</span>(data)<span class="op">;</span></span>
<span id="cb8-260"><a href="#cb8-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-261"><a href="#cb8-261" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> lines</span>
<span id="cb8-262"><a href="#cb8-262" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb8-263"><a href="#cb8-263" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb8-264"><a href="#cb8-264" aria-hidden="true" tabindex="-1"></a>        (enter) <span class="kw">=&gt;</span></span>
<span id="cb8-265"><a href="#cb8-265" aria-hidden="true" tabindex="-1"></a>          enter</span>
<span id="cb8-266"><a href="#cb8-266" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb8-267"><a href="#cb8-267" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> errorColor)</span>
<span id="cb8-268"><a href="#cb8-268" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb8-269"><a href="#cb8-269" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> errorLinesOpacity)</span>
<span id="cb8-270"><a href="#cb8-270" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Start at data point</span></span>
<span id="cb8-271"><a href="#cb8-271" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-272"><a href="#cb8-272" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-273"><a href="#cb8-273" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-274"><a href="#cb8-274" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-275"><a href="#cb8-275" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Add transition</span></span>
<span id="cb8-276"><a href="#cb8-276" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">call</span>((enter) <span class="kw">=&gt;</span></span>
<span id="cb8-277"><a href="#cb8-277" aria-hidden="true" tabindex="-1"></a>              enter</span>
<span id="cb8-278"><a href="#cb8-278" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb8-279"><a href="#cb8-279" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(regressionData<span class="op">.</span><span class="fu">predict</span>(d<span class="op">.</span><span class="at">xCoord</span>)))</span>
<span id="cb8-280"><a href="#cb8-280" aria-hidden="true" tabindex="-1"></a>            )<span class="op">,</span></span>
<span id="cb8-281"><a href="#cb8-281" aria-hidden="true" tabindex="-1"></a>        (update) <span class="kw">=&gt;</span></span>
<span id="cb8-282"><a href="#cb8-282" aria-hidden="true" tabindex="-1"></a>          update<span class="op">.</span><span class="fu">call</span>((update) <span class="kw">=&gt;</span> {</span>
<span id="cb8-283"><a href="#cb8-283" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (transition) update <span class="op">=</span> update<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb8-284"><a href="#cb8-284" aria-hidden="true" tabindex="-1"></a>            update</span>
<span id="cb8-285"><a href="#cb8-285" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-286"><a href="#cb8-286" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-287"><a href="#cb8-287" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-288"><a href="#cb8-288" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(regressionData<span class="op">.</span><span class="fu">predict</span>(d<span class="op">.</span><span class="at">xCoord</span>)))<span class="op">;</span></span>
<span id="cb8-289"><a href="#cb8-289" aria-hidden="true" tabindex="-1"></a>          })<span class="op">,</span></span>
<span id="cb8-290"><a href="#cb8-290" aria-hidden="true" tabindex="-1"></a>        (exit) <span class="kw">=&gt;</span></span>
<span id="cb8-291"><a href="#cb8-291" aria-hidden="true" tabindex="-1"></a>          exit</span>
<span id="cb8-292"><a href="#cb8-292" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb8-293"><a href="#cb8-293" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-294"><a href="#cb8-294" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">remove</span>()</span>
<span id="cb8-295"><a href="#cb8-295" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb8-296"><a href="#cb8-296" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-297"><a href="#cb8-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-298"><a href="#cb8-298" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Helper function to update error squares based on new data.</span></span>
<span id="cb8-299"><a href="#cb8-299" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateErrorSquares</span>(rects<span class="op">,</span> data<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb8-300"><a href="#cb8-300" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> regressionData <span class="op">=</span> <span class="fu">linearRegression</span>(data)<span class="op">;</span></span>
<span id="cb8-301"><a href="#cb8-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-302"><a href="#cb8-302" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> computeHeight <span class="op">=</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb8-303"><a href="#cb8-303" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> yCoordPred <span class="op">=</span> regressionData<span class="op">.</span><span class="fu">predict</span>(d<span class="op">.</span><span class="at">xCoord</span>)<span class="op">;</span></span>
<span id="cb8-304"><a href="#cb8-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-305"><a href="#cb8-305" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(<span class="fu">yScale</span>(yCoordPred) <span class="op">-</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))<span class="op">;</span></span>
<span id="cb8-306"><a href="#cb8-306" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb8-307"><a href="#cb8-307" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Compute which direction the box should face</span></span>
<span id="cb8-308"><a href="#cb8-308" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> computeTransform <span class="op">=</span> (d) <span class="kw">=&gt;</span> {</span>
<span id="cb8-309"><a href="#cb8-309" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> yCoordPred <span class="op">=</span> regressionData<span class="op">.</span><span class="fu">predict</span>(d<span class="op">.</span><span class="at">xCoord</span>)<span class="op">;</span></span>
<span id="cb8-310"><a href="#cb8-310" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> check <span class="op">=</span> <span class="fu">yScale</span>(yCoordPred) <span class="op">-</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>) <span class="op">&lt;</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-311"><a href="#cb8-311" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> deg <span class="op">=</span> check <span class="op">?</span> <span class="op">-</span><span class="dv">90</span> <span class="op">:</span> <span class="dv">90</span><span class="op">;</span></span>
<span id="cb8-312"><a href="#cb8-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-313"><a href="#cb8-313" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="vs">`rotate(</span><span class="sc">${</span>deg<span class="sc">}</span><span class="vs">, </span><span class="sc">${</span><span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>)<span class="sc">}</span><span class="vs">, </span><span class="sc">${</span><span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>)<span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb8-314"><a href="#cb8-314" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb8-315"><a href="#cb8-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-316"><a href="#cb8-316" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> rects</span>
<span id="cb8-317"><a href="#cb8-317" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(data<span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb8-318"><a href="#cb8-318" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(</span>
<span id="cb8-319"><a href="#cb8-319" aria-hidden="true" tabindex="-1"></a>        (enter) <span class="kw">=&gt;</span></span>
<span id="cb8-320"><a href="#cb8-320" aria-hidden="true" tabindex="-1"></a>          enter</span>
<span id="cb8-321"><a href="#cb8-321" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb8-322"><a href="#cb8-322" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb8-323"><a href="#cb8-323" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> errorColor)</span>
<span id="cb8-324"><a href="#cb8-324" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> errorSquaresOpacity)</span>
<span id="cb8-325"><a href="#cb8-325" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> computeTransform)</span>
<span id="cb8-326"><a href="#cb8-326" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Start at data point</span></span>
<span id="cb8-327"><a href="#cb8-327" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-328"><a href="#cb8-328" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-329"><a href="#cb8-329" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb8-330"><a href="#cb8-330" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb8-331"><a href="#cb8-331" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Add transition</span></span>
<span id="cb8-332"><a href="#cb8-332" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">call</span>((enter) <span class="kw">=&gt;</span> {</span>
<span id="cb8-333"><a href="#cb8-333" aria-hidden="true" tabindex="-1"></a>              enter</span>
<span id="cb8-334"><a href="#cb8-334" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb8-335"><a href="#cb8-335" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> computeHeight)</span>
<span id="cb8-336"><a href="#cb8-336" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> computeHeight)<span class="op">;</span></span>
<span id="cb8-337"><a href="#cb8-337" aria-hidden="true" tabindex="-1"></a>            })<span class="op">,</span></span>
<span id="cb8-338"><a href="#cb8-338" aria-hidden="true" tabindex="-1"></a>        (update) <span class="kw">=&gt;</span></span>
<span id="cb8-339"><a href="#cb8-339" aria-hidden="true" tabindex="-1"></a>          update<span class="op">.</span><span class="fu">call</span>((update) <span class="kw">=&gt;</span> {</span>
<span id="cb8-340"><a href="#cb8-340" aria-hidden="true" tabindex="-1"></a>            update<span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> computeTransform)<span class="op">;</span></span>
<span id="cb8-341"><a href="#cb8-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-342"><a href="#cb8-342" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (transition) update <span class="op">=</span> update<span class="op">.</span><span class="fu">transition</span>()<span class="op">;</span></span>
<span id="cb8-343"><a href="#cb8-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-344"><a href="#cb8-344" aria-hidden="true" tabindex="-1"></a>            update</span>
<span id="cb8-345"><a href="#cb8-345" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">xCoord</span>))</span>
<span id="cb8-346"><a href="#cb8-346" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">yCoord</span>))</span>
<span id="cb8-347"><a href="#cb8-347" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> computeHeight)</span>
<span id="cb8-348"><a href="#cb8-348" aria-hidden="true" tabindex="-1"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> computeHeight)<span class="op">;</span></span>
<span id="cb8-349"><a href="#cb8-349" aria-hidden="true" tabindex="-1"></a>          })<span class="op">,</span></span>
<span id="cb8-350"><a href="#cb8-350" aria-hidden="true" tabindex="-1"></a>        (exit) <span class="kw">=&gt;</span> exit<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">.</span><span class="fu">remove</span>()</span>
<span id="cb8-351"><a href="#cb8-351" aria-hidden="true" tabindex="-1"></a>      )<span class="op">;</span></span>
<span id="cb8-352"><a href="#cb8-352" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-353"><a href="#cb8-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-354"><a href="#cb8-354" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Resets the plot to the initial data</span></span>
<span id="cb8-355"><a href="#cb8-355" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">reset</span>() {</span>
<span id="cb8-356"><a href="#cb8-356" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update</span>(initData<span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb8-357"><a href="#cb8-357" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-358"><a href="#cb8-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-359"><a href="#cb8-359" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Updates which error type to show</span></span>
<span id="cb8-360"><a href="#cb8-360" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateView</span>(option) {</span>
<span id="cb8-361"><a href="#cb8-361" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (option <span class="op">===</span> <span class="st">"None"</span>) {</span>
<span id="cb8-362"><a href="#cb8-362" aria-hidden="true" tabindex="-1"></a>      errorLinesOpacity <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-363"><a href="#cb8-363" aria-hidden="true" tabindex="-1"></a>      errorSquaresOpacity <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-364"><a href="#cb8-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-365"><a href="#cb8-365" aria-hidden="true" tabindex="-1"></a>      errorLines<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb8-366"><a href="#cb8-366" aria-hidden="true" tabindex="-1"></a>      errorSquares<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb8-367"><a href="#cb8-367" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (option <span class="op">===</span> <span class="st">"Absolute Error"</span>) {</span>
<span id="cb8-368"><a href="#cb8-368" aria-hidden="true" tabindex="-1"></a>      errorLinesOpacity <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb8-369"><a href="#cb8-369" aria-hidden="true" tabindex="-1"></a>      errorSquaresOpacity <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-370"><a href="#cb8-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-371"><a href="#cb8-371" aria-hidden="true" tabindex="-1"></a>      errorLines<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb8-372"><a href="#cb8-372" aria-hidden="true" tabindex="-1"></a>      errorSquares<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb8-373"><a href="#cb8-373" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (option <span class="op">===</span> <span class="st">"Squared Error"</span>) {</span>
<span id="cb8-374"><a href="#cb8-374" aria-hidden="true" tabindex="-1"></a>      errorLinesOpacity <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-375"><a href="#cb8-375" aria-hidden="true" tabindex="-1"></a>      errorSquaresOpacity <span class="op">=</span> <span class="fl">0.5</span><span class="op">;</span></span>
<span id="cb8-376"><a href="#cb8-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-377"><a href="#cb8-377" aria-hidden="true" tabindex="-1"></a>      errorLines<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb8-378"><a href="#cb8-378" aria-hidden="true" tabindex="-1"></a>      errorSquares<span class="op">.</span><span class="fu">transition</span>()<span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="fl">0.5</span>)<span class="op">;</span></span>
<span id="cb8-379"><a href="#cb8-379" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-380"><a href="#cb8-380" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-381"><a href="#cb8-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-382"><a href="#cb8-382" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Adds a new datapoint and updates the plot</span></span>
<span id="cb8-383"><a href="#cb8-383" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">updateDatapoint</span>(xCoord<span class="op">,</span> yCoord) {</span>
<span id="cb8-384"><a href="#cb8-384" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add datapoint</span></span>
<span id="cb8-385"><a href="#cb8-385" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> [<span class="op">...</span>data<span class="op">,</span> { xCoord<span class="op">,</span> yCoord<span class="op">,</span> <span class="dt">id</span><span class="op">:</span> idCounter<span class="op">++</span> }]<span class="op">;</span></span>
<span id="cb8-386"><a href="#cb8-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-387"><a href="#cb8-387" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update</span>(data)<span class="op">;</span></span>
<span id="cb8-388"><a href="#cb8-388" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-389"><a href="#cb8-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-390"><a href="#cb8-390" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Main function that updates the plot based on new data</span></span>
<span id="cb8-391"><a href="#cb8-391" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">update</span>(newData<span class="op">,</span> transition <span class="op">=</span> <span class="kw">true</span>) {</span>
<span id="cb8-392"><a href="#cb8-392" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Upate local data object</span></span>
<span id="cb8-393"><a href="#cb8-393" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> newData<span class="op">.</span><span class="fu">map</span>((d) <span class="kw">=&gt;</span> ({ <span class="op">...</span>d }))<span class="op">;</span></span>
<span id="cb8-394"><a href="#cb8-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-395"><a href="#cb8-395" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateRegressionLine</span>(regressionLine<span class="op">,</span> data<span class="op">,</span> transition)<span class="op">;</span></span>
<span id="cb8-396"><a href="#cb8-396" aria-hidden="true" tabindex="-1"></a>    circles <span class="op">=</span> <span class="fu">updateCircles</span>(circles<span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb8-397"><a href="#cb8-397" aria-hidden="true" tabindex="-1"></a>    errorSquares <span class="op">=</span> <span class="fu">updateErrorSquares</span>(errorSquares<span class="op">,</span> data<span class="op">,</span> transition)<span class="op">;</span></span>
<span id="cb8-398"><a href="#cb8-398" aria-hidden="true" tabindex="-1"></a>    errorLines <span class="op">=</span> <span class="fu">updateErrorLines</span>(errorLines<span class="op">,</span> data<span class="op">,</span> transition)<span class="op">;</span></span>
<span id="cb8-399"><a href="#cb8-399" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-400"><a href="#cb8-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-401"><a href="#cb8-401" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>(svg<span class="op">.</span><span class="fu">node</span>()<span class="op">,</span> {</span>
<span id="cb8-402"><a href="#cb8-402" aria-hidden="true" tabindex="-1"></a>    update<span class="op">,</span></span>
<span id="cb8-403"><a href="#cb8-403" aria-hidden="true" tabindex="-1"></a>    updateDatapoint<span class="op">,</span></span>
<span id="cb8-404"><a href="#cb8-404" aria-hidden="true" tabindex="-1"></a>    updateView<span class="op">,</span></span>
<span id="cb8-405"><a href="#cb8-405" aria-hidden="true" tabindex="-1"></a>    reset</span>
<span id="cb8-406"><a href="#cb8-406" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb8-407"><a href="#cb8-407" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb9" data-startfrom="0" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb9-0"><a href="#cb9-0" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3-regression"</span><span class="op">,</span> <span class="st">"d3"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="fig-linfun" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-linfun-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="figure-content">
<!-- ```{=html} -->
<!-- <iframe width="500" height="400" src="https://www.geogebra.org/m/vfjW1dZt" title="Visualisierung eines Geradenmodells"></iframe> -->
<!-- ``` -->
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<p><a href="https://observablehq.com/@yizhe-ang/interactive-visualization-of-linear-regression">Quelle</a></p>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-linfun-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.7: Interaktives Beispiel für eines lineares Modell. Fügen Sie Punkte per Klick/Touch hinzu.
</figcaption></figure>
</div>
<p>Alternativ können Sie <a href="https://gallery.shinyapps.io/simple_regression/">diese App</a> njutzen, Regressionskoeffizienten, Steigung (slope) und Achsenabschnitt (Intercept), zu optimieren. Dabei meint “optimieren”, die Abweichungen (Residuen, Residualfehler; die roten Balken in der App) zu minimieren.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<p><a href="https://shinyapps.org/showapp.php?app=https://shiny.psy.lmu.de/felix/lmfit&amp;by=Felix%20Sch%C3%B6nbrodt&amp;title=Find-a-fit!&amp;shorttitle=Find-a-fit!">Hier</a> finden Sie eine App, die Ihnen gestattet, selber Hand an eine Regressionsgerade zu legen.</p>
<div id="exr-setosa-vis" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.5 (VERTIEFUNG Regression mit Animationen erklärt)</strong></span> Lesen Sie <a href="https://setosa.io/ev/ordinary-least-squares-regression/">diesen Post</a>, der Ihnen mit Hilfe von Bildern und Animationen (okay, und etwas) Text die Grundlagen der Regressionsanalyse erklärt.<span class="math inline">\(\square\)</span></p>
</div>
<section id="regression-zum-modellieren" class="level3" data-number="2.5.1"><h3 data-number="2.5.1" class="anchored" data-anchor-id="regression-zum-modellieren">
<span class="header-section-number">2.5.1</span> Regression zum Modellieren</h3>
<p>Die Regression ist eine Art Schweizer Taschenmesser der Statistik: Für vieles gut einsetzbar. Anstelle von vielen verschiedenen Verfahren des statistischen Modellierens kann man (fast) immer die Regression verwenden. Das ist nicht nur einfacher, sondern auch schöner. Wir werden im Folgenden stets die Regression zum Modellieren verwenden. Dann wenden wir die Methoden der Inferenz auf die Kennzahlen der Regression an.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Regression + Inferenz = 💖</p>
</div>
</div>
<p>Alternativ zur Regression könnte man sich in den Wald der statistischen Verfahren begeben, <a href="https://web.archive.org/web/20091029162244/http://www.wiwi.uni-muenster.de/ioeb/en/organisation/pfaff/stat_overview_table.html">wie hier von der Uni Münster als Ausschnitt (!) aufgeführt</a>. Auf dieser Basis kann man meditieren, welches statistischen Verfahren man für eine bestimmte Fragestellung verwenden sollte, s. Abb. <a href="#fig-choose-test" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-choose-test</span></a>. Muss man aber nicht – man kann stattdessen die Regression benutzen.</p>
<div id="fig-choose-test" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-choose-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/choose-test.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-choose-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.8: Wähle deine Statistik mit Bedacht. Oder wähle die Regressionsanalyse.
</figcaption></figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Es ist meist einfacher und nützlicher, die Regression zu verwenden, anstelle der Vielzahl von anderen Verfahren (die zumeist Spezialfälle der Regression sind). In diesem Kurs werden wir für alle Fragestellungen die Regression verwenden.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a><span class="math inline">\(\square\)</span></p>
</div>
</div>
<div id="exm-spezialfaelle-regr" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.4</strong></span> Typische Spezialfälle der Regression sind</p>
<ul>
<li>t-Test: UV: zweistufig nominal, AV: metrisch</li>
<li>ANOVA: UV: mehrstufig nominal, AV: metrisch</li>
<li>Korrelation: Wenn UV und AV z-standardisiert sind (d.h. Mittelwert von 0 und Standardabweichung von 1 haben), dann ist die Korrelation gleich dem Regressionskoeffizienten <span class="math inline">\(\beta_1\)</span> (bei einer einfachen Regression mit einer einzigen UV). <span class="math inline">\(\square\)</span>
</li>
</ul>
</div>
<!-- ![Common statistical tests as linear models](img/linear_tests_cheat_sheet.png){#fig-lindeloev} -->
</section><section id="in-voller-pracht" class="level3" data-number="2.5.2"><h3 data-number="2.5.2" class="anchored" data-anchor-id="in-voller-pracht">
<span class="header-section-number">2.5.2</span> In voller Pracht</h3>
<p>Hier ist die Regressionsgleichung in voller Pracht; s. <a href="#fig-regr-rules" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-regr-rules</span></a>. Links sieht man eine einfache Regression mit <code>hp</code> als Prädiktor (<code>X</code>, unabhängige Variable) und <code>mpg</code> als abhängige Variable (<code>Y</code>). Das rechte Teildiagramm zeigt eine multiple Regression mit den Prädiktoren <code>hp</code> und <code>am</code>.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
<p>Im einfachsten Fall sind die vom Modell vorhergesagten (geschätzten) Werte, <span class="math inline">\(\hat{y}\)</span>, durch eine einfache Gerade beschrieben, s. <a href="#fig-regr-rules" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-regr-rules</span></a>, links. Eine Gerade lässt sich durch folgende Formel beschreiben: <span class="math inline">\(\hat{y} = \beta_0 + \beta_1\)</span>. Dabei ist <span class="math inline">\(\beta_0\)</span> der <em>Achsenabschnitt</em> (eng. intercept) und <span class="math inline">\(\beta_1\)</span> die <em>Steigung</em> der Regressiongeraden.</p>
<div class="{def-lm}">
<p>In allgemeiner Form schreibt man die Regressionsgleichung als lineare Gleichung, d.h. in Form einer Gerade, s. <a href="#thm-lm" class="quarto-xref">Theorem&nbsp;<span class="quarto-unresolved-ref">thm-lm</span></a>. <span class="math inline">\(\square\)</span></p>
</div>
<div id="thm-lm" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2.1 (Lineares Modell (Regressionsgleichung))</strong></span> <span class="math display">\[y = \beta_0 + \beta_1 x_1 + \ldots + \beta_k x_k + \epsilon\]</span></p>
<p>Man nennt alle <span class="math inline">\(\beta_0, \beta_1, \beta_2, ...\)</span> die <em>Koeffizienten</em>, <em>Regressionsgewichte</em> oder <em>Parameter</em> des Modells <span class="citation" data-cites="gelman2021">(<a href="#ref-gelman2021" role="doc-biblioref">Gelman et al., 2021</a>)</span>. <span class="math inline">\(\square\)</span></p>
</div>
<p>Anhand von <a href="#thm-lm" class="quarto-xref">Theorem&nbsp;<span class="quarto-unresolved-ref">thm-lm</span></a> erkennt man auch, warum man von einem <em>linearen Modell</em> spricht: Y wird als gewichteter Mittelwert mehrerer Summanden (<span class="math inline">\(X_1, X_2, ...\)</span>) berechnet.</p>
<div id="fig-regr-rules" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-regr-rules-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-regr-rules" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-regr-rules-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-regr-rules-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-regr-rules-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-regr-rules">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-regr-rules-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Einfache Regression (ein Prädiktor: hp)
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-regr-rules" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-regr-rules-2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-regr-rules-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-regr-rules-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-regr-rules">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-regr-rules-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Multiple Regression (zwei Prädiktoren: hp und am)
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-regr-rules-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.9: Die Regressionsgerade in voller Pracht
</figcaption></figure>
</div>
</section></section><section id="unsicherheit" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="unsicherheit">
<span class="header-section-number">2.6</span> Unsicherheit</h2>
<section id="inferenz-beinhaltet-ungewissheit" class="level3" data-number="2.6.1"><h3 data-number="2.6.1" class="anchored" data-anchor-id="inferenz-beinhaltet-ungewissheit">
<span class="header-section-number">2.6.1</span> Inferenz beinhaltet Ungewissheit</h3>
<p>Inferenzstatistische Schlüsse sind mit <em>Unsicherheit</em> (Ungewissheit) behaftet: Schließlich kennt man nur einen Teil (die Stichprobe) eines Ganzen (die Population), möchte aber vom Teil auf das Ganze schließen.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nichts Genaues weiß man nicht: Schließt man von einem Teil auf das Ganze, so geschieht das unter Unsicherheit. Man spricht von <em>Ungewissheit</em>, da man sich auf die <em>Unsicherheit das Wissen</em> über die Genauigkeit des Schließens bezieht</p>
</div>
</div>
<p>Schließt man etwa, dass in einer Grundgesamtheit der Anteil der R-Fans bei 42% liegt, so geschieht das unter Unsicherheit; es ist ungewiss. Man ist sich nicht sicher, dass es wirklich 42% in der Population sind - und nicht etwa etwas mehr oder etwas weniger.</p>
<p>Schließlich hat man <em>nicht</em> die ganze Population gesehen bzw. vermessen. <em>Sicher</em> ist man sich hingegen für die Stichprobe (Messfehler einmal ausgeblendet). Zur Bemessung der Unsicherheit (Ungewissheit) bedient man sich der Wahrscheinlichkeitsrechnung (wo immer möglich). Die Wahrscheinlichkeitstheorie bzw. -rechnung wird daher auch als die Mathematik des Zufalls bezeichnet.</p>
<div id="def-zufall" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.5 (Zufälliges Ereignis)</strong></span> Unter einem zufälligen (engl. random) Ereignis verstehen wir ein Ereignis, das nicht (komplett) vorherzusehen ist, wie etwa die Augenzahl Ihres nächsten Würfelwurfs. Zufällig bedeutet nicht (zwangsläufig), dass das Ereignisse keine Ursachen besitzt. So gehorchen die Bewegungen eines Würfels den Gesetzen der Physik, nur sind uns diese oder die genauen Randbedingungen nicht (ausreichend) bekannt.</p>
</div>
<div id="exr-muenz" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.6</strong></span> 🏋 Welche physikalischen Randbedingungen wirken wohl auf einen Münzwurf ein?<span class="math inline">\(\square\)</span></p>
</div>
<div id="exm-muenz" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.5 (Beispiele zur Quantifizierung von Ungewissheit)</strong></span> Aussagen mit Unsicherheit können unterschiedlich präzise formuliert sein.</p>
<ul>
<li><p>Morgen regnet’s <span class="math inline">\(\Leftrightarrow\)</span> Morgen wird es hier mehr als 0 mm Niederschlag geben (<span class="math inline">\(p=97\%\)</span>).</p></li>
<li><p>Methode <span class="math inline">\(A\)</span> ist besser als Methode <span class="math inline">\(B\)</span> <span class="math inline">\(\Leftrightarrow\)</span> Mit einer Wahrscheinlichkeit von 57% ist der Mittelwert von <span class="math inline">\(Y\)</span> für Methode <span class="math inline">\(A\)</span> höher als für Methode <span class="math inline">\(B\)</span>.</p></li>
<li><p>Die Maschine fällt demnächst aus <span class="math inline">\(\Leftrightarrow\)</span> Mit einer Wahrscheinlichkeit von 97% wird die Maschine in den nächsten 1-3 Tagen ausfallen, laut unserem Modell.</p></li>
<li><p>Die Investition lohnt sich <span class="math inline">\(\Leftrightarrow\)</span> Die Investition hat einen Erwartungswert von 42 Euro; mit 90% Wahrscheinlichkeit wird der Gewinn zwischen -10000 und 100 Euro.</p></li>
</ul>
</div>
<div id="exr-ungewiss" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.7</strong></span> 🏋 Geben Sie weitere Beispiele an!</p>
</div>
</section><section id="zwei-arten-von-ungewissheit" class="level3" data-number="2.6.2"><h3 data-number="2.6.2" class="anchored" data-anchor-id="zwei-arten-von-ungewissheit">
<span class="header-section-number">2.6.2</span> Zwei Arten von Ungewissheit</h3>
<p>Im Modellieren im Allgemeinen und in Regressionsmodellen im Besonderen lassen sich (mindestens) zwei Arten von Ungewissheiten angeben, s. auch Abb. <a href="#fig-zwei-arten" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-zwei-arten</span></a>.</p>
<ol type="1">
<li><p>Wie (un)gewiss ist man sich über die <em>Regressionsgewichte</em>?</p></li>
<li><p>Wie (un)gewiss ist man sich über die <em>Korrektheit der Modellspezifikation</em>? (Sind alle relevanten Variablen im Modell enthalten? Sind die Annahmen des Modells erfüllt? …)</p></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-zwei-arten" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-zwei-arten-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-zwei-arten">flowchart LR
X1 --&gt;|Präzision von Steigung und Achsenabschnitt?|B
X2 -. Korrektheit des Modells? .-&gt; Y

</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-zwei-arten-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.10: Zwei Arten der Ungewissheit beim Modellieren
</figcaption></figure>
</div>
</div>
</div>
</section><section id="ungewissheit-der-modellkoeffizienten" class="level3" data-number="2.6.3"><h3 data-number="2.6.3" class="anchored" data-anchor-id="ungewissheit-der-modellkoeffizienten">
<span class="header-section-number">2.6.3</span> Ungewissheit der Modellkoeffizienten</h3>
<p>Wie man in <a href="#fig-regr-div" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-regr-div</span></a> sieht, können sich die Koeffizienten (Achsenabschnitt und Steigung) unterscheiden. Woran liegt das?</p>
<div id="exm-flights" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.6 (Stichproben der New Yorker Flüge)</strong></span> Nehmen wir an, wir ziehen ein paar Zufallstichproben aus der Menge (Population) aller Flüge, die in New York im Jahre 2013 gestartet sind. In jeder Stichprobe berechnen wir eine Regression zwischen Flugzeit und Verspätung des Flugs am Ankunftsort. Sicherlich werden sich die Stichproben in ihren Kennwerten, z.B. in den Koeffizienten der genannten Regression, unterscheiden.<span class="math inline">\(\square\)</span></p>
</div>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/nycflights13">nycflights13</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">flights</span><span class="op">)</span></span>
<span></span>
<span><span class="va">stipro1</span> <span class="op">&lt;-</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">flights</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">stipro2</span> <span class="op">&lt;-</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">flights</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">stipro3</span> <span class="op">&lt;-</span> <span class="fu">sample_n</span><span class="op">(</span><span class="va">flights</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="fig-regr-div" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-regr-div-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-regr-div" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-regr-div-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-regr-div-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-regr-div-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-regr-div">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-regr-div-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Stichprobe 1
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-regr-div" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-regr-div-2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-regr-div-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-regr-div-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-regr-div">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-regr-div-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Stichprobe 2
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-regr-div" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-regr-div-3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-regr-div-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-regr-div-3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-regr-div">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-regr-div-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Stichprobe 3
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-regr-div-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.11: Regressionsanalysen mit verschiedenen Koeffizienten aufgrund der Zufälligkeit des Stichprobenziehens
</figcaption></figure>
</div>
<p>Der Grund für die Schwankungen der Modellparameter zwischen den Stichproben ist die Zufälligkeit des Stichprobenziehens. Je nachdem, wie es der Zufall (oder sonst wer) will, landen bestimmte Fälle (Flüge in unserem Beispiel) in unserer Stichprobe. Zumeist unterscheiden sich die Stichproben; theoretisch könnten sie aber auch rein zufällig gleich sein.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Stichproben-Kennwerte schwanken um den tatsächlichen Wert in der Population herum.<span class="math inline">\(\square\)</span></p>
</div>
</div>
<p>Um diese Ungewissheit, die sich in den Schwankungen der Stichproben-Regressionskoeffizienten ausdrückt, anzuzeigen, ist ein “grauer Schleier” um die Regressionsgeraden in <a href="#fig-regr-div" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-regr-div</span></a> gekennzeichnet. Dieser grauer Schleier gibt also eine Spannbreite anderer, plausibler Ergebnisse an, die sich in einer anderen Stichprobe auch manifestieren könnten.</p>
<section id="ungewissheit-zur-korrektheit-des-modells" class="level4" data-number="2.6.3.1"><h4 data-number="2.6.3.1" class="anchored" data-anchor-id="ungewissheit-zur-korrektheit-des-modells">
<span class="header-section-number">2.6.3.1</span> Ungewissheit zur Korrektheit des Modells</h4>
<p>Angenommen, wir sind uns <em>sicher</em> über die Werte der Modellparameter, also über die Lage der Regressionsgeraden, anschaulich gesprochen. Dann bliebe immer noch Ungewissheit, inwieweit das Modell korrekt spezifiziert ist: Sind genau die richtigen Variablen im Modell enthalten?</p>
<p>Diese Art der Ungewissheit ist dann interessant, wenn man für einzelne Fälle eine Vorhersage macht und sich fragt, wie präzise diese Vorhersage ist.</p>
<div id="fig-resid-var" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-resid-var-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-resid-var" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-resid-var-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-resid-var-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-resid-var-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-resid-var">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-resid-var-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) geringer Vorhersagefehler (hohe Vorhersagegüte)
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-resid-var" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-resid-var-2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-resid-var-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-resid-var-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-resid-var">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-resid-var-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) hoher Vorhersagefehler
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-resid-var" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-resid-var-3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-resid-var-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-resid-var-3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-resid-var">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-resid-var-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) auch hoher Vorhersagefehler
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-resid-var-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.12: Regressionsanalyse mit gleicher Regressionsgerade, aber unterschiedlicher Vorhersagegüte
</figcaption></figure>
</div>
</section></section><section id="ich-weiß-was-ich-nicht-weiß-ungewissheit-angeben" class="level3" data-number="2.6.4"><h3 data-number="2.6.4" class="anchored" data-anchor-id="ich-weiß-was-ich-nicht-weiß-ungewissheit-angeben">
<span class="header-section-number">2.6.4</span> Ich weiß, was ich nicht weiß: Ungewissheit angeben</h3>
<p>Streng genommen ist eine Inferenz ohne Angabe der Ungewissheit (Genauigkeit der Schätzung) wertlos. Angenommen, jemand sagt, dass sie den Anteil der R-Fans (in der Population) auf 42% schätzt, lässt aber offen wie <em>sicher</em> (präzise) die Schätzung (der Modellparameter) ist. Wir wissen also nicht, ob z.B. 2% oder 82% noch erwartbar sind. Oder ob man im Gegenteil mit hoher Sicherheit sagen kann, die Schätzung schließt sogar 41% oder 43% aus.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Schließt man auf eine Population, schätzt also die Modellparameter, so sollte stets die (Un-)Genauigkeit der Schätzung, also die Ungewissheit des Modells, angegeben sein.<span class="math inline">\(\square\)</span></p>
</div>
</div>
<p>Im Rahmen der Regressionsanalyse schlägt sich die Ungewissheit an zwei Stellen (und in drei Parametern) nieder:</p>
<ol type="1">
<li>zur Präzision der Regressionsgeraden <span class="math inline">\(\beta_0\)</span>, <span class="math inline">\(\beta_1\)</span>
</li>
<li>zur Modellgüte (<span class="math inline">\(R^2\)</span>) bzw. zum Vorhersagefehler, <span class="math inline">\(\sigma\)</span><a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>
</li>
</ol></section><section id="visualisierung-von-ungewissheit" class="level3" data-number="2.6.5"><h3 data-number="2.6.5" class="anchored" data-anchor-id="visualisierung-von-ungewissheit">
<span class="header-section-number">2.6.5</span> Visualisierung von Ungewissheit</h3>
<div id="def-punktschaetzer" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.6 (Punktschätzer)</strong></span> Gibt man nur einen Punktwert an, wie 42%, als Ergebnis einer Inferenz, spricht man von einem <em>Punktschätzer</em>.</p>
<p>Punktschätzer beinhalten <em>keine Angabe</em> der Schätz(un)genauigkeit, s. Abb. <a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a>, links. Rot markiert: Die Punktschätzung von <code>mpg</code> für <code>hp=200</code>.</p>
</div>
<!-- ![Eine Punktschätzung der Regressionsgeraden und die zugehörige Ungewissheit Ungewissheit](img/fig-punktschaetzer.png){#fig-punktschaetzer2} -->
<p>In Abb. <a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a>, links, ist die Ungewissheit in den <em>Regressionskoeffizienten</em> visualisiert: Wie sicher sind wir uns bzgl. der Lage der Regressionskoeffizienten? Vgl. <a href="#def-punktschaetzer" class="quarto-xref">Definition&nbsp;<span class="quarto-unresolved-ref">def-punktschaetzer</span></a>.</p>
<p>Auch wenn wir uns <em>sicher</em> wären im Hinblick auf die Regressionsgewichte in Abb. <a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a>, links, bliebe Ungewissheit bei der Vorhersage des Bereichs plausibler Werte für individuelle Vorhersagen, s. <a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a>, rechts. Unsere Schätzungen wären auch dann nicht sicher, nicht fehlerfrei, wenn wir den genauen Verlauf der Regressiongerade sicher wüssten. Das liegt daran, da das Modell nicht alle Einflüsse auf Y berücksichtigt, sondern nur einen einzigen, hier als X bezeichnet. Das Modell hat also keine perfekte Information, es ist ungewiss über alle möglichen Einflussfaktoren auf Y. Wüsste unser Modell alle Einflussfaktoren genau, so wäre unser Vorhersageintervall sehr schmal (bzw. hätte null Breite).</p>
<p>In Abb. <a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a>, rechts, ist nicht nur die Ungewissheit durch die Regressionsgewichte, sondern auch die Ungewissheit zur Vorhersage der Y-Werte individueller Beobachtungen dargestellt. In diesem Fall spricht man von einem “Vorhersageintervall”, da man nicht nur von “typischen Fällen” auf der Regressiongeraden spricht, sondern für echte Fälle Vorhersagen (Schätzungen) tätigt, wo auch die Ungewissheit der Modellgüte relevant ist.</p>
<!-- ![Das Vorhersageintevall zeigt eine Punktschätzung und ihre Ungewissheit](img/fig-predintervall.png){fig-ungewiss2 width="50%"} -->
<div id="fig-ungewiss2" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ungewiss2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-ungewiss2" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ungewiss2-1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-ungewiss2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-ungewiss2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-ungewiss2">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-ungewiss2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Eine Punktschätzung der Regressionsgeraden und die zugehörige Ungewissheit der Koeffizienten
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-ungewiss2" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ungewiss2-2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-ungewiss2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="0200-Inferenz_files/figure-html/fig-ungewiss2-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%" data-ref-parent="fig-ungewiss2">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-ungewiss2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Das Vorhersageintevall zur Regressionsgeraden zeigt die Ungewissheit für die jeweiligen Beobachtungen
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ungewiss2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.13: Die zwei Arten der Ungewissheit visualisiert
</figcaption></figure>
</div>
<p><a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a> zeigt auch, dass für eine Beobachtung mit <code>hp=200</code> der <em>Punktschätzer</em> der geschätzte Wert von <code>mpg</code> bei ca <code>16.5</code> liegt. Das ist sozusagen unser <em>Best Guess</em>. Weiterhin ist (in grün) das <em>Vorhersageintervall</em> für <code>hp=200</code> angezeigt. Für Beobachtungen mit <code>hp=200</code> liegt der Bereich plausibler <code>mpg</code>-Werte in dem (grün) markierten Bereich (ca. 8 bis 25).</p>
<div id="def-vorhersageintervall" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.7 (Vorhersageintervall)</strong></span> Ein Vorhersageintervall zeigt den Bereich plausibler Werte (laut unserer Analyse) für eine Beobachtung mit bestimmten Prädiktor-Werten.<span class="math inline">\(\square\)</span></p>
</div>
<p>Wie man sieht, wird die Ungewissheit <em>größer</em>, wenn man beide Arten der Ungewissheit berücksichtigt. Das Vorhersage-Intervall berücksichtigt Ungewissheit in erstens der Regressionsgerade, <span class="math inline">\(\beta_0, \beta_1\)</span>, und in der Präzision der Vorhersagen, <span class="math inline">\(\sigma\)</span>, bei der Vorhersage von <span class="math inline">\(\hat{y_i}\)</span>.</p>
<div id="exr-zweifache-ungewissheit" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.8</strong></span> 🏋 Geben Sie ein vergleichbares Beispiel an!</p>
</div>
</section><section id="konfidenzintervall" class="level3" data-number="2.6.6"><h3 data-number="2.6.6" class="anchored" data-anchor-id="konfidenzintervall">
<span class="header-section-number">2.6.6</span> Konfidenzintervall</h3>
<p>Wir sehen in <a href="#fig-ungewiss2" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ungewiss2</span></a>, dass ein “Ungewissheitskorridor” angegeben wird für die Lage der Regressionsgerade (linkes Teildiagramm) bzw. für den Bereich plausibler Vorhersagen im konkreten Fall einer Beobachtung mit bestimmten X-Wert. Entsprechend wird nicht ein <em>Punktschätzer</em>, sondern ein <em>Schätzbereich</em> angegeben. Man spricht auch von einem <em>Konfidenzintervall</em> oder <em>Unsicherheitsbereich</em>.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p>
<div id="def-konfintervall" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.8 (Konfidenzintervall)</strong></span> Ein Konfidenzintervall (confidence intervall, CI) ist ein Oberbegriff für Schätzbereiche für Parameter wie Regressionskoeffizienten. Die Grenzen eines Konfidenzintervall markieren die Grenzen eines Bereichs plausibler Werte für einen Parameter.</p>
</div>
<p>Es gibt verschiedene Arten, Konfidenzintervalle zu berechnen; wir sprechen in späteren Kapiteln dazu ausführlicher. Ein Konfidenzintervall wird häufig mit 90% oder 95% Genauigkeit angegeben. Im Kontext der Bayes-Analyse - auf der dieser Kurs aufbaut - ist ein Konfidenzintervall einfach zu interpretieren. Sagen wir, wir finden, dass in einem Modell ein 95%-Konfidenzintervall für den Anteil der R-Fans angegeben wird, dass sich von 40 bis 44 Prozent erstreckt. Dieser Befund lässt sich so interpretieren: “Laut Modell liegt der gesuchte Anteil der R-Fans mit einer Wahrscheinlichkeit von 95% im Bereich von 40 bis 44 Prozentpunkten.” Diese (einfache) Interpretation ist im Frequentismus <em>nicht</em> möglich.</p>
<div id="exm-ungewisskorr" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.7</strong></span> Geben Sie Beispiele für Konfidenzintervalle an.</p>
</div>
</section><section id="hypothesen-testen" class="level3" data-number="2.6.7"><h3 data-number="2.6.7" class="anchored" data-anchor-id="hypothesen-testen">
<span class="header-section-number">2.6.7</span> Hypothesen testen</h3>
<!-- TODO Def Hypothese  -->
<p>Um eine Hypothese zu testen, wird oft wie folgt vorgegangen:</p>
<ol type="1">
<li><p>Man stellt eine statistische Forschungshypothese (“Alternativhypothese” genannt, <span class="math inline">\(H_A\)</span>) auf und eine korrespondieren Nullhypothese $H_0.</p></li>
<li><p>Man testet die <span class="math inline">\(H_0\)</span>. Dafür prüft man statistisch, ob die Daten <span class="math inline">\(D\)</span> mit der <span class="math inline">\(H_0\)</span> konsistent sind, also zur <span class="math inline">\(H_0\)</span> passen.</p></li>
<li><p>Je nach Datenlagen trifft man eine Entscheidung:</p></li>
</ol>
<ol type="A">
<li><p>Passen die Daten nicht zur <span class="math inline">\(H_0\)</span>, lehnt man die <span class="math inline">\(H_0\)</span> ab, man sagt, man “verwirft” die <span class="math inline">\(H_0\)</span> oder man “hat die <span class="math inline">\(H_0\)</span> falsifiziert. In diesem Fall akzeptiert man die <span class="math inline">\(H_A\)</span>.</p></li>
<li><p>Passen die Daten gut oder einigermaßen zur <span class="math inline">\(H_0\)</span>, so behält man die <span class="math inline">\(H_0\)</span> bei. Man verwirft die <span class="math inline">\(H_0\)</span> <em>nicht</em>. Das heißt <em>nicht</em>, dass die <span class="math inline">\(H_A\)</span> sicher falsch ist. Wir haben nur keinen ausreichenden Grund, die <span class="math inline">\(H_0\)</span> auszuschließen.</p></li>
</ol>
<p>Das Testen von Hypothesen lässt sich mit dem Urteil eines Gerichts vergleichen:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead><tr class="header">
<th>Hypothesen testen</th>
<th>Urteil eines Gerichts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>H0</td>
<td>Angeklagter ist unschuldig</td>
</tr>
<tr class="even">
<td>HA</td>
<td>Angeklagter ist schuldig</td>
</tr>
<tr class="odd">
<td>Daten</td>
<td>Indizien der Anklage</td>
</tr>
</tbody>
</table>
<p>Es gilt vorab die Unschuldsvermutung, also die <span class="math inline">\(H_0\)</span>. Die Beweislast ist also beim Kläger.</p>
<p>Das Gericht kann zu zwei Urteilen kommen: <em>Schuldig</em> (<span class="math inline">\(H_0\)</span> verwerfen) oder <em>nicht schuldig</em> (<span class="math inline">\(H_0\)</span> nicht verworfen). Wichtig ist zu verstehen, dass <em>nicht schuldig</em> kein Beweis der Unschuld ist. Es gibt nur nicht genug Indizien für einen Schuldspruch.</p>
<p>Daher sind zwei Fehler möglich:</p>
<p><em>Fehler Typ 1</em>: Das Gericht spricht den Angeklagten <em>schuldig</em>, obwohl der Angeklagte in Wahrheit <em>unschuldig</em> ist. Die <span class="math inline">\(H_0\)</span> ist wahr, wird aber fälschlich verworfen.</p>
<p><em>Fehler Typ 2</em>: Das Gericht spricht sich für <em>nicht schuldig</em> aus, obwohl der Angeklagte in Wahrheit <em>schuldig</em> ist. Die <span class="math inline">\(H_0\)</span> ist falsch, wird aber fälschlich beibehalten (nicht verworfen).</p>
<p>Diese Vorgehensweise ist eine Mischung aus den Ideen der Statistiker Ronald A. Fisher und den beiden Statistikern Jerzy Neyman und Karl Pearson <span class="citation" data-cites="gigerenzer2004">(<a href="#ref-gigerenzer2004" role="doc-biblioref"><strong>gigerenzer2004?</strong></a>)</span>.</p>
</section></section><section id="wahrscheinlichkeit" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="wahrscheinlichkeit">
<span class="header-section-number">2.7</span> Wahrscheinlichkeit</h2>
<section id="wahrscheinlichkeit-als-logik-der-forschung" class="level3" data-number="2.7.1"><h3 data-number="2.7.1" class="anchored" data-anchor-id="wahrscheinlichkeit-als-logik-der-forschung">
<span class="header-section-number">2.7.1</span> Wahrscheinlichkeit als Logik der Forschung</h3>
<p>Wahrscheinlichkeit macht (laut E.T. <span class="citation" data-cites="jaynes2023">(<a href="#ref-jaynes2023" role="doc-biblioref"><strong>jaynes2023?</strong></a>)</span>) nicht primär Aussagen über Zufall. Stattdessen ist Wahrscheinlichkeit logisches Schlussfolgern unter Unsicherheit. Damit ist Wahrscheinlichkeit eine Erweiterung der (“normalen”, Boole’schen) Logik. In der Logik sind Aussagen entweder falsch (0) oder wahr (1) Nach Jaynes’ Idee beschreibt Wahrscheinlichkeit Abstufungen von Wahrheit: Diese Abstufungen lassen sich als reelle Zahlen zwischen 0 (falsch) und 1 (wahr) darstellen.</p>
<p>Die “klassische” Logik der Wissenschaft beruht auf Schlüssen (Syllogismen) wie diesem: “Alle Schwäne sind weiß.” <span class="math inline">\(\rightarrow\)</span> “Dies ist ein Schwan.” <span class="math inline">\(\rightarrow\)</span> “Dieser Schwan ist weiß.”</p>
<p>Mit dem Konzept von Wahrscheinlichkeit können wir jetzt auch folgende Logik anwenden: “Die meisten Schwäne sind weiß.” <span class="math inline">\(\rightarrow\)</span> “Dies ist ein Schwan.” <span class="math inline">\(\rightarrow\)</span> “Dieser Schwan ist wahrscheinlich weiß.” Das ist ein großer Fortschritt, der die Denkweise der Wissenschaft gut widerspiegelt und dafür eine logisch-mathematische Grundlage bereitstellt, s. <a href="#fig-prob-logic" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-prob-logic</span></a>.</p>
<div id="fig-prob-logic" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-prob-logic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/prob-logic.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-prob-logic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.14: Wahrscheinlichkeit als Erweiterung der Logik
</figcaption></figure>
</div>
</section><section id="wahrscheinlichkeit-ist-ungewissheit" class="level3" data-number="2.7.2"><h3 data-number="2.7.2" class="anchored" data-anchor-id="wahrscheinlichkeit-ist-ungewissheit">
<span class="header-section-number">2.7.2</span> Wahrscheinlichkeit ist Ungewissheit</h3>
<p>Wahrscheinlichkeit existiert nicht in dem Sinne, wie ein Stein oder ein Mensch existiert. Wahrscheinlichkeit ist stattdessen eine Art von Wissen. Daher ist es (nach <span class="citation" data-cites="jaynes2023">(<a href="#ref-jaynes2023" role="doc-biblioref"><strong>jaynes2023?</strong></a>)</span>) falsch, zu sagen: “Die Wahrscheinlichkeit für Zahl bei dieser Münze ist 50%.” Richtig wäre für einen unbedarften Spieler: “Ich habe keinen Grund, nicht an der Fairness der Münze zu glauben, also gehe ich von 50% Wahrscheinlichkeit für Zahl aus.” Der Betrüger, der diese Münze in der Hand hat, geht allerdings von einer Wahrscheinlichkeit von 75% für Zahl aus (er kennt die Münze besser als Sie).</p>
<p>Das Beispiel zeigt: Wahrscheinlichkeit ist kein Ding der Welt, sondern ein Wissenszustand.</p>
<p>Formaler ausgedrückt: Sei <span class="math inline">\(Pr\)</span> die Wahrscheinlichkeit des Ereignis <span class="math inline">\(Z\)</span> (Zahl) angibt, <em>gegeben</em> meiner Annahme, dass die Münze fair ist (<span class="math inline">\(F\)</span>), also eine Wahrscheinlichkeit von 50% (1/2 = .5) hat für <span class="math inline">\(Z\)</span>. Dann kann man kurz schreiben:</p>
<p><span class="math display">\[Pr(Z|F) = 0.5\]</span> Gegeben des Wissens des Betrügers <span class="math inline">\(B\)</span> wäre die Wahrscheinlichkeit für <span class="math inline">\(Z\)</span> anders:</p>
<p><span class="math display">\[Pr(Z|B) = 0.75\]</span></p>
<p>In Worten: “Die Wahrscheinlichkeit von Zahl (<span class="math inline">\(Z\)</span>) gegeben das Wissen des Betrügers über die Münze (<span class="math inline">\(B\)</span>) liegt bei 75%.</p>
<p>Das Beispiel zeigt auch, dass die Wahrscheinlichkeit eines Ereignissens (wie <span class="math inline">\(Z\)</span>) von Hintergrundinformationen (Annahmen, Daten, Evidenz, …) abhängt. Ohne zu sagen, auf welche Hintergrundinterformationen wir uns beziehen (die des unbedarften Spielers oder die des Betrügers), ist es sinnvoll, eine Wahrscheinlichkeit anzugeben. Daher ist <span class="math inline">\(Pr(Z) = 0.5\)</span> unvollständig. Allerdings wird die Hintergrundinformation oft weggelassen, wenn es klar ist, welche Hintergrundinformation vorliegt. So wird häufig vorausgesetzt, dass eine Münze fair ist.</p>
<div id="exm-bedingt" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.8 (Morgen regnet’s)</strong></span> Es ist daher unvollständig zu sagen: “Morgen wir es mit einer Wahrscheinlichkeit von 70% regnen.”</p>
<p>Man müsste Hintergrundinformation (<em>Evidenz</em>, <span class="math inline">\(E\)</span>) ergänzen, z.B. “auf Basis des Wettermodell X”.</p>
<p>Also: Anstelle von <span class="math inline">\(Pr(\text{Regen}) = .7\)</span> besser sagen: <span class="math inline">\(Pr(\text{Regen|Wettermodell X})\)</span>. <span class="math inline">\(\square\)</span></p>
</div>
<div id="exm-bedingt2" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.9 (Wahrscheinlichkeit für Krebs)</strong></span> Jemand beobachtet bei sich Symptome, die für eine eine Hautkrebserkrankung <span class="math inline">\(K\)</span> typisch sind. Die Person sagt sich: “Ach, die Wahrscheinlichkeit für Hautkrebs liegt bei einem Promill. Kein Grund für Sorge.” Formal: <span class="math inline">\(Pr(K) = 0.001\)</span>. Aber wenn die Person relevante Symptome <span class="math inline">\(S\)</span> hat, gilt: <span class="math inline">\(Pr(\text{K} \mid \text{S}) \gg 0.001\)</span>. <span class="math inline">\(\square\)</span></p>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sagt jemand: “Die Wahrscheinlichkeit von A ist x%”, frag immer: “gegeben welcher Annahmen, welcher Evidenz?”</p>
</div>
</div>
<div id="def-wskt" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.9 (Wahrscheinlichkeit)</strong></span> Die Wahrscheinlichkeit ist ein Maß für die Plausibilität einer Aussage <span class="math inline">\(A\)</span>, gegeben gewisser Hintergrundinformationen (Daten, <span class="math inline">\(D\)</span>): <span class="math inline">\(Pr(A|D)\)</span>. Die Wahrscheinlichkeit eines Ereignisses wird (sofern berechenbar) als Zahl zwischen 0 und 1 angegeben, wobei 0 bedeutet, dass das Ereignis als unmöglich angesehen wird, und 1 bedeutet, dass das Ereignis als sicher betrachtet wird. Je näher die Wahrscheinlichkeit bei 1 (0) liegt, desto sicherer ist jemand, dass das Ereignis (nicht) der Fall ist.<span class="math inline">\(\square\)</span></p>
</div>
<p>Die Wahrscheinlichkeitsrechnung ist die typische Methode, um Ungewissheit zu präzisieren, d.h. zu quantifizieren.</p>
<div id="exm-prob" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.10 (Kann Sophia (Einhorn) fliegen?)</strong></span> Sei <span class="math inline">\(A\)</span>: “Sophia ist ein Einhorn”. Und sei <span class="math inline">\(B\)</span>: “Einhörner mit Flügen können fliegen und die Hälfter aller Einhörner hat Flügel”. Dann ist <span class="math inline">\(Pr(A|B) = 1/2\)</span>. <span class="math inline">\(\square\)</span></p>
</div>
</section><section id="ist-der-locurator-im-zustand-alpha" class="level3 {exm-prob2}" data-number="2.7.3"><h3 data-number="2.7.3" class="anchored" data-anchor-id="ist-der-locurator-im-zustand-alpha">
<span class="header-section-number">2.7.3</span> Ist der Locurator im Zustand alpha?</h3>
<p><span class="math inline">\(B\)</span>: “Locuratoren kommen in zwei Zuständen vor, alpha und beta. Und zwar gleich häufig”. Vor Ihnen steht ein Locurator. Wie groß ist die Wahrscheinlichkeit, dass der Locurator im Zustand alpha ist, gegeben unseres Hintergrundwissens? Es gilt: <span class="math inline">\(Pr(\text{Locurator ist im Zustand alpha} | A) = 1/2\)</span>. <span class="math inline">\(\square\)</span></p>
</section><section id="ich-werfe-zahl-beim-nächsten-münzwurf" class="level3 {exm-prob3}" data-number="2.7.4"><h3 data-number="2.7.4" class="anchored" data-anchor-id="ich-werfe-zahl-beim-nächsten-münzwurf">
<span class="header-section-number">2.7.4</span> Ich werfe Zahl beim nächsten Münzwurf</h3>
<p><span class="math inline">\(B\)</span> “Ich habe keinen Grund an der Fairness der Münze zu zweifeln”. <span class="math inline">\(A\)</span>: “Es wird <em>Zahl</em> geworfen beim nächsten Wurf dieser Münze”. Es gilt: <span class="math inline">\(Pr(A|B) = 1/2\)</span>. <span class="math inline">\(\square\)</span></p>
</section></section><section id="frequentistische-inferenz-vs.-bayes-inferenz" class="level2" data-number="2.8"><h2 data-number="2.8" class="anchored" data-anchor-id="frequentistische-inferenz-vs.-bayes-inferenz">
<span class="header-section-number">2.8</span> Frequentistische Inferenz vs.&nbsp;Bayes-Inferenz</h2>
<p>Es gibt zwei Hauptarten von Inferenzstatistik: Frequentistische Inferenz und Bayes-Inferenz.</p>
<div class="columns">
<div class="column">
<p><strong>Frequentismus: Klassische Inferenz</strong></p>
<ol type="1">
<li>Die Berücksichtigung von Vorwissen zum Sachgegenstand wird vom Frequentismus als subjektiv zurückgewiesen.</li>
<li>Nur die Daten selber fliesen in die Ergebnisse ein, keine Vorannahmen.</li>
<li>Wahrscheinlichkeit wird über relative Häufigkeiten definiert.</li>
<li>Es ist <em>nicht</em> möglich, die Wahrscheinlichkeit einer Hypothese bzw. eines Werts in der Population (eines Parameters) anzugeben.</li>
<li>Stattdessen wird angegeben, wie häufig eine vergleichbare Datenlage zu erwarten ist, wenn der Versuch sehr häufig (unendlich oft) wiederholt ist.</li>
<li>Ein Großteil der Forschung (in den Sozialwissenschaften) verwendet (aktuell) diesen Ansatz.</li>
</ol>
</div><div class="column">
<p><strong>Bayesianische Inferenz</strong></p>
<ul>
<li>Vorwissen (Priori-Wissen) fließt explizit in die Analyse ein (zusammen mit den Daten).</li>
<li>
<em>Wenn</em> das Vorwissen gut ist, wird die Vorhersage durch das Vorwissen genauer, ansonsten ungenauer.</li>
<li>Die Wahl des Vorwissens muss explizit (kritisierbar) sein.</li>
<li>In der Bayes-Inferenz sind Wahrscheinlichkeitsaussagen für Hypothesen möglich.</li>
<li>Die Bayes-Inferenz erfordert mitunter viel Rechenzeit und ist daher erst in den letzten Jahren (für gängige Computer) komfortabel geworden.</li>
</ul>
</div>
</div>
<section id="bayes-inferenz" class="level4" data-number="2.8.0.1"><h4 data-number="2.8.0.1" class="anchored" data-anchor-id="bayes-inferenz">
<span class="header-section-number">2.8.0.1</span> Bayes-Inferenz</h4>
<p>Die zentrale Statistik der Bayes-Inferenz bzw. (synonym) Bayes-Statistik ist die <em>Posteriori-Verteilung</em>.</p>
<p>Die Posteriori-Verteilung beantwortet uns die Frage: “Wie wahrscheinlich ist die Forschungshypothese (oder Varianten von ihr), jetzt, nachdem wir die Daten kennen, auf Basis unseres Modells?”</p>
<p>In der Bayes-Statistik sind Aussagen folgender Art erlaubt:</p>
<blockquote class="blockquote">
<p>Mit einer Wahrscheinlichkeit von 95% ist der neue Webshop besser als der alte. Mit einer Wahrscheinlichkeit von 89% liegt die Wirksamkeit des neuen Medikaments zwischen 0.1 und 0.4.</p>
</blockquote>
<p><a href="https://data-se.netlify.app/2022/01/27/warum-bayes/">In diesem Post</a> wird für Bayes geworben und (einseitig) Stellung pro Bayes bezogen.</p>
</section><section id="frequentistische-inferenz" class="level3" data-number="2.8.1"><h3 data-number="2.8.1" class="anchored" data-anchor-id="frequentistische-inferenz">
<span class="header-section-number">2.8.1</span> Frequentistische Inferenz</h3>
<section id="der-p-wert" class="level4" data-number="2.8.1.1"><h4 data-number="2.8.1.1" class="anchored" data-anchor-id="der-p-wert">
<span class="header-section-number">2.8.1.1</span> Der p-Wert</h4>
<p>Der zentrale Kennwert der Frequentistische Inferenzdes (synonym: Frequentismus) heißt der <em>p-Wert</em>.</p>
<p>Der <em>p</em>-Wert ist so definiert, vgl. <span class="citation" data-cites="wasserstein2016">Wasserstein &amp; Lazar (<a href="#ref-wasserstein2016" role="doc-biblioref">2016</a>)</span>:</p>
<blockquote class="blockquote">
<p>Wie hoch ist die Wahrscheinlichkeit (Pr) der Teststatistik <span class="math inline">\(T\)</span> (oder noch extremere Werte, <span class="math inline">\(T'\)</span>), vorausgesetzt die Nullhypothese <span class="math inline">\(H_0\)</span> gilt und man wiederholt den Versuch unendlich oft (mit gleichen Bedingungen, aber zufällig verschieden und auf Basis unseres Modells)?</p>
</blockquote>
<p>Kurz gesagt: <span class="math inline">\(p := Pr(T'  \ge T| H_0)\)</span>.</p>
<div id="exr-p" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 2.9</strong></span> 🏋 Recherchieren Sie eine Definition des <em>p</em>-Werts und lesen Sie sie einem Freund. Beobachten sie die Reaktionen auf Ihre Erklärung.<span class="math inline">\(\square\)</span></p>
</div>
<p>Der p-Wert wird oft falsch verstanden <span class="citation" data-cites="badenes-ribera2016">(<a href="#ref-badenes-ribera2016" role="doc-biblioref">Badenes-Ribera et al., 2016</a>)</span>. Aber er ist auch nicht leicht zu verstehen, meint Meister Yoda, s. <a href="#fig-yoda" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-yoda</span></a>. Hier sind einige <em>FALSCHE</em> Interpretationen zum p-Wert laut der Autoren:</p>
<ul>
<li>🙅‍♀ Der p-Wert würde die Wahrscheinlichkeit der Nullhypothese oder der Forschungshypothese angeben. 🙊 FALSCH!</li>
<li>🙅‍♀ Der p-Wert würde ein inhaltlich bedeutsames, praktisch signifikantes Ergebnis anzeigen. 🙊 FALSCH!</li>
</ul>
<div id="fig-yoda" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-yoda-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/pvalue-yoda.jpg" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-yoda-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.15: Der p-Wert ist wenig intuitiv, meint Meister Yoda
</figcaption></figure>
</div>
</section><section id="konfidenzintervalle" class="level4" data-number="2.8.1.2"><h4 data-number="2.8.1.2" class="anchored" data-anchor-id="konfidenzintervalle">
<span class="header-section-number">2.8.1.2</span> Konfidenzintervalle</h4>
<p>Die korrekte Definition der Konfidenzintervalls in <em>frequentistischer</em> Lesart lautet:</p>
<blockquote class="blockquote">
<p>Der Konfidenzbereich, z.B. von 95%, repräsentiert den Anteil der Konfidenzintervalle bei sehr vielen (oder unentlich vielen) Wiederholungen des Experiments, die den echten Parameterwert enthalten <span class="citation" data-cites="hoekstra2014">(<a href="#ref-hoekstra2014" role="doc-biblioref">Hoekstra et al., 2014</a>)</span>.</p>
</blockquote>
<p>Die folgende Visualisierung (<a href="#fig-sim-ci" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-sim-ci</span></a>) zeigt das Prinzip frequentistischer Konfidenzintervalle: <em>Auf Dauer</em> enthalten 95% der Stichproben den wahren Wert (in der Population). <a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p>
<details class="code-fold hidden"><summary>Code</summary><div class="sourceCode cell-code hidden" id="cb11" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>viewof settings <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="fu">tex</span><span class="vs">`</span><span class="sc">\t</span><span class="vs">ext{MW, }</span><span class="sc">\m</span><span class="vs">u`</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span>})<span class="op">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">0.01</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="fu">tex</span><span class="vs">`</span><span class="sc">\t</span><span class="vs">ext{SD, }</span><span class="sc">\s</span><span class="vs">igma`</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span>})<span class="op">,</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">99</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Konfidenzlevel"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">,</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">200</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"n"</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span>})</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>viewof nrep <span class="op">=</span> <span class="fu">Scrubber</span>(d3<span class="op">.</span><span class="fu">ticks</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">1000</span><span class="op">,</span> <span class="dv">1000</span>)<span class="op">,</span> {</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">loop</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">initial</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">delay</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> <span class="vs">`number of datasets = </span><span class="sc">${</span>x<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>textinfo <span class="op">=</span> <span class="fu">md</span><span class="vs">`</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="vs">Von insgesamt </span><span class="sc">${</span>nrep<span class="sc">}</span><span class="vs"> Stichproben, </span><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(dataci<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">rep</span> <span class="op">&lt;=</span> nrep <span class="op">&amp;&amp;</span> (mu <span class="op">&gt;=</span> d<span class="op">.</span><span class="at">lower</span> <span class="op">&amp;&amp;</span> mu <span class="op">&lt;=</span> d<span class="op">.</span><span class="at">upper</span>)))<span class="sc">}</span><span class="vs"> (**&lt;span style="color:red"&gt;</span><span class="sc">${</span>(d3<span class="op">.</span><span class="fu">sum</span>(dataci<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">rep</span> <span class="op">&lt;=</span> nrep <span class="op">&amp;&amp;</span> (mu <span class="op">&gt;=</span> d<span class="op">.</span><span class="at">lower</span> <span class="op">&amp;&amp;</span> mu <span class="op">&lt;=</span> d<span class="op">.</span><span class="at">upper</span>)))<span class="op">*</span><span class="dv">100</span><span class="op">/</span>nrep)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">%&lt;/span&gt;**) von den </span><span class="sc">${</span>confidence<span class="sc">}</span><span class="vs">% Konfindenzintervallen enthielten den wahren (tatsächlichen) Populationswert </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\m</span><span class="vs">u= `</span><span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>mu<span class="sc">}</span><span class="vs">.</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>lockvertical <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Achse einrasten"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>plt <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {<span class="dt">fontSize</span><span class="op">:</span> <span class="st">"12px"</span>}<span class="op">,</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">960</span><span class="op">,</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"mean"</span><span class="op">,</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> lockvertical <span class="op">?</span> [mu <span class="op">-</span> <span class="dv">3</span><span class="op">,</span> mu <span class="op">+</span> <span class="dv">3</span>] <span class="op">:</span> [mu <span class="op">-</span> <span class="dv">5</span> <span class="op">*</span> sigma <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(nobs)<span class="op">,</span> mu <span class="op">+</span> <span class="dv">5</span> <span class="op">*</span> sigma <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(nobs)]</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Stichprobennummer"</span><span class="op">,</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span>  [<span class="dv">0</span><span class="op">,</span> nrep]</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleX</span>([<span class="dv">0</span>])<span class="op">,</span>    </span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleX</span>(dataci<span class="op">,</span> {</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>      <span class="dt">filter</span><span class="op">:</span> d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">rep</span> <span class="op">&lt;=</span> nrep <span class="op">&amp;&amp;</span> mu <span class="op">&gt;=</span> d<span class="op">.</span><span class="at">lower</span> <span class="op">&amp;&amp;</span> mu <span class="op">&lt;=</span> d<span class="op">.</span><span class="at">upper</span>)<span class="op">,</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"rep"</span><span class="op">,</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y1</span><span class="op">:</span> <span class="st">"lower"</span><span class="op">,</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y2</span><span class="op">:</span> <span class="st">"upper"</span><span class="op">,</span>  </span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"steelblue"</span><span class="op">,</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">1.5</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(dataci<span class="op">,</span> {<span class="dt">filter</span><span class="op">:</span> d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">rep</span> <span class="op">&lt;=</span> nrep <span class="op">&amp;&amp;</span> mu <span class="op">&gt;=</span> d<span class="op">.</span><span class="at">lower</span> <span class="op">&amp;&amp;</span> mu <span class="op">&lt;=</span> d<span class="op">.</span><span class="at">upper</span>)<span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"rep"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"xbar"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"steelblue"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleX</span>(dataci<span class="op">,</span> {</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>      <span class="dt">filter</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">rep</span> <span class="op">&lt;=</span> nrep <span class="op">&amp;&amp;</span> (mu <span class="op">&lt;</span> d<span class="op">.</span><span class="at">lower</span> <span class="op">||</span> mu <span class="op">&gt;</span> d<span class="op">.</span><span class="at">upper</span>)<span class="op">,</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"rep"</span><span class="op">,</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y1</span><span class="op">:</span> <span class="st">"lower"</span><span class="op">,</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y2</span><span class="op">:</span> <span class="st">"upper"</span><span class="op">,</span>  </span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="st">"orange"</span><span class="op">,</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">1.5</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">dot</span>(dataci<span class="op">,</span> {<span class="dt">filter</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">rep</span> <span class="op">&lt;=</span> nrep <span class="op">&amp;&amp;</span> (mu <span class="op">&lt;</span> d<span class="op">.</span><span class="at">lower</span> <span class="op">||</span> mu <span class="op">&gt;</span> d<span class="op">.</span><span class="at">upper</span>)<span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"rep"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"xbar"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"orange"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([mu]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#D22B2B"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">1.5</span>})</span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>jstat <span class="op">=</span> <span class="pp">require</span>(<span class="st">'jstat'</span>)</span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {Scrubber} <span class="im">from</span> <span class="st">"@mbostock/scrubber"</span></span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-61"><a href="#cb11-61" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">simulate_means</span>(mu<span class="op">,</span> sigma<span class="op">,</span> nobs<span class="op">,</span> nrep){</span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tvalue <span class="op">=</span> jstat<span class="op">.</span><span class="at">studentt</span><span class="op">.</span><span class="fu">inv</span>(<span class="dv">1</span> <span class="op">-</span> (<span class="dv">1</span> <span class="op">-</span> (confidence <span class="op">/</span> <span class="dv">100</span>)) <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> nobs <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb11-63"><a href="#cb11-63" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> dataci <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb11-64"><a href="#cb11-64" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> nrep<span class="op">;</span> j<span class="op">++</span>){</span>
<span id="cb11-65"><a href="#cb11-65" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sample <span class="op">=</span> d3<span class="op">.</span><span class="fu">range</span>(nobs)<span class="op">.</span><span class="fu">map</span>(() <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="fu">randomNormal</span>(mu<span class="op">,</span> sigma)())<span class="op">;</span></span>
<span id="cb11-66"><a href="#cb11-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> xbar <span class="op">=</span> d3<span class="op">.</span><span class="fu">mean</span>(sample)<span class="op">;</span></span>
<span id="cb11-67"><a href="#cb11-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> s <span class="op">=</span> jstat<span class="op">.</span><span class="fu">stdev</span>(sample<span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span> </span>
<span id="cb11-68"><a href="#cb11-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> lower <span class="op">=</span> xbar <span class="op">-</span> tvalue <span class="op">*</span> s <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(nobs)<span class="op">;</span></span>
<span id="cb11-69"><a href="#cb11-69" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> upper <span class="op">=</span> xbar <span class="op">+</span> tvalue <span class="op">*</span> s <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(nobs)<span class="op">;</span></span>
<span id="cb11-70"><a href="#cb11-70" aria-hidden="true" tabindex="-1"></a>    dataci<span class="op">.</span><span class="fu">push</span>({<span class="dt">rep</span><span class="op">:</span> j<span class="op">,</span> <span class="dt">xbar</span><span class="op">:</span> xbar<span class="op">,</span> <span class="dt">lower</span><span class="op">:</span> lower<span class="op">,</span> <span class="dt">upper</span><span class="op">:</span> upper})<span class="op">;</span></span>
<span id="cb11-71"><a href="#cb11-71" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-72"><a href="#cb11-72" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dataci<span class="op">;</span></span>
<span id="cb11-73"><a href="#cb11-73" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-74"><a href="#cb11-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-75"><a href="#cb11-75" aria-hidden="true" tabindex="-1"></a>mu <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-76"><a href="#cb11-76" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-77"><a href="#cb11-77" aria-hidden="true" tabindex="-1"></a>confidence <span class="op">=</span> <span class="dv">90</span></span>
<span id="cb11-78"><a href="#cb11-78" aria-hidden="true" tabindex="-1"></a>nobs <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb11-79"><a href="#cb11-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-80"><a href="#cb11-80" aria-hidden="true" tabindex="-1"></a>dataci <span class="op">=</span> <span class="fu">simulate_means</span>(mu<span class="op">,</span> sigma<span class="op">,</span> nobs<span class="op">,</span> <span class="dv">1000</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="fig-sim-ci" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-sim-ci-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="figure-content">
<p><br><br><br><!-- Insert vertical space here --></p>
<!-- Source: https://observablehq.com/@mattiasvillani/confidence-interval-for-a-mean -->
<div class="cell">
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-10-13" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sim-ci-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.16: Ein frequentistisches 95%-Konfidenzintervall: Auf Dauer enthalten 95% der Konfidenzintervalle den wahren Wert in der Population.
</figcaption></figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ein frequentistisches Konfidenzintervall macht keine Aussage zur Wahrscheinlichkeit eines Werts in der Population (eines Parameters). Stattdessen wird eine Aussage über das Ergebnis einer sehr häufig wiederholten Stichprobenziehung berichtet. Ob ein bestimmtes (unseres, Ihres) den wahren Wert enthält, bzw. mit welcher Wahrscheinlichkeit es den wahren Wert enthält, darüber macht das frequentistische Konfidenzintervall keine Aussagen. <span class="math inline">\(\square\)</span></p>
</div>
</div>
</section></section><section id="statistische-signifikanz" class="level3" data-number="2.8.2"><h3 data-number="2.8.2" class="anchored" data-anchor-id="statistische-signifikanz">
<span class="header-section-number">2.8.2</span> Statistische Signifikanz</h3>
<p>Im <em>Frequentismus</em> spricht man von statistischer Signifikanz, wenn man <span class="math inline">\(p&lt;.05\)</span> (oder einen anderen Prozentwert als 5%, aber meistens wird 5% hergenommen), findet. Man nimmt diesen Befund als Beleg, dass man einen Effekt gefunden hat, die Hypothese eines Nulleffekts (z.B. kein Zusammenhang von X und Y) also verwerfen kann. Faktisch entscheidet man sich, die Forschungshypothese weiterhin als “vorläufig gültig” oder zumindest als “nicht widerlegt” zu betrachten.</p>
<p>In der <em>Bayes-Statistik</em> ist der Begriff der Signifikanz nicht einheitlich definiert. Mit Bezug auf <span class="citation" data-cites="gelman2021">Gelman et al. (<a href="#ref-gelman2021" role="doc-biblioref">2021</a>)</span> (S. 57) wird in diesem Buch der Begriff wie folgt definiert - mit Gültigkeit sowohl für Bayes-Statistik als auch für Frequentistische Statistik.</p>
<div id="def-signifikanz" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.10 (Statistische Signifikanz)</strong></span> Ist der Wert Null nicht im Konfidenzintervall enthalten, so liegt ein statistisch signifikantes Ergebnis vor. <span class="math inline">\(\square\)</span></p>
</div>
<p>Oft werden 95%-Konfidenzintervalle verwendet, obwohl das nur eine Konvention ist. Die Signifikanzaussage bezieht sich immer auf ein Konfidenzintervall bestimmter Größe, z.B. 95% (und des Modells inklusive Daten).</p>
<p>Liegt ein statistisch signifikantes Ergebnis vor, so verwirft man die Nullhypothese.</p>
<div id="def-nullhyp" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.11 (Exakte Nullhypothese)</strong></span> Die exakte Nullhypothese (meist kurz nur als Nullhypothese bezeichnet), <span class="math inline">\(H_0\)</span>, besagt, dass <em>kein</em> (null) Effekt (keine Abweichung vom Referenzwert, kein Unterschied zwischen Gruppen, kein Zusammenhang zwischen UV und AV, Veränderung vor vs.&nbsp;nach der Intervention, …) vorliegt. <span class="math inline">\(\square\)</span></p>
</div>
<div id="exm-effekt" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.11 (Beispiele für Effekte)</strong></span> &nbsp;</p>
<ul>
<li>Die Trefferquote der Münze ist <span class="math inline">\(\pi = .7\)</span> (Kopf).</li>
<li>Der Unterschied im mittleren Gewicht zwischen den Gruppen beträgt ca. 500-600 g.</li>
<li>Der Korrelationskoeffizient <span class="math inline">\(\rho\)</span> liegt bei ca. .5 bis .7.</li>
<li>Der standardisierte Regressionskoeffizient <span class="math inline">\(\beta\)</span> liegt bei ca. .1 bis .2.</li>
<li>Der Unterschied in Gestimmtheit vor vs.&nbsp;nach der Induktion von Einsamkeit liegt bei <span class="math inline">\(X_d = .3\)</span>. <span class="math inline">\(\square\)</span>
</li>
</ul>
</div>
<div id="exm-nullhyp" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.12 (Beispiele für Nullhypothesen)</strong></span> &nbsp;</p>
<ol type="A">
<li>H₀: μ = 100 (Der Populationsmittelwert beträgt 100)</li>
<li>H₀: μ₁ = μ₂ (Es gibt keinen Unterschied zwischen den Mittelwerten zweier Gruppen)</li>
<li>H₀: ρ = 0 (Es besteht kein linearer Zusammenhang zwischen zwei Variablen)</li>
<li>H₀: π = 0,5 (Die Wahrscheinlichkeit für “Erfolg” beträgt 50%; die Münze ist “fair”)</li>
<li>H₀: μ₁ = μ₂ = μ₃ = μ₄ (Alle Gruppenmittelwerte sind gleich; bei ANOVA)</li>
<li>H₀: β₁ = 0 (Der Regressionskoeffizient ist null; kein Effekt des Prädiktors)</li>
<li>H₀: σ₁² = σ₂² (Die Varianzen zweier Populationen sind gleich) <span class="math inline">\(\square\)</span>
</li>
</ol>
</div>
<p>Statistische Signifikanz ist eine Funktion der Stichprobengröße: Wenn die Stichprobe groß genug ist, wird jeder Test signifikant. Daher hat ein signifikantes Ergebnis zwei mögliche Ursachen: Der Effekt ist groß oder (auch) die Stichprobe ist groß.</p>
<p>Übrigens sollte man nicht nur von “Signifikanz”, sondern von “statistischer Signifikanz” sprechen, um klar zu machen, dass man nicht ein Alltagsverständnis von Signifikanz (“groß”, “bedeutsam”) meint, sondern einen wohl definierten statistischen Begriff. Das ist wichtig, weil es sonst leicht zu Fehlinterpretationen kommt.</p>
<p><span class="citation" data-cites="makowski2019">Makowski et al. (<a href="#ref-makowski2019" role="doc-biblioref">2019</a>)</span> schlagen vor, welche Kennwerte der Bayes-Statistik analog zum <span class="math inline">\(p\)</span>-Wert herangezogen werden können. Eine Möglichkeit dafür ist der Kennwert <em>pd</em> (<em>probability of direction</em>).</p>
<div id="def-pd" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.12 (Pobability of Direction (pd))</strong></span> Der Kennwert <em>pd</em> variiert zwischen 50 und 100% und kann als Wahrscheinlichkeit verstanden werden, dass ein Parameter streng positiv oder negativ ist (je nach dem, was von beiden wahrscheinlicher ist). Der Kennwert ist definiert als der Anteil der Posteriori-Verteilung, der das gleiche Vorzeichen hat wie der Median.</p>
</div>
<div id="exm-pd" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.13</strong></span> Im Modell <code>m6</code>, s. <a href="#tbl-m106-params" class="quarto-xref">Tabelle&nbsp;<span class="quarto-unresolved-ref">tbl-m106-params</span></a> in <a href="#sec-yg" class="quarto-xref"><span class="quarto-unresolved-ref">sec-yg</span></a> wird das mittlere Gewicht von drei Pinguinrassen verglichen. Das Modell resümiert, dass die Rasse <em>Gentoo</em> mit 100% Wahrscheinlichkeit einen höheren Gewichtsmittelwert hat als die Rasse <em>Adelie</em>: <span class="math inline">\(pd = 1\)</span>. Mit Blick auf die Rasse <em>Chinstrap</em> geht das Modell von einer Wahrscheinlichkeit von von ca. 69% aus, <span class="math inline">\(pd=.69\)</span> (für ein höheres mittleres Gewicht im Vergleich zur Referenzgruppe, Chinstrap). <span class="math inline">\(\square\)</span></p>
</div>
</section><section id="praktisch-bedeutsame-signifikanz" class="level3" data-number="2.8.3"><h3 data-number="2.8.3" class="anchored" data-anchor-id="praktisch-bedeutsame-signifikanz">
<span class="header-section-number">2.8.3</span> Praktisch bedeutsame Signifikanz</h3>
<p>In vielen Forschungskontexten ist die Nullhypothese von vornhinein (apriori) als falsch bekannt, vgl. <span class="citation" data-cites="gelman2021">Gelman et al. (<a href="#ref-gelman2021" role="doc-biblioref">2021</a>)</span>, S. 59: “In many problems we do not think the null hypothesis can be true”, “just about every treament one might consider will have <em>some</em> effect (…) We do not find it particularly helpflul to formulate and tests null hypotheses that we know ahead of timme cannot be true”.</p>
<p>Man bedenke, dass eine Aussage wie “der Effekt ist null” bedeutet, dass der Wert <em>exakt</em> null ist, also <span class="math inline">\(0,00000000000000 \ldots\)</span> und *nicht etwa <span class="math inline">\(0,000000000001\)</span>. Das ist eine sehr starke Aussage.</p>
<div id="exm-nullistfalsch" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.14 (Beispiele für Nullhypothesen, die (fast) sicher falsch apriori falsch sind)</strong></span> &nbsp;</p>
<ul>
<li>Die Mittelwerte der beiden Gruppen sind (exakt) gleich.</li>
<li>Die Trefferwahrscheinlichkeit der Münze beträgt (exakt) 50%.</li>
<li>Patienten, die mit der neuen Therapie behandelt wurden, haben (exakt) die gleichen Heilungsraten (wie Patienten, die mit der alten Therapie behandelt wurden). <span class="math inline">\(\square\)</span>
</li>
</ul>
</div>
<p>Neuere Ansätze in der (Bayes-)Statistik erlauben daher anstelle von Exakt-Nullhypothesen auch Ungefähr-Nullhypothesen zu testen.</p>
<div id="def-ungefährnull" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.13 (Ungefähr-Nullhypothese)</strong></span> Eine Ungefähr-Nullhypothese definiert nicht nur null, sondern einen Bereich um die Null herum als “keinen” bzw. “nicht bedeutsamen” Effekt. Findet sich ein Ergebnis, das in diesen Bereich nicht bedeutsamer Werte fällt, so ist das Ergebnis nicht praktisch bedeutsam signifikant. Anders gesagt: Der Effekt ist vernachlässigbar klein. <span class="math inline">\(\square\)</span></p>
</div>
<div id="exm-ungefährnull" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 2.15 (Beispiele für Ungefähr-Nullhypothesen)</strong></span> Eine Forschungsgruppe testet ein neues Krebsmedikament. Es wird davon ausgegangen, dass das Medikament nur dann einen substanziellen Effekt hat, wenn die Heilungsrate sich um mindestens 5 Prozentpunkte erhöht.</p>
<p>Eine Psychologin testet die Akzeptanz von Robotern durch Testpersonen in Abhängigkeit davon, ob die Roboterstimme das gleiche Geschlecht aufweist wie die jeweilige Versuchsperson. Die Forscherin definiert einen Unterschied ab einer drittel Standardabweichung als substanziell. <span class="math inline">\(\square\)</span></p>
</div>
</section></section><section id="aus-der-forschung-vertiefung" class="level2" data-number="2.9"><h2 data-number="2.9" class="anchored" data-anchor-id="aus-der-forschung-vertiefung">
<span class="header-section-number">2.9</span> Aus der Forschung (Vertiefung<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>)</h2>
<p>Frequentistische Konfidenzintervalle werden oft falsch verstanden, wie die folgende Studie zeigt. Das liegt aber nicht daran, dass die Menschen zu dumm sind, sondern dass frequentistische Konfidenzintervalle für viele Menschen kontraintuitiv sind.</p>
<p><span class="citation" data-cites="hoekstra2014">Hoekstra et al. (<a href="#ref-hoekstra2014" role="doc-biblioref">2014</a>)</span> berichten von einer Studie, in der <span class="math inline">\(n=442\)</span> Bachelor-Studentis, <span class="math inline">\(n=34\)</span> Master-Studentis und <span class="math inline">\(n=120\)</span> Forschende befragt wurden.</p>
<p>Den Versuchpersonen wurde folgender Fragebogen vorgelegt, s. <a href="#fig-bumbledorf" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-bumbledorf</span></a>.</p>
<div id="fig-bumbledorf" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-bumbledorf-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/bumbledorf.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bumbledorf-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.17: Frageobgen zu Konfidenzintervallen
</figcaption></figure>
</div>
<p>Kurz gesagt war die Frage, die die Befragten beantworten sollten:</p>
<blockquote class="blockquote">
<p>In einem Experiment wird ein 95%-Konfidenzintervall mit dem Bereich von 0.1 bis 0.4 beichtet. Welcher der folgenden sechs Aussagen sind richtig bzw. falsch?</p>
</blockquote>
<p>Mit “Konfidenzintervall” meinen die Forschenden ein <em>frequentistisches</em> Konfidenzintervall.</p>
<p>Alle diese sechs Aussagen sind <em>FALSCH</em>. Die Aussagen lauten:</p>
<ol type="1">
<li><p>Die Wahrscheinlichkeit, dass der wahre Mittelwert größer als 0 ist, beträgt mindestens 95 %.</p></li>
<li><p>Die Wahrscheinlichkeit, dass der wahre Mittelwert gleich 0 ist, ist kleiner als 5 %.</p></li>
<li><p>Die „Nullhypothese“, dass der wahre Mittelwert gleich 0 ist, ist wahrscheinlich falsch.</p></li>
<li><p>Es gibt eine 95%ige Wahrscheinlichkeit, dass der wahre Mittelwert zwischen 0,1 und 0,4 liegt.</p></li>
<li><p>Wir können mit 95%iger Sicherheit sagen, dass der wahre Mittelwert zwischen 0,1 und 0,4 liegt.</p></li>
<li><p>Wenn wir das Experiment immer wieder wiederholen würden, dann liegt der wahre Mittelwert in 95 % der Fälle zwischen 0,1 und 0,4.</p></li>
</ol>
<p>Aussagen 1-4 weisen den Hypothesen bzw. den Parametern eine Wahrscheinlichkeit zu, was im Frequentismus nicht erlaubt ist. Aussagen 5-6 spezifizieren die Grenzen des Schätzintervalls, allerdings kann das Konfidenzintervall nur Aussagen zu den zugrundeliegenden Stichproben, nicht zum Schätzintervall, machen.</p>
<p>Die Ergebnisse zeigen, dass die Aussagen mehrheitlich <em>falsch</em> verstanden wurden, also mit “stimmt” angekreuzt wurden, s. <a href="#fig-ci-wrong" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-ci-wrong</span></a>.</p>
<div id="fig-ci-wrong" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-ci-wrong-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/ci-wrong.png" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ci-wrong-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.18: Eine hohe Zustimmung zu den sechs falschen Aussagen
</figcaption></figure>
</div>
<section id="frequentist-und-bayesianer" class="level3" data-number="2.9.1"><h3 data-number="2.9.1" class="anchored" data-anchor-id="frequentist-und-bayesianer">
<span class="header-section-number">2.9.1</span> Frequentist und Bayesianer</h3>
<p>Im Cartoon 1132 <a href="https://xkcd.com/">von xkcd</a> wird sich über das Nicht-Berücksichtigen von Vorab-Informationen (Prior-Verteilung) lustig gemacht, s. <a href="#fig-xkcd-bayes" class="quarto-xref">Abbildung&nbsp;<span class="quarto-unresolved-ref">fig-xkcd-bayes</span></a>.</p>
<div id="fig-xkcd-bayes" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-xkcd-bayes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/frequentists_vs_bayesians_2x.png" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-xkcd-bayes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2.19: Frequentist wettet mit Bayesianer
</figcaption></figure>
</div>
<p><a href="https://xkcd.com/1132/">Quelle</a></p>
<div>
<p><a href="https://imgflip.com/memegenerator">from Imgflip Meme Generator</a></p>
</div>
</section><section id="beispiel-zum-nutzen-von-apriori-wissen-1" class="level3" data-number="2.9.2"><h3 data-number="2.9.2" class="anchored" data-anchor-id="beispiel-zum-nutzen-von-apriori-wissen-1">
<span class="header-section-number">2.9.2</span> Beispiel zum Nutzen von Apriori-Wissen 1</h3>
<p>Ein Betrunkener behauptet, er könne hellsehen. Er wirft eine Münze 10 Mal und sagt jedes Mal korrekt vorher, welche Seite oben landen wird. Die Wahrscheinlichkeit dieses Ergebnisses ist sehr gering (<span class="math inline">\(2^{-10}\)</span>) unter der Hypothese, dass die Münze fair ist, dass Ergebnis also “zufällig” ist, also <span class="math inline">\(p &lt; .05\)</span> und damit ist das Ergebnis “statistisch signifikant”.</p>
<p>Unser Vorwissen lässt uns allerdings trotzdem an der Hellsichtigkeit des Betrunkenen zweifeln, so dass die meisten von uns die Hypothese von der Zufälligkeit des Ergebnisses wohl nicht verwerfen.</p>
</section><section id="beispiel-zum-nutzen-von-apriori-wissen-2" class="level3" data-number="2.9.3"><h3 data-number="2.9.3" class="anchored" data-anchor-id="beispiel-zum-nutzen-von-apriori-wissen-2">
<span class="header-section-number">2.9.3</span> Beispiel zum Nutzen von Apriori-Wissen 2</h3>
<p>Eine Studie <span class="citation" data-cites="gelman2021">(<a href="#ref-gelman2021" role="doc-biblioref">Gelman et al., 2021</a>)</span> fand einen “großen Effekt” auf das Einkommen von Babies, die eine Stunde pro Woche während zwei Jahren an einem psychosozialen Entwicklungsprogramm teilnahmen (im Vergleich zu einer Kontrollgruppe), <span class="math inline">\(n=127\)</span>. Nach 20 Jahren war das mittlere Einkommen der Experimentalgruppe um 42% höher (als in der Kontrollgruppe) mit einem Konfidenzintervall von [+2%,+98%].</p>
<p>Allerdings lässt uns unser Vorwissen vermuten, dass so ein Treatment das Einkommen nach 20 Jahren kaum verdoppeln lässt. Wir würden den Effekt lieber in einem konservativeren Intervall schätzen (enger um Null).</p>
</section></section><section id="fazit" class="level2" data-number="2.10"><h2 data-number="2.10" class="anchored" data-anchor-id="fazit">
<span class="header-section-number">2.10</span> Fazit</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://imgflip.com/i/77wn7m">Kontinuierliches Lernen</a> ist der Schlüssel zum Erfolg.</p>
</div>
</div>
</section><section id="aufgaben" class="level2" data-number="2.11"><h2 data-number="2.11" class="anchored" data-anchor-id="aufgaben">
<span class="header-section-number">2.11</span> Aufgaben</h2>
<p>Schauen Sie sich die Aufgaben mit dem Tag <em>inference</em> auf dem <a href="https://datenwerk.netlify.app/#category=inference">Datenwerk</a> an.</p>
<section id="paper-pencil-aufgaben" class="level3" data-number="2.11.1"><h3 data-number="2.11.1" class="anchored" data-anchor-id="paper-pencil-aufgaben">
<span class="header-section-number">2.11.1</span> Paper-Pencil-Aufgaben</h3>
<ol type="1">
<li><a href="https://datenwerk.netlify.app/posts/griech-buchstaben-inferenz/griech-buchstaben-inferenz/">Griech-Buchstaben-Inferenz</a></li>
<li><a href="https://datenwerk.netlify.app/posts/inferenz-fuer-alle/inferenz-fuer-alle">inferenz-fuer-alle</a></li>
<li><a href="https://datenwerk.netlify.app/posts/ttest-als-regr/ttest-als-regr/">ttest-als-regr</a></li>
<li><a href="https://datenwerk.netlify.app/posts/ttest-skalenniveau/ttest-skalenniveau/">ttest-skalenniveau</a></li>
<li><a href="https://datenwerk.netlify.app/posts/warum-bayes/warum-bayes">Warum-Bayes</a></li>
<li><a href="https://datenwerk.netlify.app/posts/samples-nyc2/">samples-nyc2</a></li>
</ol></section><section id="aufgaben-für-die-man-einen-computer-braucht" class="level3" data-number="2.11.2"><h3 data-number="2.11.2" class="anchored" data-anchor-id="aufgaben-für-die-man-einen-computer-braucht">
<span class="header-section-number">2.11.2</span> Aufgaben, für die man einen Computer braucht</h3>
<ol type="1">
<li><a href="https://datenwerk.netlify.app/posts/korr-als-regr/korr-als-regr.html">korr-als-regr</a></li>
<li><a href="https://datenwerk.netlify.app/posts/punktschaetzer-reicht-nicht/punktschaetzer-reicht-nicht.html">punktschaetzer-reicht-nicht</a></li>
<li><a href="https://datenwerk.netlify.app/posts/ungewiss-arten-regr/ungewiss-arten-regr.html">ungewiss-arten-regr</a></li>
<li><a href="https://datenwerk.netlify.app/posts/inferenz-fuer-alle/inferenz-fuer-alle.html">inferenz-fuer-alle</a></li>
<li><a href="https://datenwerk.netlify.app/posts/adjustieren1a/adjustieren1a.html">adjustieren1a</a></li>
<li><a href="https://datenwerk.netlify.app/posts/adjustieren2a/adjustieren2a.html">adjustieren2a</a></li>
<li><a href="https://datenwerk.netlify.app/posts/lm-standardfehler/lm-standardfehler.html">lm-standardfehler</a></li>
<li><a href="https://datenwerk.netlify.app/posts/vorhersageintervall1/vorhersageintervall1.html">vorhersageintervall1</a></li>
</ol></section></section><section id="section" class="level2" data-number="2.12"><h2 data-number="2.12" class="anchored" data-anchor-id="section">
<span class="header-section-number">2.12</span> —</h2>
<p><img src="img/outro-02.jpg" class="img-fluid" style="width:100.0%"></p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-badenes-ribera2016" class="csl-entry" role="listitem">
Badenes-Ribera, L., Frias-Navarro, D., Iotti, B., Bonilla-Campos, A., &amp; Longobardi, C. (2016). Misconceptions of the P-Value among <span>Chilean</span> and <span>Italian Academic Psychologists</span>. <em>Frontiers in Psychology</em>, <em>7</em>. <a href="https://www.frontiersin.org/article/10.3389/fpsyg.2016.01247">https://www.frontiersin.org/article/10.3389/fpsyg.2016.01247</a>
</div>
<div id="ref-gelman2021" class="csl-entry" role="listitem">
Gelman, A., Hill, J., &amp; Vehtari, A. (2021). <em>Regression and Other Stories</em>. Cambridge University Press.
</div>
<div id="ref-hoekstra2014" class="csl-entry" role="listitem">
Hoekstra, R., Morey, R. D., Rouder, J. N., &amp; Wagenmakers, E.-J. (2014). Robust Misinterpretation of Confidence Intervals. <em>Psychonomic bulletin &amp; review</em>, <em>21</em>(5), 1157–1164. <a href="http://www.ejwagenmakers.com/inpress/HoekstraEtAlPBR.pdf">http://www.ejwagenmakers.com/inpress/HoekstraEtAlPBR.pdf</a>
</div>
<div id="ref-makowski2019" class="csl-entry" role="listitem">
Makowski, D., Ben-Shachar, M. S., Chen, S. H. A., &amp; Lüdecke, D. (2019). Indices of <span>Effect Existence</span> and <span>Significance</span> in the <span>Bayesian Framework</span>. <em>Frontiers in Psychology</em>, <em>10</em>. <a href="https://www.frontiersin.org/article/10.3389/fpsyg.2019.02767">https://www.frontiersin.org/article/10.3389/fpsyg.2019.02767</a>
</div>
<div id="ref-poldrack2022" class="csl-entry" role="listitem">
Poldrack, R. (2022). <em>Statistical <span>Thinking</span> for the 21st <span>Century</span></em>. <a href="https://statsthinking21.github.io/statsthinking21-core-site/index.html">https://statsthinking21.github.io/statsthinking21-core-site/index.html</a>
</div>
<div id="ref-shmueli2010" class="csl-entry" role="listitem">
Shmueli, G. (2010). To <span>Explain</span> or to <span>Predict</span>? <em>Statistical Science</em>, <em>25</em>(3), 289–310. <a href="https://doi.org/10.1214/10-STS330">https://doi.org/10.1214/10-STS330</a>
</div>
<div id="ref-wasserstein2016" class="csl-entry" role="listitem">
Wasserstein, R. L., &amp; Lazar, N. A. (2016). The <span>ASA</span>’s <span>Statement</span> on p-<span>Values</span>: <span>Context</span>, <span>Process</span>, and <span>Purpose</span>. <em>The American Statistician</em>, <em>70</em>(2), 129–133. <a href="https://doi.org/10.1080/00031305.2016.1154108">https://doi.org/10.1080/00031305.2016.1154108</a>
</div>
</div>
</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Ziele existieren nicht “in echt” in der Welt. Wir denken sie uns aus. Ziele haben also keine ontologische Wirklichkeit, sie sind epistemologische Dinge (existieren nur in unserem Kopf). Das heißt, dass man sich nach Belieben Ziele ausdenken kann. Allerdings hilft es, wenn man andere Menschen vom Nutzen der eigenen Ideen überzeugen kann.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Vielleicht hat Ihr Dozent Sie schon mal mit einem Prognosewettbewerb gequält? Ja? Genau! In einem Prognosewettbewerb ist das Ziel eine - natürlich möglichst exakte - Vorhersage zu treffen.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Statistische Inferenz sieht sich drei “Herausforderungen” gegenüber, laut <span class="citation" data-cites="gelman2021">Gelman et al. (<a href="#ref-gelman2021" role="doc-biblioref">2021</a>)</span>, Kap. 1.1.; Diese betreffen das Schließen (oder Generalisieren) vom Einzelfall auf das Allgemeine: 1. Von der Stichprobe aus die Grundgesamtheit (Population), 2. Von der Experimental- auf die Kontrollgruppe (Kausalinferenz), 3. Von einem Messwert auf das zugrundeliegende Konstrukt. In diesem Kurs beschäftigen wir uns mit den ersten beiden Herausforderungen.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><del>Meistens</del> Manchmal darf man bei der Statistik nicht nach einem tieferen Sinn suchen. Ist Statistik eine Art moderne Kunst?<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Manch einer hätte mit mehr gerechnet; andere mit weniger…<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Das ist natürlich nur ein fiktives, komplett unrealistisches Beispiel, das auch unklaren Ursachen den Weg auf diese Seite gefunden hat.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Das ist natürlich nur ein fiktives, komplett unrealistisches Beispiel, das auch unklaren Ursachen den Weg auf diese Seite gefunden hat.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="https://gallery.shinyapps.io/simple_regression/" class="uri">https://gallery.shinyapps.io/simple_regression/</a><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Wie Jonas <a href="https://lindeloev.github.io/tests-as-linear/">Kristoffer Lindeløv</a> uns erklärt, sind viele statistische Verfahren, wie der sog. t-Test Spezialfälle der Regression.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Der Datensatz <code>mtcars</code> wird gerne als Studienobjekt verwendet, da er einfach ist und für viele Beispiele geeignet. Wenn Sie sich einen Sachverhalt an einem einfachen Datensatz vergegenwärtigen wollen, bietet sich auch der Datensatz <code>mtcars</code> an. Zudem ist er “fest in R eingebaut”; mit <code>data(mtcars)</code> können Sie ihn verfügbar machen.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p><span class="math inline">\(\sigma\)</span>, das griechische <em>s</em> für Streuung (um die Regressionsgerade herum), manchmal wird auch e wie <em>error</em> verwendet<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Tatsächlich gibt es mehrere Synonyme oder ähnliche Begriffe für Konfidenzintervall. Wir kommen später darauf detaillierter zu sprechen.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>Siehe auch <a href="https://rpsychologist.com/d3/ci/">hier</a> für eine schöne Visualisierung von <a href="https://rpsychologist.com/">RPsychologist</a>.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>nicht prüfungsrelevant<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InJlc2V0QnV0dG9uID0ge1xuICBjb25zdCByZXNldEJ1dHRvbiA9IElucHV0cy5idXR0b24oXCJSZXNldFwiKTtcblxuICBkMy5zZWxlY3QocmVzZXRCdXR0b24pLm9uKFwiaW5wdXRcIiwgKCkgPT4ge1xuXG4gICAgcmVncmVzc2lvblBsb3QucmVzZXQoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc2V0QnV0dG9uO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld09wdGlvbnMgPSB7XG4gIGNvbnN0IHZpZXdPcHRpb25zID0gSW5wdXRzLnJhZGlvKFxuICAgIFtcIk5vbmVcIiwgXCJBYnNvbHV0ZSBFcnJvclwiLCBcIlNxdWFyZWQgRXJyb3JcIl0sXG4gICAgeyBsYWJlbDogXCJWaWV3XCIsIHZhbHVlOiBcIkFic29sdXRlIEVycm9yXCIgfVxuICApO1xuXG4gIGQzLnNlbGVjdCh2aWV3T3B0aW9ucykub24oXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgcmVncmVzc2lvblBsb3QudXBkYXRlVmlldyh2aWV3T3B0aW9ucy52YWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiB2aWV3T3B0aW9ucztcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InJTcXVhcmVkUGxvdCA9IFJTcXVhcmVkUGxvdCh7IHdpZHRoOiB3aWR0aCB9KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoicmVncmVzc2lvblBsb3QgPSB7XG4gIGNvbnN0IHJlZ3Jlc3Npb25QbG90ID0gUmVncmVzc2lvblBsb3QoZGF0YS5zbGljZSgwLCAxKSwge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICB4RG9tYWluOiBbMCwgZDMubWF4KGRhdGEsIChbeF0pID0+IHgpICsgNV0sXG4gICAgeURvbWFpbjogWzAsIGQzLm1heChkYXRhLCAoW18sIHldKSA9PiB5KSArIDVdLFxuICAgIHI6IDYsXG4gICAgc2hvd0dyaWQ6IHRydWVcbiAgfSk7XG4gIC8vIEF0dGFjaCBsaXN0ZW5lclxuICBkMy5zZWxlY3QocmVncmVzc2lvblBsb3QpLm9uKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgIHJTcXVhcmVkUGxvdC51cGRhdGUodGhpcy52YWx1ZSwgdGhpcy50cmFuc2l0aW9uKTtcbiAgfSk7XG5cbiAgclNxdWFyZWRQbG90LnVwZGF0ZShyZWdyZXNzaW9uUGxvdC52YWx1ZSk7XG5cbiAgcmV0dXJuIHJlZ3Jlc3Npb25QbG90O1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoid2lkdGggPSA4MDBcbmRhdGEgPSB7XG4gIGNvbnN0IG51bVBvaW50cyA9IDE1O1xuICBjb25zdCB4U2NhbGUgPSAxMDtcbiAgY29uc3QgeFNoaWZ0ID0gNTtcbiAgY29uc3QgeVNjYWxlID0gNjtcbiAgY29uc3QgeVNoaWZ0ID0gMDtcblxuICBjb25zdCBkYXRhID0gZDMucmFuZ2UobnVtUG9pbnRzKS5tYXAoKGkpID0+IHtcbiAgICBjb25zdCB4Q29vcmQgPSB4U2hpZnQgKyB4U2NhbGUgKiBkMy5yYW5kb21Vbmlmb3JtKCkoKTtcbiAgICBjb25zdCB5Q29vcmQgPSB5U2hpZnQgKyB4Q29vcmQgKyB5U2NhbGUgKiBkMy5yYW5kb21Vbmlmb3JtKCkoKTtcblxuICAgIHJldHVybiBbeENvb3JkLCB5Q29vcmRdO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImFuaW1hdGlvbiA9IHtcbiAgLy8gUGVyZm9ybSBvcGVuaW5nIGFuaW1hdGlvblxuICBjb25zdCB0b3RhbFRpbWUgPSA2XzAwMDtcbiAgY29uc3QgZWFzZSA9IGQzLmVhc2VRdWFkT3V0O1xuXG4gIGQzLnJhbmdlKDEsIGRhdGEubGVuZ3RoKS5mb3JFYWNoKChpKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBbeENvb3JkLCB5Q29vcmRdID0gZGF0YVtpXTtcblxuICAgICAgcmVncmVzc2lvblBsb3QudXBkYXRlRGF0YXBvaW50KHhDb29yZCwgeUNvb3JkKTtcbiAgICB9LCB0b3RhbFRpbWUgKiBlYXNlKGkgLyBkYXRhLmxlbmd0aCkpO1xuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIFJTcXVhcmVkUGxvdCh7XG4gIGRhdGEsXG4gIG1hcmdpblRvcCA9IDAsIC8vIHRvcCBtYXJnaW4sIGluIHBpeGVsc1xuICBtYXJnaW5SaWdodCA9IDMwLCAvLyByaWdodCBtYXJnaW4sIGluIHBpeGVsc1xuICBtYXJnaW5Cb3R0b20gPSAwLCAvLyBib3R0b20gbWFyZ2luLCBpbiBwaXhlbHNcbiAgbWFyZ2luTGVmdCA9IDUzLCAvLyBsZWZ0IG1hcmdpbiwgaW4gcGl4ZWxzXG4gIHdpZHRoID0gNjQwLCAvLyBvdXRlciB3aWR0aCwgaW4gcGl4ZWxzXG4gIGhlaWdodCA9IDIwLCAvLyBvdXRlciBoZWlnaHQsIGluIHBpeGVsc1xuICBiYXJIZWlnaHQgPSAyNSwgLy8gaGVpZ2h0IG9mIGJhciwgaW4gcGl4ZWxzXG4gIHRpdGxlU2l6ZSA9IDIwLCAvLyBmb250c2l6ZSBvZiB0aXRsZSB0ZXh0XG4gIGxhYmVsU2l6ZSA9IDEyIC8vIGZvbnRzaXplIG9mIGxhYmVsIHRleHRcbn0gPSB7fSkge1xuICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSBkYXRhID0gMDtcblxuICBjb25zdCB4U2NhbGUgPSBkM1xuICAgIC5zY2FsZUxpbmVhcigpXG4gICAgLmRvbWFpbihbMCwgMV0pXG4gICAgLnJhbmdlKFttYXJnaW5MZWZ0LCB3aWR0aCAtIG1hcmdpblJpZ2h0XSk7XG5cbiAgY29uc3Qgc3ZnID0gZDNcbiAgICAuY3JlYXRlKFwic3ZnXCIpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpXG4gICAgLmF0dHIoXCJ2aWV3Qm94XCIsIFswLCAwLCB3aWR0aCwgaGVpZ2h0XSlcbiAgICAuYXR0cihcInN0eWxlXCIsIFwibWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGhlaWdodDogaW50cmluc2ljO1wiKTtcblxuICAvLyBEcmF3IHRpdGxlLlxuICBjb25zdCB0aXRsZUdyb3VwID0gc3ZnLmFwcGVuZChcImdcIik7XG5cbiAgLy8gdGl0bGVHcm91cFxuICAvLyAgIC5hcHBlbmQoXCJsaW5lXCIpXG4gIC8vICAgLmF0dHIoXCJzdHJva2VcIiwgXCJibGFja1wiKVxuICAvLyAgIC5hdHRyKFwieDFcIiwgeFNjYWxlKDApKVxuICAvLyAgIC5hdHRyKFwieDJcIiwgeFNjYWxlKDApKVxuICAvLyAgIC5hdHRyKFwieTFcIiwgMClcbiAgLy8gICAuYXR0cihcInkyXCIsIGhlaWdodCk7XG5cbiAgdGl0bGVHcm91cFxuICAgIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgLmF0dHIoXCJmaWxsXCIsIFwiYmxhY2tcIilcbiAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwiZW5kXCIpXG4gICAgLmF0dHIoXCJkb21pbmFudC1iYXNlbGluZVwiLCBcIm1pZGRsZVwiKVxuICAgIC5hdHRyKFwiZm9udC1mYW1pbHlcIiwgXCJzZXJpZlwiKVxuICAgIC5hdHRyKFwiZm9udC1zaXplXCIsIHRpdGxlU2l6ZSlcbiAgICAuYXR0cihcInhcIiwgeFNjYWxlKDApKVxuICAgIC5hdHRyKFwiZHhcIiwgLTEwKVxuICAgIC5hdHRyKFwieVwiLCBoZWlnaHQgLyAyKVxuICAgIC50ZXh0KFwiUsKyXCIpO1xuXG4gIC8vIERyYXcgd2hvbGUgYmFyLlxuICBzdmdcbiAgICAuYXBwZW5kKFwiZ1wiKVxuICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgLmF0dHIoXCJmaWxsXCIsIFwiZ2FpbnNib3JvXCIpXG4gICAgLmF0dHIoXCJ4XCIsIHhTY2FsZSgwKSlcbiAgICAuYXR0cihcInlcIiwgbWFyZ2luVG9wKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGggLSBtYXJnaW5MZWZ0IC0gbWFyZ2luUmlnaHQpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0IC0gbWFyZ2luVG9wIC0gbWFyZ2luQm90dG9tKTtcblxuICAvLyBEcmF3IGJhci5cbiAgY29uc3QgYmFyID0gdXBkYXRlQmFyKHN2Zy5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcInJlY3RcIiksIDApO1xuXG4gIC8vIERyYXcgbGFiZWxcbiAgY29uc3QgbGFiZWxGb3JtYXQgPSBkMy5mb3JtYXQoXCIuMmZcIik7XG4gIGNvbnN0IGxhYmVsID0gdXBkYXRlTGFiZWwoc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwidGV4dFwiKSwgMCk7XG5cbiAgLy8gVXBkYXRlIGFjY29yZGluZyB0byBkYXRhLlxuICB1cGRhdGUoZGF0YSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlQmFyKHJlY3QsIGRhdGEsIHRyYW5zaXRpb24gPSB0cnVlKSB7XG4gICAgcmV0dXJuIHJlY3QuZGF0YShbZGF0YV0pLmpvaW4oXG4gICAgICAoZW50ZXIpID0+XG4gICAgICAgIGVudGVyXG4gICAgICAgICAgLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCB4U2NhbGUoMCkpXG4gICAgICAgICAgLmF0dHIoXCJ5XCIsIG1hcmdpblRvcClcbiAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIDApXG4gICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0IC0gbWFyZ2luVG9wIC0gbWFyZ2luQm90dG9tKSxcbiAgICAgICh1cGRhdGUpID0+XG4gICAgICAgIHVwZGF0ZS5jYWxsKCh1cGRhdGUpID0+IHtcbiAgICAgICAgICBpZiAodHJhbnNpdGlvbikgdXBkYXRlID0gdXBkYXRlLnRyYW5zaXRpb24oKTtcblxuICAgICAgICAgIHVwZGF0ZS5hdHRyKFwid2lkdGhcIiwgKGQpID0+IHhTY2FsZShpc05hTihkKSA/IDAgOiBkKSAtIHhTY2FsZSgwKSk7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxhYmVsKHRleHQsIGRhdGEsIHRyYW5zaXRpb24gPSB0cnVlKSB7XG4gICAgcmV0dXJuIHRleHQuZGF0YShbZGF0YV0pLmpvaW4oXG4gICAgICAoZW50ZXIpID0+XG4gICAgICAgIGVudGVyXG4gICAgICAgICAgLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAuYXR0cihcImRvbWluYW50LWJhc2VsaW5lXCIsIFwibWlkZGxlXCIpXG4gICAgICAgICAgLmF0dHIoXCJmb250LWZhbWlseVwiLCBcInNhbnMtc2VyaWZcIilcbiAgICAgICAgICAuYXR0cihcImZvbnQtc2l6ZVwiLCBsYWJlbFNpemUpXG4gICAgICAgICAgLmF0dHIoXCJmb250LXdlaWdodFwiLCBcImJvbGRcIilcbiAgICAgICAgICAuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKVxuICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKVxuICAgICAgICAgIC5hdHRyKFwiZHhcIiwgMTApXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIHhTY2FsZSgwKSlcbiAgICAgICAgICAuYXR0cihcInlcIiwgaGVpZ2h0IC8gMilcbiAgICAgICAgICAudGV4dChsYWJlbEZvcm1hdChcIjBcIikpLFxuICAgICAgKHVwZGF0ZSkgPT5cbiAgICAgICAgdXBkYXRlLmNhbGwoKHVwZGF0ZSkgPT4ge1xuICAgICAgICAgIC8vIENoZWNrIGlmIGJhciBpcyB0b28gc2hvcnRcbiAgICAgICAgICBjb25zdCBjaGVjayA9IChkKSA9PiBkIDwgMC4xO1xuXG4gICAgICAgICAgaWYgKHRyYW5zaXRpb24pIHVwZGF0ZSA9IHVwZGF0ZS50cmFuc2l0aW9uKCk7XG5cbiAgICAgICAgICB1cGRhdGVcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAoZCkgPT4geFNjYWxlKGQpKVxuICAgICAgICAgICAgLnRleHQoKGQpID0+IGxhYmVsRm9ybWF0KGQpKVxuICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIChkKSA9PiAoY2hlY2soZCkgPyBcImJsYWNrXCIgOiBcIndoaXRlXCIpKVxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCAoZCkgPT4gKGNoZWNrKGQpID8gXCJzdGFydFwiIDogXCJlbmRcIikpXG4gICAgICAgICAgICAuYXR0cihcImR4XCIsIChkKSA9PiAoY2hlY2soZCkgPyAxMCA6IC0xMCkpO1xuICAgICAgICB9KVxuICAgICk7XG4gIH1cblxuICAvLyBNYWluIGZ1bmN0aW9uIGZvciBkYXRhIHVwZGF0ZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZShkYXRhLCB0cmFuc2l0aW9uID0gdHJ1ZSkge1xuICAgIHVwZGF0ZUJhcihiYXIsIGRhdGEsIHRyYW5zaXRpb24pO1xuICAgIHVwZGF0ZUxhYmVsKGxhYmVsLCBkYXRhLCB0cmFuc2l0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHN2Zy5ub2RlKCksIHsgdXBkYXRlIH0pO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiLy8gdG8gZHJhdyBsaW5lcyBhdCB0aGUgb3JpZ2luICh0byBzaG93IGludGVyY2VwdCBhbmQgc3R1ZmYpXG4vLyBjcmVhdGUgdm9yb25vaSBvdmVybGF5PyBmb3IgZHJhZ2dpbmcgcG9pbnRzXG4vLyB2aXogZXJyb3IgLyBzcXVhcmVkIGVycm9yXG4vLyBtYWtlIHRoZSBlcnJvciBsaW5lcyBsb29rIGxpa2UgYSB3ZWlnaHRcbi8vIHNob3cgb3RoZXIgbWV0cmljcyBsaWtlIFJeMiBldGMuXG5mdW5jdGlvbiBSZWdyZXNzaW9uUGxvdChcbiAgZGF0YSxcbiAge1xuICAgIHggPSAoW3hdKSA9PiB4LCAvLyBhY2Nlc3NvciBmdW5jdGlvbiBmb3IgeC1jb29yZGluYXRlXG4gICAgeSA9IChbLCB5XSkgPT4geSwgLy8gYWNjZXNzb3IgZnVuY3Rpb24gZm9yIHktY29vcmRpbmF0ZVxuICAgIHIgPSA2LCAvLyByYWRpdXMgb2YgZG90cywgaW4gcGl4ZWxzXG4gICAgbWFyZ2luVG9wID0gMjAsIC8vIHRvcCBtYXJnaW4sIGluIHBpeGVsc1xuICAgIG1hcmdpblJpZ2h0ID0gMzAsIC8vIHJpZ2h0IG1hcmdpbiwgaW4gcGl4ZWxzXG4gICAgbWFyZ2luQm90dG9tID0gMzAsIC8vIGJvdHRvbSBtYXJnaW4sIGluIHBpeGVsc1xuICAgIG1hcmdpbkxlZnQgPSA0MCwgLy8gbGVmdCBtYXJnaW4sIGluIHBpeGVsc1xuICAgIGluc2V0ID0gciAqIDIsIC8vIGluc2V0IHRoZSBkZWZhdWx0IHJhbmdlLCBpbiBwaXhlbHNcbiAgICBpbnNldFRvcCA9IGluc2V0LCAvLyBpbnNldCB0aGUgZGVmYXVsdCB5LXJhbmdlXG4gICAgaW5zZXRSaWdodCA9IGluc2V0LCAvLyBpbnNldCB0aGUgZGVmYXVsdCB4LXJhbmdlXG4gICAgaW5zZXRCb3R0b20gPSBpbnNldCwgLy8gaW5zZXQgdGhlIGRlZmF1bHQgeS1yYW5nZVxuICAgIGluc2V0TGVmdCA9IGluc2V0LCAvLyBpbnNldCB0aGUgZGVmYXVsdCB4LXJhbmdlXG4gICAgd2lkdGggPSA2NDAsIC8vIG91dGVyIHdpZHRoLCBpbiBwaXhlbHNcbiAgICBoZWlnaHQgPSA1MDAsIC8vIG91dGVyIGhlaWdodCwgaW4gcGl4ZWxzXG4gICAgeFR5cGUgPSBkMy5zY2FsZUxpbmVhciwgLy8gdHlwZSBvZiB4LXNjYWxlXG4gICAgeERvbWFpbiwgLy8gW3htaW4sIHhtYXhdXG4gICAgeFJhbmdlID0gW21hcmdpbkxlZnQgKyBpbnNldExlZnQsIHdpZHRoIC0gbWFyZ2luUmlnaHQgLSBpbnNldFJpZ2h0XSwgLy8gW2xlZnQsIHJpZ2h0XVxuICAgIHlUeXBlID0gZDMuc2NhbGVMaW5lYXIsIC8vIHR5cGUgb2YgeS1zY2FsZVxuICAgIHlEb21haW4sIC8vIFt5bWluLCB5bWF4XVxuICAgIHlSYW5nZSA9IFtoZWlnaHQgLSBtYXJnaW5Cb3R0b20gLSBpbnNldEJvdHRvbSwgbWFyZ2luVG9wICsgaW5zZXRUb3BdLCAvLyBbYm90dG9tLCB0b3BdXG4gICAgc2hvd0dyaWQgPSB0cnVlIC8vIHdoZXRoZXIgdG8gc2hvdyBncmlkIGxpbmVzXG4gIH0gPSB7fVxuKSB7XG4gIGNvbnN0IGVycm9yQ29sb3IgPSBkMy5zY2hlbWVTZXQzWzNdO1xuXG4gIGxldCBlcnJvckxpbmVzT3BhY2l0eSA9IDE7XG4gIGxldCBlcnJvclNxdWFyZXNPcGFjaXR5ID0gMDtcblxuICAvLyBJbml0IGRyYWcgb2JqZWN0LlxuICBjb25zdCBkcmFnID0gZDNcbiAgICAuZHJhZygpXG4gICAgLy8gLm9uKFwic3RhcnRcIiwgZHJhZ3N0YXJ0ZWQpXG4gICAgLm9uKFwiZHJhZ1wiLCBkcmFnZ2VkKTtcbiAgLy8gLm9uKFwiZW5kXCIsIGRyYWdlbmRlZCk7XG5cbiAgLy8gVG8gZ2l2ZSBlYWNoIGRhdGEgcG9pbnQgYSB1bmlxdWUgaWRcbiAgbGV0IGlkQ291bnRlciA9IDA7XG5cbiAgLy8gQ29tcHV0ZSBkYXRhIHZhbHVlcy5cbiAgZGF0YSA9IGRhdGEubWFwKChkKSA9PiAoe1xuICAgIHhDb29yZDogeChkKSxcbiAgICB5Q29vcmQ6IHkoZCksXG4gICAgaWQ6IGlkQ291bnRlcisrXG4gIH0pKTtcblxuICAvLyBTdG9yZSBjb3B5IG9mIGluaXRpYWwgZGF0YSBvYmplY3RcbiAgY29uc3QgaW5pdERhdGEgPSBkYXRhLm1hcCgoZCkgPT4gKHsgLi4uZCB9KSk7XG5cbiAgLy8gQ29tcHV0ZSBkZWZhdWx0IGRvbWFpbnMuXG4gIC8vIGlmICh4RG9tYWluID09PSB1bmRlZmluZWQpIHhEb21haW4gPSBkMy5leHRlbnQoZGF0YSwgKGQpID0+IGQueENvb3JkKTtcbiAgaWYgKHhEb21haW4gPT09IHVuZGVmaW5lZCkgeERvbWFpbiA9IFswLCBkMy5tYXgoZGF0YSwgKGQpID0+IGQueENvb3JkKV07XG4gIGlmICh5RG9tYWluID09PSB1bmRlZmluZWQpIHlEb21haW4gPSBbMCwgZDMubWF4KGRhdGEsIChkKSA9PiBkLnlDb29yZCldO1xuXG4gIC8vIEluaXQgbGluZWFyIHJlZ3Jlc3Nvci5cbiAgY29uc3QgbGluZWFyUmVncmVzc2lvbiA9IGQzXG4gICAgLnJlZ3Jlc3Npb25MaW5lYXIoKVxuICAgIC54KChkKSA9PiBkLnhDb29yZClcbiAgICAueSgoZCkgPT4gZC55Q29vcmQpXG4gICAgLmRvbWFpbih4RG9tYWluKTtcblxuICAvLyBDb25zdHJ1Y3Qgc2NhbGVzIGFuZCBheGVzLlxuICBjb25zdCB4U2NhbGUgPSB4VHlwZSh4RG9tYWluLCB4UmFuZ2UpO1xuICBjb25zdCB5U2NhbGUgPSB5VHlwZSh5RG9tYWluLCB5UmFuZ2UpO1xuICBjb25zdCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeFNjYWxlKS50aWNrcyh3aWR0aCAvIDgwKTtcbiAgY29uc3QgeUF4aXMgPSBkMy5heGlzTGVmdCh5U2NhbGUpLnRpY2tzKGhlaWdodCAvIDgwKTtcblxuICAvLyBEcmF3IHN2Zy5cbiAgY29uc3Qgc3ZnID0gZDNcbiAgICAuY3JlYXRlKFwic3ZnXCIpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpXG4gICAgLmF0dHIoXCJ2aWV3Qm94XCIsIFswLCAwLCB3aWR0aCwgaGVpZ2h0XSlcbiAgICAuYXR0cihcInN0eWxlXCIsIFwibWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGhlaWdodDogaW50cmluc2ljO1wiKTtcblxuICAvLyBEcmF3IHhBeGlzLlxuICBjb25zdCBheGlzT3BhY2l0eSA9IDE7XG5cbiAgY29uc3QgeEdyb3VwID0gc3ZnXG4gICAgLmFwcGVuZChcImdcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKDAsJHtoZWlnaHQgLSBtYXJnaW5Cb3R0b219KWApXG4gICAgLmF0dHIoXCJvcGFjaXR5XCIsIGF4aXNPcGFjaXR5KVxuICAgIC5jYWxsKHhBeGlzKVxuICAgIC5jYWxsKChnKSA9PiBnLnNlbGVjdChcIi5kb21haW5cIikucmVtb3ZlKCkpO1xuICAvLyBEcmF3IGdyaWQgbGluZXNcbiAgeEdyb3VwXG4gICAgLnNlbGVjdEFsbChcIi50aWNrIGxpbmVcIilcbiAgICAuY2xvbmUoKVxuICAgIC5hdHRyKFwieTJcIiwgbWFyZ2luVG9wICsgbWFyZ2luQm90dG9tIC0gaGVpZ2h0KVxuICAgIC8vIERyYXcgbGluZSBhdCBvcmlnaW5cbiAgICAuYXR0cihcInN0cm9rZS1vcGFjaXR5XCIsIChkKSA9PiB7XG4gICAgICBpZiAoZCA9PSAwKSB7XG4gICAgICAgIHJldHVybiBheGlzT3BhY2l0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzaG93R3JpZCA/IDAuMSA6IDA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgLy8gRHJhdyB5QXhpcy5cbiAgY29uc3QgeUdyb3VwID0gc3ZnXG4gICAgLmFwcGVuZChcImdcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7bWFyZ2luTGVmdH0sMClgKVxuICAgIC5hdHRyKFwib3BhY2l0eVwiLCBheGlzT3BhY2l0eSlcbiAgICAuY2FsbCh5QXhpcylcbiAgICAuY2FsbCgoZykgPT4gZy5zZWxlY3QoXCIuZG9tYWluXCIpLnJlbW92ZSgpKTtcbiAgeUdyb3VwXG4gICAgLnNlbGVjdEFsbChcIi50aWNrIGxpbmVcIilcbiAgICAuY2xvbmUoKVxuICAgIC5hdHRyKFwieDJcIiwgd2lkdGggLSBtYXJnaW5MZWZ0IC0gbWFyZ2luUmlnaHQpXG4gICAgLy8gRHJhdyBsaW5lIGF0IG9yaWdpblxuICAgIC5hdHRyKFwic3Ryb2tlLW9wYWNpdHlcIiwgKGQpID0+IHtcbiAgICAgIGlmIChkID09IDApIHtcbiAgICAgICAgcmV0dXJuIGF4aXNPcGFjaXR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNob3dHcmlkID8gMC4xIDogMDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAvLyBEcmF3IGVycm9yIHNxdWFyZXMuXG4gIGxldCBlcnJvclNxdWFyZXMgPSB1cGRhdGVFcnJvclNxdWFyZXMoXG4gICAgc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwicmVjdFwiKSxcbiAgICBkYXRhXG4gICk7XG5cbiAgLy8gRHJhdyBlcnJvciBsaW5lcy5cbiAgbGV0IGVycm9yTGluZXMgPSB1cGRhdGVFcnJvckxpbmVzKHN2Zy5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcImxpbmVcIiksIGRhdGEpO1xuXG4gIC8vIERyYXcgcmVncmVzc2lvbiBsaW5lLlxuICBjb25zdCByZWdyZXNzaW9uTGluZUdyb3VwID0gc3ZnXG4gICAgLmFwcGVuZChcImdcIilcbiAgICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpXG4gICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgMik7XG4gIC8vIC5hdHRyKFwic3Ryb2tlLWRhc2hhcnJheVwiLCBcIjIwLDIwXCIpO1xuXG4gIGNvbnN0IHJlZ3Jlc3Npb25MaW5lID0gdXBkYXRlUmVncmVzc2lvbkxpbmUoXG4gICAgcmVncmVzc2lvbkxpbmVHcm91cC5zZWxlY3RBbGwoXCJsaW5lXCIpLFxuICAgIGRhdGFcbiAgKTtcblxuICAvLyBEcmF3IHNwYWNlIGZvciBwbG90IGludGVyYWN0aW9ucy5cbiAgY29uc3QgcGxvdFJlY3QgPSBzdmdcbiAgICAuYXBwZW5kKFwicmVjdFwiKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwKVxuICAgIC5vbihcImNsaWNrXCIsIGFkZERhdGFwb2ludCk7XG5cbiAgLy8gRHJhdyBkYXRhIHBvaW50cy5cbiAgY29uc3QgY2lyY2xlc0dyb3VwID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKTtcbiAgbGV0IGNpcmNsZXMgPSB1cGRhdGVDaXJjbGVzKGNpcmNsZXNHcm91cC5zZWxlY3RBbGwoXCJjaXJjbGVcIiksIGRhdGEpO1xuXG4gIC8vIERyYWcgaW50ZXJhY3Rpb25zIGZvciBjaXJjbGVzLlxuICBmdW5jdGlvbiBkcmFnc3RhcnRlZChldmVudCwgZCkge1xuICAgIGQzLnNlbGVjdCh0aGlzKS5yYWlzZSgpLmF0dHIoXCJzdHJva2VcIiwgXCJyZWRcIik7XG4gIH1cbiAgZnVuY3Rpb24gZHJhZ2dlZChldmVudCwgZCkge1xuICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgLy8gVXBkYXRlIGRhdGEgcG9pbnQsIGFzIHdlbGwgYXMgaXRzIHBvc2l0aW9uIG9uIHRoZSBwbG90XG4gICAgICAuYXR0cihcImN4XCIsICgpID0+IHtcbiAgICAgICAgZC54Q29vcmQgPSB4U2NhbGUuaW52ZXJ0KGV2ZW50LngpO1xuICAgICAgICByZXR1cm4gZXZlbnQueDtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcImN5XCIsICgpID0+IHtcbiAgICAgICAgZC55Q29vcmQgPSB5U2NhbGUuaW52ZXJ0KGV2ZW50LnkpO1xuICAgICAgICByZXR1cm4gZXZlbnQueTtcbiAgICAgIH0pO1xuXG4gICAgdXBkYXRlUmVncmVzc2lvbkxpbmUocmVncmVzc2lvbkxpbmUsIGRhdGEsIGZhbHNlKTtcbiAgICBlcnJvclNxdWFyZXMgPSB1cGRhdGVFcnJvclNxdWFyZXMoZXJyb3JTcXVhcmVzLCBkYXRhLCBmYWxzZSk7XG4gICAgZXJyb3JMaW5lcyA9IHVwZGF0ZUVycm9yTGluZXMoZXJyb3JMaW5lcywgZGF0YSwgZmFsc2UpO1xuICB9XG4gIGZ1bmN0aW9uIGRyYWdlbmRlZChldmVudCwgaSkge1xuICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwic3Ryb2tlXCIsIG51bGwpO1xuICB9XG5cbiAgLy8gQ2xpY2sgaW50ZXJhY3Rpb24gZm9yIGNpcmNsZXMuXG4gIGZ1bmN0aW9uIHJlbW92ZURhdGFwb2ludChldmVudCwgZEN1cnIpIHtcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyAvLyBkcmFnZ2VkXG5cbiAgICAvLyBSZW1vdmUgZGF0YSBwb2ludDsgZmFzdGVyIHdheSB0byBkbyB0aGlzP1xuICAgIGRhdGEgPSBkYXRhLmZpbHRlcigoZCkgPT4gZC5pZCAhPT0gZEN1cnIuaWQpO1xuXG4gICAgdXBkYXRlKGRhdGEpO1xuICB9XG5cbiAgLy8gQ2xpY2sgaW50ZXJhY3Rpb24gZm9yIHBsb3QuXG4gIGZ1bmN0aW9uIGFkZERhdGFwb2ludChldmVudCkge1xuICAgIGNvbnN0IFt4bSwgeW1dID0gZDMucG9pbnRlcihldmVudCk7XG5cbiAgICB1cGRhdGVEYXRhcG9pbnQoeFNjYWxlLmludmVydCh4bSksIHlTY2FsZS5pbnZlcnQoeW0pKTtcbiAgfVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiBmb3IgcmVncmVzc2lvbiBsaW5lIHVwZGF0ZS5cbiAgZnVuY3Rpb24gdXBkYXRlUmVncmVzc2lvbkxpbmUobGluZSwgZGF0YSwgdHJhbnNpdGlvbiA9IHRydWUpIHtcbiAgICBjb25zdCByZWdyZXNzaW9uRGF0YSA9IGxpbmVhclJlZ3Jlc3Npb24oZGF0YSk7XG5cbiAgICAvLyBEaXNwYXRjaCBldmVudCBhbmQgUl4yIHZhbHVlXG4gICAgc3ZnLm5vZGUoKS52YWx1ZSA9IHJlZ3Jlc3Npb25EYXRhLnJTcXVhcmVkO1xuICAgIHN2Zy5ub2RlKCkudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgc3ZnLmRpc3BhdGNoKFwiaW5wdXRcIiwgeyBidWJibGVzOiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuIGxpbmVcbiAgICAgIC5kYXRhKFtyZWdyZXNzaW9uRGF0YV0pXG4gICAgICAuam9pbihcImxpbmVcIilcbiAgICAgIC5jYWxsKChsaW5lKSA9PiB7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uKSBsaW5lID0gbGluZS50cmFuc2l0aW9uKCk7XG4gICAgICAgIGxpbmVcbiAgICAgICAgICAuYXR0cihcIngxXCIsIChkKSA9PiB4U2NhbGUoZFswXVswXSkpXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCAoZCkgPT4geFNjYWxlKGRbMV1bMF0pKVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgKGQpID0+IHlTY2FsZShkWzBdWzFdKSlcbiAgICAgICAgICAuYXR0cihcInkyXCIsIChkKSA9PiB5U2NhbGUoZFsxXVsxXSkpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gdXBkYXRlIGNpcmNsZXMgYmFzZWQgb24gbmV3IGRhdGEuXG4gIGZ1bmN0aW9uIHVwZGF0ZUNpcmNsZXMoY2lyY2xlcywgZGF0YSkge1xuICAgIHJldHVybiBjaXJjbGVzXG4gICAgICAuZGF0YShkYXRhLCAoZCkgPT4gZC5pZClcbiAgICAgIC5qb2luKFxuICAgICAgICAoZW50ZXIpID0+XG4gICAgICAgICAgZW50ZXJcbiAgICAgICAgICAgIC5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY3hcIiwgKGQpID0+IHhTY2FsZShkLnhDb29yZCkpXG4gICAgICAgICAgICAuYXR0cihcImN5XCIsIChkKSA9PiB5U2NhbGUoZC55Q29vcmQpKVxuICAgICAgICAgICAgLy8gVG8gdHJhbnNpdGlvbiBmcm9tIDAgcmFkaXVzXG4gICAgICAgICAgICAuYXR0cihcInJcIiwgMClcbiAgICAgICAgICAgIC8vIEF0dGFjaCBpbnRlcmFjdGlvbnNcbiAgICAgICAgICAgIC5jYWxsKGRyYWcpXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCByZW1vdmVEYXRhcG9pbnQpXG4gICAgICAgICAgICAvLyBBZGQgdHJhbnNpdGlvblxuICAgICAgICAgICAgLmNhbGwoKGVudGVyKSA9PlxuICAgICAgICAgICAgICBlbnRlclxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAuZWFzZShkMy5lYXNlQmFja091dC5vdmVyc2hvb3QoMS43KSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgcilcbiAgICAgICAgICAgICksXG4gICAgICAgICh1cGRhdGUpID0+XG4gICAgICAgICAgdXBkYXRlXG4gICAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgICAuYXR0cihcImN4XCIsIChkKSA9PiB4U2NhbGUoZC54Q29vcmQpKVxuICAgICAgICAgICAgLmF0dHIoXCJjeVwiLCAoZCkgPT4geVNjYWxlKGQueUNvb3JkKSksXG4gICAgICAgIChleGl0KSA9PlxuICAgICAgICAgIGV4aXRcbiAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgIC5lYXNlKGQzLmVhc2VCYWNrSW4ub3ZlcnNob290KDEuNykpXG4gICAgICAgICAgICAuYXR0cihcInJcIiwgMClcbiAgICAgICAgICAgIC5yZW1vdmUoKVxuICAgICAgKTtcbiAgfVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byB1cGRhdGUgZXJyb3IgbGluZXMgYmFzZWQgb24gbmV3IGRhdGEuXG4gIGZ1bmN0aW9uIHVwZGF0ZUVycm9yTGluZXMobGluZXMsIGRhdGEsIHRyYW5zaXRpb24gPSB0cnVlKSB7XG4gICAgY29uc3QgcmVncmVzc2lvbkRhdGEgPSBsaW5lYXJSZWdyZXNzaW9uKGRhdGEpO1xuXG4gICAgcmV0dXJuIGxpbmVzXG4gICAgICAuZGF0YShkYXRhLCAoZCkgPT4gZC5pZClcbiAgICAgIC5qb2luKFxuICAgICAgICAoZW50ZXIpID0+XG4gICAgICAgICAgZW50ZXJcbiAgICAgICAgICAgIC5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBlcnJvckNvbG9yKVxuICAgICAgICAgICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgMilcbiAgICAgICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCBlcnJvckxpbmVzT3BhY2l0eSlcbiAgICAgICAgICAgIC8vIFN0YXJ0IGF0IGRhdGEgcG9pbnRcbiAgICAgICAgICAgIC5hdHRyKFwieDFcIiwgKGQpID0+IHhTY2FsZShkLnhDb29yZCkpXG4gICAgICAgICAgICAuYXR0cihcInkxXCIsIChkKSA9PiB5U2NhbGUoZC55Q29vcmQpKVxuICAgICAgICAgICAgLmF0dHIoXCJ4MlwiLCAoZCkgPT4geFNjYWxlKGQueENvb3JkKSlcbiAgICAgICAgICAgIC5hdHRyKFwieTJcIiwgKGQpID0+IHlTY2FsZShkLnlDb29yZCkpXG4gICAgICAgICAgICAvLyBBZGQgdHJhbnNpdGlvblxuICAgICAgICAgICAgLmNhbGwoKGVudGVyKSA9PlxuICAgICAgICAgICAgICBlbnRlclxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAgICAgICAuYXR0cihcInkyXCIsIChkKSA9PiB5U2NhbGUocmVncmVzc2lvbkRhdGEucHJlZGljdChkLnhDb29yZCkpKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgKHVwZGF0ZSkgPT5cbiAgICAgICAgICB1cGRhdGUuY2FsbCgodXBkYXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbikgdXBkYXRlID0gdXBkYXRlLnRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgIHVwZGF0ZVxuICAgICAgICAgICAgICAuYXR0cihcIngxXCIsIChkKSA9PiB4U2NhbGUoZC54Q29vcmQpKVxuICAgICAgICAgICAgICAuYXR0cihcInkxXCIsIChkKSA9PiB5U2NhbGUoZC55Q29vcmQpKVxuICAgICAgICAgICAgICAuYXR0cihcIngyXCIsIChkKSA9PiB4U2NhbGUoZC54Q29vcmQpKVxuICAgICAgICAgICAgICAuYXR0cihcInkyXCIsIChkKSA9PiB5U2NhbGUocmVncmVzc2lvbkRhdGEucHJlZGljdChkLnhDb29yZCkpKTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgKGV4aXQpID0+XG4gICAgICAgICAgZXhpdFxuICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgLmF0dHIoXCJ5MlwiLCAoZCkgPT4geVNjYWxlKGQueUNvb3JkKSlcbiAgICAgICAgICAgIC5yZW1vdmUoKVxuICAgICAgKTtcbiAgfVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byB1cGRhdGUgZXJyb3Igc3F1YXJlcyBiYXNlZCBvbiBuZXcgZGF0YS5cbiAgZnVuY3Rpb24gdXBkYXRlRXJyb3JTcXVhcmVzKHJlY3RzLCBkYXRhLCB0cmFuc2l0aW9uID0gdHJ1ZSkge1xuICAgIGNvbnN0IHJlZ3Jlc3Npb25EYXRhID0gbGluZWFyUmVncmVzc2lvbihkYXRhKTtcblxuICAgIGNvbnN0IGNvbXB1dGVIZWlnaHQgPSAoZCkgPT4ge1xuICAgICAgY29uc3QgeUNvb3JkUHJlZCA9IHJlZ3Jlc3Npb25EYXRhLnByZWRpY3QoZC54Q29vcmQpO1xuXG4gICAgICByZXR1cm4gTWF0aC5hYnMoeVNjYWxlKHlDb29yZFByZWQpIC0geVNjYWxlKGQueUNvb3JkKSk7XG4gICAgfTtcbiAgICAvLyBDb21wdXRlIHdoaWNoIGRpcmVjdGlvbiB0aGUgYm94IHNob3VsZCBmYWNlXG4gICAgY29uc3QgY29tcHV0ZVRyYW5zZm9ybSA9IChkKSA9PiB7XG4gICAgICBjb25zdCB5Q29vcmRQcmVkID0gcmVncmVzc2lvbkRhdGEucHJlZGljdChkLnhDb29yZCk7XG4gICAgICBjb25zdCBjaGVjayA9IHlTY2FsZSh5Q29vcmRQcmVkKSAtIHlTY2FsZShkLnlDb29yZCkgPCAwO1xuICAgICAgY29uc3QgZGVnID0gY2hlY2sgPyAtOTAgOiA5MDtcblxuICAgICAgcmV0dXJuIGByb3RhdGUoJHtkZWd9LCAke3hTY2FsZShkLnhDb29yZCl9LCAke3lTY2FsZShkLnlDb29yZCl9KWA7XG4gICAgfTtcblxuICAgIHJldHVybiByZWN0c1xuICAgICAgLmRhdGEoZGF0YSwgKGQpID0+IGQuaWQpXG4gICAgICAuam9pbihcbiAgICAgICAgKGVudGVyKSA9PlxuICAgICAgICAgIGVudGVyXG4gICAgICAgICAgICAuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJub25lXCIpXG4gICAgICAgICAgICAuYXR0cihcImZpbGxcIiwgZXJyb3JDb2xvcilcbiAgICAgICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCBlcnJvclNxdWFyZXNPcGFjaXR5KVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgY29tcHV0ZVRyYW5zZm9ybSlcbiAgICAgICAgICAgIC8vIFN0YXJ0IGF0IGRhdGEgcG9pbnRcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAoZCkgPT4geFNjYWxlKGQueENvb3JkKSlcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCAoZCkgPT4geVNjYWxlKGQueUNvb3JkKSlcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgMClcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIDApXG4gICAgICAgICAgICAvLyBBZGQgdHJhbnNpdGlvblxuICAgICAgICAgICAgLmNhbGwoKGVudGVyKSA9PiB7XG4gICAgICAgICAgICAgIGVudGVyXG4gICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgY29tcHV0ZUhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBjb21wdXRlSGVpZ2h0KTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAodXBkYXRlKSA9PlxuICAgICAgICAgIHVwZGF0ZS5jYWxsKCh1cGRhdGUpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZS5hdHRyKFwidHJhbnNmb3JtXCIsIGNvbXB1dGVUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbikgdXBkYXRlID0gdXBkYXRlLnRyYW5zaXRpb24oKTtcblxuICAgICAgICAgICAgdXBkYXRlXG4gICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAoZCkgPT4geFNjYWxlKGQueENvb3JkKSlcbiAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIChkKSA9PiB5U2NhbGUoZC55Q29vcmQpKVxuICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIGNvbXB1dGVIZWlnaHQpXG4gICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGNvbXB1dGVIZWlnaHQpO1xuICAgICAgICAgIH0pLFxuICAgICAgICAoZXhpdCkgPT4gZXhpdC50cmFuc2l0aW9uKCkuYXR0cihcIndpZHRoXCIsIDApLmF0dHIoXCJoZWlnaHRcIiwgMCkucmVtb3ZlKClcbiAgICAgICk7XG4gIH1cblxuICAvLyBSZXNldHMgdGhlIHBsb3QgdG8gdGhlIGluaXRpYWwgZGF0YVxuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB1cGRhdGUoaW5pdERhdGEsIHRydWUpO1xuICB9XG5cbiAgLy8gVXBkYXRlcyB3aGljaCBlcnJvciB0eXBlIHRvIHNob3dcbiAgZnVuY3Rpb24gdXBkYXRlVmlldyhvcHRpb24pIHtcbiAgICBpZiAob3B0aW9uID09PSBcIk5vbmVcIikge1xuICAgICAgZXJyb3JMaW5lc09wYWNpdHkgPSAwO1xuICAgICAgZXJyb3JTcXVhcmVzT3BhY2l0eSA9IDA7XG5cbiAgICAgIGVycm9yTGluZXMudHJhbnNpdGlvbigpLmF0dHIoXCJvcGFjaXR5XCIsIDApO1xuICAgICAgZXJyb3JTcXVhcmVzLnRyYW5zaXRpb24oKS5hdHRyKFwib3BhY2l0eVwiLCAwKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbiA9PT0gXCJBYnNvbHV0ZSBFcnJvclwiKSB7XG4gICAgICBlcnJvckxpbmVzT3BhY2l0eSA9IDE7XG4gICAgICBlcnJvclNxdWFyZXNPcGFjaXR5ID0gMDtcblxuICAgICAgZXJyb3JMaW5lcy50cmFuc2l0aW9uKCkuYXR0cihcIm9wYWNpdHlcIiwgMSk7XG4gICAgICBlcnJvclNxdWFyZXMudHJhbnNpdGlvbigpLmF0dHIoXCJvcGFjaXR5XCIsIDApO1xuICAgIH0gZWxzZSBpZiAob3B0aW9uID09PSBcIlNxdWFyZWQgRXJyb3JcIikge1xuICAgICAgZXJyb3JMaW5lc09wYWNpdHkgPSAwO1xuICAgICAgZXJyb3JTcXVhcmVzT3BhY2l0eSA9IDAuNTtcblxuICAgICAgZXJyb3JMaW5lcy50cmFuc2l0aW9uKCkuYXR0cihcIm9wYWNpdHlcIiwgMCk7XG4gICAgICBlcnJvclNxdWFyZXMudHJhbnNpdGlvbigpLmF0dHIoXCJvcGFjaXR5XCIsIDAuNSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkcyBhIG5ldyBkYXRhcG9pbnQgYW5kIHVwZGF0ZXMgdGhlIHBsb3RcbiAgZnVuY3Rpb24gdXBkYXRlRGF0YXBvaW50KHhDb29yZCwgeUNvb3JkKSB7XG4gICAgLy8gQWRkIGRhdGFwb2ludFxuICAgIGRhdGEgPSBbLi4uZGF0YSwgeyB4Q29vcmQsIHlDb29yZCwgaWQ6IGlkQ291bnRlcisrIH1dO1xuXG4gICAgdXBkYXRlKGRhdGEpO1xuICB9XG5cbiAgLy8gTWFpbiBmdW5jdGlvbiB0aGF0IHVwZGF0ZXMgdGhlIHBsb3QgYmFzZWQgb24gbmV3IGRhdGFcbiAgZnVuY3Rpb24gdXBkYXRlKG5ld0RhdGEsIHRyYW5zaXRpb24gPSB0cnVlKSB7XG4gICAgLy8gVXBhdGUgbG9jYWwgZGF0YSBvYmplY3RcbiAgICBkYXRhID0gbmV3RGF0YS5tYXAoKGQpID0+ICh7IC4uLmQgfSkpO1xuXG4gICAgdXBkYXRlUmVncmVzc2lvbkxpbmUocmVncmVzc2lvbkxpbmUsIGRhdGEsIHRyYW5zaXRpb24pO1xuICAgIGNpcmNsZXMgPSB1cGRhdGVDaXJjbGVzKGNpcmNsZXMsIGRhdGEpO1xuICAgIGVycm9yU3F1YXJlcyA9IHVwZGF0ZUVycm9yU3F1YXJlcyhlcnJvclNxdWFyZXMsIGRhdGEsIHRyYW5zaXRpb24pO1xuICAgIGVycm9yTGluZXMgPSB1cGRhdGVFcnJvckxpbmVzKGVycm9yTGluZXMsIGRhdGEsIHRyYW5zaXRpb24pO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3ZnLm5vZGUoKSwge1xuICAgIHVwZGF0ZSxcbiAgICB1cGRhdGVEYXRhcG9pbnQsXG4gICAgdXBkYXRlVmlldyxcbiAgICByZXNldFxuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImQzID0gcmVxdWlyZShcImQzLXJlZ3Jlc3Npb25cIiwgXCJkM1wiKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBzZXR0aW5ncyA9IElucHV0cy5mb3JtKFtcbiAgSW5wdXRzLnJhbmdlKFstNSwgNV0sIHt2YWx1ZTogMSwgbGFiZWw6IHRleGBcXHRleHR7TVcsIH1cXG11YCwgc3RlcDogMC4wMX0pLFxuICBJbnB1dHMucmFuZ2UoWzAuMDEsIDVdLCB7dmFsdWU6IDEsIGxhYmVsOiB0ZXhgXFx0ZXh0e1NELCB9XFxzaWdtYWAsIHN0ZXA6IDAuMDF9KSxcbiAgSW5wdXRzLnJhbmdlKFswLCA5OV0sIHt2YWx1ZTogOTAsIGxhYmVsOiBcIktvbmZpZGVuemxldmVsXCIsIHN0ZXA6IDF9KSxcbiAgSW5wdXRzLnJhbmdlKFswLCAyMDBdLCB7dmFsdWU6IDUwLCBsYWJlbDogXCJuXCIsIHN0ZXA6IDF9KVxuXSlcblxudmlld29mIG5yZXAgPSBTY3J1YmJlcihkMy50aWNrcygxLCAxMDAwLCAxMDAwKSwge1xuICBhdXRvcGxheTogZmFsc2UsXG4gIGxvb3A6IGZhbHNlLFxuICBpbml0aWFsOiAxLFxuICBkZWxheTogNTAwLFxuICBmb3JtYXQ6IHggPT4gYG51bWJlciBvZiBkYXRhc2V0cyA9ICR7eC50b0ZpeGVkKDApfWBcbn0pXG5cbnRleHRpbmZvID0gbWRgXG5Wb24gaW5zZ2VzYW10ICR7bnJlcH0gU3RpY2hwcm9iZW4sICR7ZDMuc3VtKGRhdGFjaS5tYXAoZCA9PiBkLnJlcCA8PSBucmVwICYmIChtdSA+PSBkLmxvd2VyICYmIG11IDw9IGQudXBwZXIpKSl9ICgqKjxzcGFuIHN0eWxlPVwiY29sb3I6cmVkXCI+JHsoZDMuc3VtKGRhdGFjaS5tYXAoZCA9PiBkLnJlcCA8PSBucmVwICYmIChtdSA+PSBkLmxvd2VyICYmIG11IDw9IGQudXBwZXIpKSkqMTAwL25yZXApLnRvRml4ZWQoMyl9JTwvc3Bhbj4qKikgdm9uIGRlbiAke2NvbmZpZGVuY2V9JSBLb25maW5kZW56aW50ZXJ2YWxsZW4gZW50aGllbHRlbiBkZW4gd2FocmVuICh0YXRzw6RjaGxpY2hlbikgUG9wdWxhdGlvbnN3ZXJ0ICR7dGV4YFxcbXU9IGB9ICR7bXV9LlxuYFxuXG5sb2NrdmVydGljYWwgPSBJbnB1dHMudG9nZ2xlKHtsYWJlbDogXCJBY2hzZSBlaW5yYXN0ZW5cIiwgdmFsdWU6IGZhbHNlfSlcblxucGx0ID0gUGxvdC5wbG90KHtcbiAgc3R5bGU6IHtmb250U2l6ZTogXCIxMnB4XCJ9LFxuICB3aWR0aDogOTYwLFxuICB5OiB7XG4gICAgbGFiZWw6IFwibWVhblwiLFxuICAgIGRvbWFpbjogbG9ja3ZlcnRpY2FsID8gW211IC0gMywgbXUgKyAzXSA6IFttdSAtIDUgKiBzaWdtYSAvIE1hdGguc3FydChub2JzKSwgbXUgKyA1ICogc2lnbWEgLyBNYXRoLnNxcnQobm9icyldXG4gIH0sXG4gIHg6IHtcbiAgICBsYWJlbDogXCJTdGljaHByb2Jlbm51bW1lclwiLFxuICAgIGRvbWFpbjogIFswLCBucmVwXVxuICB9LFxuICBtYXJrczogW1xuICAgIFBsb3QucnVsZVgoWzBdKSwgICAgXG4gICAgUGxvdC5ydWxlWChkYXRhY2ksIHtcbiAgICAgIGZpbHRlcjogZCA9PiAoZC5yZXAgPD0gbnJlcCAmJiBtdSA+PSBkLmxvd2VyICYmIG11IDw9IGQudXBwZXIpLFxuICAgICAgeDogXCJyZXBcIixcbiAgICAgIHkxOiBcImxvd2VyXCIsXG4gICAgICB5MjogXCJ1cHBlclwiLCAgXG4gICAgICBzdHJva2U6IFwic3RlZWxibHVlXCIsXG4gICAgICBzdHJva2VXaWR0aDogMS41XG4gICAgfSksXG4gICAgUGxvdC5kb3QoZGF0YWNpLCB7ZmlsdGVyOiBkID0+IChkLnJlcCA8PSBucmVwICYmIG11ID49IGQubG93ZXIgJiYgbXUgPD0gZC51cHBlciksIHg6IFwicmVwXCIsIHk6IFwieGJhclwiLCBmaWxsOiBcInN0ZWVsYmx1ZVwiLCByOiAzfSksXG5cbiAgICBQbG90LnJ1bGVYKGRhdGFjaSwge1xuICAgICAgZmlsdGVyOiBkID0+IGQucmVwIDw9IG5yZXAgJiYgKG11IDwgZC5sb3dlciB8fCBtdSA+IGQudXBwZXIpLFxuICAgICAgeDogXCJyZXBcIixcbiAgICAgIHkxOiBcImxvd2VyXCIsXG4gICAgICB5MjogXCJ1cHBlclwiLCAgXG4gICAgICBzdHJva2U6IFwib3JhbmdlXCIsXG4gICAgICBzdHJva2VXaWR0aDogMS41XG4gICAgfSksXG4gICAgUGxvdC5kb3QoZGF0YWNpLCB7ZmlsdGVyOiBkID0+IGQucmVwIDw9IG5yZXAgJiYgKG11IDwgZC5sb3dlciB8fCBtdSA+IGQudXBwZXIpLCB4OiBcInJlcFwiLCB5OiBcInhiYXJcIiwgZmlsbDogXCJvcmFuZ2VcIiwgcjogM30pLFxuICAgIFBsb3QucnVsZVkoW211XSwge3N0cm9rZTogXCIjRDIyQjJCXCIsIHN0cm9rZVdpZHRoOiAxLjV9KVxuICBdXG59KVxuXG5qc3RhdCA9IHJlcXVpcmUoJ2pzdGF0JylcbmltcG9ydCB7U2NydWJiZXJ9IGZyb20gXCJAbWJvc3RvY2svc2NydWJiZXJcIlxuXG5mdW5jdGlvbiBzaW11bGF0ZV9tZWFucyhtdSwgc2lnbWEsIG5vYnMsIG5yZXApe1xuICBjb25zdCB0dmFsdWUgPSBqc3RhdC5zdHVkZW50dC5pbnYoMSAtICgxIC0gKGNvbmZpZGVuY2UgLyAxMDApKSAvIDIsIG5vYnMgLSAxKTtcbiAgdmFyIGRhdGFjaSA9IFtdO1xuICBmb3IgKGxldCBqID0gMTsgaiA8PSBucmVwOyBqKyspe1xuICAgIGxldCBzYW1wbGUgPSBkMy5yYW5nZShub2JzKS5tYXAoKCkgPT4gZDMucmFuZG9tTm9ybWFsKG11LCBzaWdtYSkoKSk7XG4gICAgbGV0IHhiYXIgPSBkMy5tZWFuKHNhbXBsZSk7XG4gICAgbGV0IHMgPSBqc3RhdC5zdGRldihzYW1wbGUsIHRydWUpOyBcbiAgICBsZXQgbG93ZXIgPSB4YmFyIC0gdHZhbHVlICogcyAvIE1hdGguc3FydChub2JzKTtcbiAgICBsZXQgdXBwZXIgPSB4YmFyICsgdHZhbHVlICogcyAvIE1hdGguc3FydChub2JzKTtcbiAgICBkYXRhY2kucHVzaCh7cmVwOiBqLCB4YmFyOiB4YmFyLCBsb3dlcjogbG93ZXIsIHVwcGVyOiB1cHBlcn0pO1xuICB9XG4gIHJldHVybiBkYXRhY2k7XG59XG5cbm11ID0gMVxuc2lnbWEgPSAxXG5jb25maWRlbmNlID0gOTBcbm5vYnMgPSA1MFxuXG5kYXRhY2kgPSBzaW11bGF0ZV9tZWFucyhtdSwgc2lnbWEsIG5vYnMsIDEwMDApXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3NldHRpbmdzJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ25yZXAnKSJ9XX0=
</script><script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Kopiert");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Kopiert");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Einführung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einführung</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./0300-Wskt.html" class="pagination-link" aria-label="Hallo, Wahrscheinlichkeit">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Hallo, Wahrscheinlichkeit</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Powered by <a href="https://quarto.org">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
<p><a href="./imprint.html">Impressum</a></p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/sebastiansauer/start-bayes/blob/main/0200-Inferenz.qmd" class="toc-action"><i class="bi bi-github"></i>Quellcode anzeigen</a></li><li><a href="https://github.com/sebastiansauer/start-bayes/issues/new" class="toc-action"><i class="bi empty"></i>Problem melden</a></li></ul></div></div>
    <div class="nav-footer-right">
<p><a href="./data-privacy.html">Datenschutzhinweise</a></p>
</div>
  </div>
</footer>


</body></html>